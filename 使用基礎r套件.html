<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 使用基礎R套件 | R for Data Journalism</title>
  <meta name="description" content="For my Class teaching how to make data news reports" />
  <meta name="generator" content="bookdown 0.32 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 使用基礎R套件 | R for Data Journalism" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="For my Class teaching how to make data news reports" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 使用基礎R套件 | R for Data Journalism" />
  
  <meta name="twitter:description" content="For my Class teaching how to make data news reports" />
  

<meta name="author" content="HSIEH, JI-LUNG" />


<meta name="date" content="2023-01-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="dataframe.html"/>
<link rel="next" href="data-manipulation-wity-tidyverse.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.1/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.9/grViz.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.25/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<script src="libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R for Data Journalism</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="part"><span><b>I R BASIC</b></span></li>
<li class="chapter" data-level="2" data-path="basic.html"><a href="basic.html"><i class="fa fa-check"></i><b>2</b> R Basic</a>
<ul>
<li class="chapter" data-level="2.1" data-path="basic.html"><a href="basic.html#使用rstudio"><i class="fa fa-check"></i><b>2.1</b> 使用RStudio</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="basic.html"><a href="basic.html#rstudio介面簡介"><i class="fa fa-check"></i><b>2.1.1</b> RStudio介面簡介</a></li>
<li class="chapter" data-level="2.1.2" data-path="basic.html"><a href="basic.html#用rmarkdown來撰寫r"><i class="fa fa-check"></i><b>2.1.2</b> 用RMarkdown來撰寫R</a></li>
<li class="chapter" data-level="2.1.3" data-path="basic.html"><a href="basic.html#撰寫r"><i class="fa fa-check"></i><b>2.1.3</b> 撰寫R</a></li>
<li class="chapter" data-level="2.1.4" data-path="basic.html"><a href="basic.html#安裝並載入第三方套件"><i class="fa fa-check"></i><b>2.1.4</b> 安裝並載入第三方套件</a></li>
<li class="chapter" data-level="2.1.5" data-path="basic.html"><a href="basic.html#程式碼註解"><i class="fa fa-check"></i><b>2.1.5</b> 程式碼註解</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="basic.html"><a href="basic.html#第一次資料嘗試"><i class="fa fa-check"></i><b>2.2</b> 第一次資料嘗試</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="basic.html"><a href="basic.html#讀取台北住宅竊盜點位資料"><i class="fa fa-check"></i><b>2.2.1</b> 讀取台北住宅竊盜點位資料</a></li>
<li class="chapter" data-level="2.2.2" data-path="basic.html"><a href="basic.html#讀取先行下載的csv檔"><i class="fa fa-check"></i><b>2.2.2</b> 讀取先行下載的csv檔</a></li>
<li class="chapter" data-level="2.2.3" data-path="basic.html"><a href="basic.html#直接從網路載入內政部開放資料"><i class="fa fa-check"></i><b>2.2.3</b> 直接從網路載入內政部開放資料</a></li>
<li class="chapter" data-level="2.2.4" data-path="basic.html"><a href="basic.html#獲取ubike即時資料"><i class="fa fa-check"></i><b>2.2.4</b> 獲取ubike即時資料</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="basic.html"><a href="basic.html#r-qa"><i class="fa fa-check"></i><b>2.3</b> R Q&amp;A</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="basic.html"><a href="basic.html#編碼與設定語系"><i class="fa fa-check"></i><b>2.3.1</b> 編碼與設定語系</a></li>
<li class="chapter" data-level="2.3.2" data-path="basic.html"><a href="basic.html#rmdr-notebook無法儲存"><i class="fa fa-check"></i><b>2.3.2</b> RMD/R Notebook無法儲存</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-basic.html"><a href="r-basic.html"><i class="fa fa-check"></i><b>3</b> R Basic</a>
<ul>
<li class="chapter" data-level="3.1" data-path="r-basic.html"><a href="r-basic.html#r-syntax"><i class="fa fa-check"></i><b>3.1</b> R Syntax</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="r-basic.html"><a href="r-basic.html#assignment"><i class="fa fa-check"></i><b>3.1.1</b> Assignment</a></li>
<li class="chapter" data-level="3.1.2" data-path="r-basic.html"><a href="r-basic.html#comments-註解"><i class="fa fa-check"></i><b>3.1.2</b> Comments 註解</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="r-basic.html"><a href="r-basic.html#vector"><i class="fa fa-check"></i><b>3.2</b> Vector</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="r-basic.html"><a href="r-basic.html#creating-vectors"><i class="fa fa-check"></i><b>3.2.1</b> Creating vectors</a></li>
<li class="chapter" data-level="3.2.2" data-path="r-basic.html"><a href="r-basic.html#viewing"><i class="fa fa-check"></i><b>3.2.2</b> Viewing</a></li>
<li class="chapter" data-level="3.2.3" data-path="r-basic.html"><a href="r-basic.html#subsetting-filtering"><i class="fa fa-check"></i><b>3.2.3</b> Subsetting, filtering</a></li>
<li class="chapter" data-level="3.2.4" data-path="r-basic.html"><a href="r-basic.html#deleting"><i class="fa fa-check"></i><b>3.2.4</b> Deleting</a></li>
<li class="chapter" data-level="3.2.5" data-path="r-basic.html"><a href="r-basic.html#concatinating"><i class="fa fa-check"></i><b>3.2.5</b> Concatinating</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="r-basic.html"><a href="r-basic.html#calculating-with-vectors"><i class="fa fa-check"></i><b>3.3</b> Calculating with vectors</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="r-basic.html"><a href="r-basic.html#arithmetic-operations"><i class="fa fa-check"></i><b>3.3.1</b> Arithmetic operations</a></li>
<li class="chapter" data-level="3.3.2" data-path="r-basic.html"><a href="r-basic.html#logic-comparisons"><i class="fa fa-check"></i><b>3.3.2</b> Logic comparisons</a></li>
<li class="chapter" data-level="3.3.3" data-path="r-basic.html"><a href="r-basic.html#subsetting-by-logic-comparisons"><i class="fa fa-check"></i><b>3.3.3</b> Subsetting by logic comparisons</a></li>
<li class="chapter" data-level="3.3.4" data-path="r-basic.html"><a href="r-basic.html#sorting-and-ordering"><i class="fa fa-check"></i><b>3.3.4</b> Sorting and ordering</a></li>
<li class="chapter" data-level="3.3.5" data-path="r-basic.html"><a href="r-basic.html#built-in-math-functions"><i class="fa fa-check"></i><b>3.3.5</b> Built-in math functions</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="r-basic.html"><a href="r-basic.html#data-types"><i class="fa fa-check"></i><b>3.4</b> Data types</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="r-basic.html"><a href="r-basic.html#checking-data-type"><i class="fa fa-check"></i><b>3.4.1</b> Checking data type</a></li>
<li class="chapter" data-level="3.4.2" data-path="r-basic.html"><a href="r-basic.html#converting-data-type"><i class="fa fa-check"></i><b>3.4.2</b> Converting data type</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="r-basic.html"><a href="r-basic.html#character-operations"><i class="fa fa-check"></i><b>3.5</b> Character operations</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dataframe.html"><a href="dataframe.html"><i class="fa fa-check"></i><b>4</b> Dataframe</a>
<ul>
<li class="chapter" data-level="4.1" data-path="dataframe.html"><a href="dataframe.html#基本操作"><i class="fa fa-check"></i><b>4.1</b> 基本操作</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="dataframe.html"><a href="dataframe.html#產生新的dataframe"><i class="fa fa-check"></i><b>4.1.1</b> 產生新的Dataframe</a></li>
<li class="chapter" data-level="4.1.2" data-path="dataframe.html"><a href="dataframe.html#觀察dataframe"><i class="fa fa-check"></i><b>4.1.2</b> 觀察dataframe</a></li>
<li class="chapter" data-level="4.1.3" data-path="dataframe.html"><a href="dataframe.html#操作dataframe"><i class="fa fa-check"></i><b>4.1.3</b> 操作dataframe</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="dataframe.html"><a href="dataframe.html#簡易繪圖"><i class="fa fa-check"></i><b>4.2</b> 簡易繪圖</a></li>
<li class="chapter" data-level="4.3" data-path="dataframe.html"><a href="dataframe.html#基本操作使用dplyr"><i class="fa fa-check"></i><b>4.3</b> 基本操作：使用dplyr</a></li>
<li class="chapter" data-level="4.4" data-path="dataframe.html"><a href="dataframe.html#tibble-data_frame-data.frame"><i class="fa fa-check"></i><b>4.4</b> tibble, data_frame, data.frame</a></li>
<li class="chapter" data-level="4.5" data-path="dataframe.html"><a href="dataframe.html#database---sqlite"><i class="fa fa-check"></i><b>4.5</b> Database - SQLite</a></li>
</ul></li>
<li class="part"><span><b>II DATA MANIPULATION</b></span></li>
<li class="chapter" data-level="5" data-path="使用基礎r套件.html"><a href="使用基礎r套件.html"><i class="fa fa-check"></i><b>5</b> 使用基礎R套件</a>
<ul>
<li class="chapter" data-level="5.1" data-path="使用基礎r套件.html"><a href="使用基礎r套件.html#案例產假支薪跨國跨時比較"><i class="fa fa-check"></i><b>5.1</b> 案例：產假支薪跨國跨時比較</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="使用基礎r套件.html"><a href="使用基礎r套件.html#reading-.xlsx-by-readxl-package"><i class="fa fa-check"></i><b>5.1.1</b> Reading .xlsx by readxl package</a></li>
<li class="chapter" data-level="5.1.2" data-path="使用基礎r套件.html"><a href="使用基礎r套件.html#previewing-data-by-view-class-dim-str-summary-and-names"><i class="fa fa-check"></i><b>5.1.2</b> Previewing data by <code>View()</code>, <code>class()</code>, <code>dim()</code>, <code>str()</code>, <code>summary()</code> and <code>names()</code></a></li>
<li class="chapter" data-level="5.1.3" data-path="使用基礎r套件.html"><a href="使用基礎r套件.html#select-variables"><i class="fa fa-check"></i><b>5.1.3</b> Select variables</a></li>
<li class="chapter" data-level="5.1.4" data-path="使用基礎r套件.html"><a href="使用基礎r套件.html#check-replace-nas"><i class="fa fa-check"></i><b>5.1.4</b> Check &amp; Replace NAs</a></li>
<li class="chapter" data-level="5.1.5" data-path="使用基礎r套件.html"><a href="使用基礎r套件.html#filtering-data"><i class="fa fa-check"></i><b>5.1.5</b> Filtering data</a></li>
<li class="chapter" data-level="5.1.6" data-path="使用基礎r套件.html"><a href="使用基礎r套件.html#plotting"><i class="fa fa-check"></i><b>5.1.6</b> Plotting</a></li>
<li class="chapter" data-level="5.1.7" data-path="使用基礎r套件.html"><a href="使用基礎r套件.html#practice02_1_1-plotting-more"><i class="fa fa-check"></i><b>5.1.7</b> Practice02_1_1 Plotting more</a></li>
<li class="chapter" data-level="5.1.8" data-path="使用基礎r套件.html"><a href="使用基礎r套件.html#practice02_2_2-selecting-and-filtering-by-dplyr-i"><i class="fa fa-check"></i><b>5.1.8</b> Practice02_2_2 selecting and filtering by dplyr I</a></li>
<li class="chapter" data-level="5.1.9" data-path="使用基礎r套件.html"><a href="使用基礎r套件.html#more-clean-version"><i class="fa fa-check"></i><b>5.1.9</b> (More) Clean version</a></li>
<li class="chapter" data-level="5.1.10" data-path="使用基礎r套件.html"><a href="使用基礎r套件.html#more-the-fittest-version-to-compute-staysame"><i class="fa fa-check"></i><b>5.1.10</b> (More) The fittest version to compute staySame</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="使用基礎r套件.html"><a href="使用基礎r套件.html#樞紐分析台北住宅竊盜點位"><i class="fa fa-check"></i><b>5.2</b> 樞紐分析：台北住宅竊盜點位</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="使用基礎r套件.html"><a href="使用基礎r套件.html#讀取檔案"><i class="fa fa-check"></i><b>5.2.1</b> 讀取檔案</a></li>
<li class="chapter" data-level="5.2.2" data-path="使用基礎r套件.html"><a href="使用基礎r套件.html#查看資料內容"><i class="fa fa-check"></i><b>5.2.2</b> 查看資料內容</a></li>
<li class="chapter" data-level="5.2.3" data-path="使用基礎r套件.html"><a href="使用基礎r套件.html#觀察資料維度-1"><i class="fa fa-check"></i><b>5.2.3</b> 觀察資料維度</a></li>
<li class="chapter" data-level="5.2.4" data-path="使用基礎r套件.html"><a href="使用基礎r套件.html#觀察變數名稱"><i class="fa fa-check"></i><b>5.2.4</b> 觀察變數名稱</a></li>
<li class="chapter" data-level="5.2.5" data-path="使用基礎r套件.html"><a href="使用基礎r套件.html#萃取所需新變項"><i class="fa fa-check"></i><b>5.2.5</b> 萃取所需新變項</a></li>
<li class="chapter" data-level="5.2.6" data-path="使用基礎r套件.html"><a href="使用基礎r套件.html#iv.-樞紐分析計數加總與彙整"><i class="fa fa-check"></i><b>5.2.6</b> IV. 樞紐分析：計數、加總與彙整。</a></li>
<li class="chapter" data-level="5.2.7" data-path="使用基礎r套件.html"><a href="使用基礎r套件.html#方法一counting-by-table"><i class="fa fa-check"></i><b>5.2.7</b> 方法一：Counting by <code>table()</code></a></li>
<li class="chapter" data-level="5.2.8" data-path="使用基礎r套件.html"><a href="使用基礎r套件.html#方法二counting-by-tapply"><i class="fa fa-check"></i><b>5.2.8</b> 方法二：Counting by <code>tapply()</code></a></li>
<li class="chapter" data-level="5.2.9" data-path="使用基礎r套件.html"><a href="使用基礎r套件.html#v.-依照變數值篩選資料"><i class="fa fa-check"></i><b>5.2.9</b> V. 依照變數值篩選資料</a></li>
<li class="chapter" data-level="5.2.10" data-path="使用基礎r套件.html"><a href="使用基礎r套件.html#vi.-雙變數樞紐分析"><i class="fa fa-check"></i><b>5.2.10</b> VI. 雙變數樞紐分析</a></li>
<li class="chapter" data-level="5.2.11" data-path="使用基礎r套件.html"><a href="使用基礎r套件.html#vii.-繪圖-plotting"><i class="fa fa-check"></i><b>5.2.11</b> VII. 繪圖 Plotting</a></li>
<li class="chapter" data-level="5.2.12" data-path="使用基礎r套件.html"><a href="使用基礎r套件.html#option-視覺化殘差分析"><i class="fa fa-check"></i><b>5.2.12</b> (Option) 視覺化殘差分析</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-manipulation-wity-tidyverse.html"><a href="data-manipulation-wity-tidyverse.html"><i class="fa fa-check"></i><b>6</b> Data Manipulation wity tidyverse</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data-manipulation-wity-tidyverse.html"><a href="data-manipulation-wity-tidyverse.html#base-to-dplyr-tp-theft"><i class="fa fa-check"></i><b>6.1</b> base to dplyr: TP Theft</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="data-manipulation-wity-tidyverse.html"><a href="data-manipulation-wity-tidyverse.html#reading-data"><i class="fa fa-check"></i><b>6.1.1</b> Reading data</a></li>
<li class="chapter" data-level="6.1.2" data-path="data-manipulation-wity-tidyverse.html"><a href="data-manipulation-wity-tidyverse.html#cleaning-data-i"><i class="fa fa-check"></i><b>6.1.2</b> Cleaning data I</a></li>
<li class="chapter" data-level="6.1.3" data-path="data-manipulation-wity-tidyverse.html"><a href="data-manipulation-wity-tidyverse.html#cleaning-data-ii"><i class="fa fa-check"></i><b>6.1.3</b> Cleaning data II</a></li>
<li class="chapter" data-level="6.1.4" data-path="data-manipulation-wity-tidyverse.html"><a href="data-manipulation-wity-tidyverse.html#long-to-wide-form"><i class="fa fa-check"></i><b>6.1.4</b> Long to wide form</a></li>
<li class="chapter" data-level="6.1.5" data-path="data-manipulation-wity-tidyverse.html"><a href="data-manipulation-wity-tidyverse.html#setting-time-as-row.name-for-mosaicplot"><i class="fa fa-check"></i><b>6.1.5</b> Setting time as row.name for mosaicplot</a></li>
<li class="chapter" data-level="6.1.6" data-path="data-manipulation-wity-tidyverse.html"><a href="data-manipulation-wity-tidyverse.html#clean-version"><i class="fa fa-check"></i><b>6.1.6</b> Clean version</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="data-manipulation-wity-tidyverse.html"><a href="data-manipulation-wity-tidyverse.html#空值na處理"><i class="fa fa-check"></i><b>6.2</b> 空值（NA）處理</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="data-manipulation-wity-tidyverse.html"><a href="data-manipulation-wity-tidyverse.html#表格重整政府預算"><i class="fa fa-check"></i><b>6.2.1</b> 表格重整：政府預算</a></li>
<li class="chapter" data-level="6.2.2" data-path="data-manipulation-wity-tidyverse.html"><a href="data-manipulation-wity-tidyverse.html#對齊資料世界各國疫苗接種比例"><i class="fa fa-check"></i><b>6.2.2</b> 對齊資料。世界各國疫苗接種比例</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="data-manipulation-wity-tidyverse.html"><a href="data-manipulation-wity-tidyverse.html#categorical"><i class="fa fa-check"></i><b>6.3</b> 類別資料分析</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="data-manipulation-wity-tidyverse.html"><a href="data-manipulation-wity-tidyverse.html#清理資料"><i class="fa fa-check"></i><b>6.3.1</b> 清理資料</a></li>
<li class="chapter" data-level="6.3.2" data-path="data-manipulation-wity-tidyverse.html"><a href="data-manipulation-wity-tidyverse.html#尺度轉類別指標"><i class="fa fa-check"></i><b>6.3.2</b> 尺度轉類別指標</a></li>
<li class="chapter" data-level="6.3.3" data-path="data-manipulation-wity-tidyverse.html"><a href="data-manipulation-wity-tidyverse.html#cross-tabulating"><i class="fa fa-check"></i><b>6.3.3</b> Cross-tabulating</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="data-manipulation-wity-tidyverse.html"><a href="data-manipulation-wity-tidyverse.html#時間軸的視覺化"><i class="fa fa-check"></i><b>6.4</b> 時間軸的視覺化</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="data-manipulation-wity-tidyverse.html"><a href="data-manipulation-wity-tidyverse.html#文字轉時間"><i class="fa fa-check"></i><b>6.4.1</b> 文字轉時間</a></li>
<li class="chapter" data-level="6.4.2" data-path="data-manipulation-wity-tidyverse.html"><a href="data-manipulation-wity-tidyverse.html#時間作為機率分佈x軸"><i class="fa fa-check"></i><b>6.4.2</b> 時間作為機率分佈X軸</a></li>
<li class="chapter" data-level="6.4.3" data-path="data-manipulation-wity-tidyverse.html"><a href="data-manipulation-wity-tidyverse.html#逐月統計資料"><i class="fa fa-check"></i><b>6.4.3</b> 逐月統計資料</a></li>
<li class="chapter" data-level="6.4.4" data-path="data-manipulation-wity-tidyverse.html"><a href="data-manipulation-wity-tidyverse.html#逐日統計資料佳"><i class="fa fa-check"></i><b>6.4.4</b> 逐日統計資料（佳）</a></li>
<li class="chapter" data-level="6.4.5" data-path="data-manipulation-wity-tidyverse.html"><a href="data-manipulation-wity-tidyverse.html#每日逐時資料"><i class="fa fa-check"></i><b>6.4.5</b> 每日逐時資料</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="text-processing.html"><a href="text-processing.html"><i class="fa fa-check"></i><b>7</b> Text Processing</a>
<ul>
<li class="chapter" data-level="7.1" data-path="text-processing.html"><a href="text-processing.html#tweets-分析"><i class="fa fa-check"></i><b>7.1</b> Tweets 分析</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="text-processing.html"><a href="text-processing.html#載入並清理資料"><i class="fa fa-check"></i><b>7.1.1</b> 載入並清理資料</a></li>
<li class="chapter" data-level="7.1.2" data-path="text-processing.html"><a href="text-processing.html#萃取資料"><i class="fa fa-check"></i><b>7.1.2</b> 萃取資料</a></li>
<li class="chapter" data-level="7.1.3" data-path="text-processing.html"><a href="text-processing.html#視覺化探索"><i class="fa fa-check"></i><b>7.1.3</b> 視覺化探索</a></li>
<li class="chapter" data-level="7.1.4" data-path="text-processing.html"><a href="text-processing.html#keyness"><i class="fa fa-check"></i><b>7.1.4</b> Keyness</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="crawler.html"><a href="crawler.html"><i class="fa fa-check"></i><b>8</b> Crawler</a>
<ul>
<li class="chapter" data-level="8.1" data-path="crawler.html"><a href="crawler.html#scraping-104.com"><i class="fa fa-check"></i><b>8.1</b> Scraping 104.com</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="crawler.html"><a href="crawler.html#complete-code"><i class="fa fa-check"></i><b>8.1.1</b> Complete Code</a></li>
<li class="chapter" data-level="8.1.2" data-path="crawler.html"><a href="crawler.html#step-by-step"><i class="fa fa-check"></i><b>8.1.2</b> Step-by-Step</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III VISUALIZATION</b></span></li>
<li class="chapter" data-level="9" data-path="visualization.html"><a href="visualization.html"><i class="fa fa-check"></i><b>9</b> Visualization</a>
<ul>
<li class="chapter" data-level="9.1" data-path="visualization.html"><a href="visualization.html#ggplot"><i class="fa fa-check"></i><b>9.1</b> ggplot簡介</a></li>
<li class="chapter" data-level="9.2" data-path="visualization.html"><a href="visualization.html#繪圖基礎折線圖"><i class="fa fa-check"></i><b>9.2</b> 繪圖基礎：折線圖</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="visualization.html"><a href="visualization.html#繪圖三要素"><i class="fa fa-check"></i><b>9.2.1</b> 繪圖三要素</a></li>
<li class="chapter" data-level="9.2.2" data-path="visualization.html"><a href="visualization.html#範例-紐時世代貧富不均"><i class="fa fa-check"></i><b>9.2.2</b> 範例-紐時世代貧富不均</a></li>
<li class="chapter" data-level="9.2.3" data-path="visualization.html"><a href="visualization.html#加入自變項群組"><i class="fa fa-check"></i><b>9.2.3</b> 加入自變項群組</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="visualization.html"><a href="visualization.html#圖表調整"><i class="fa fa-check"></i><b>9.3</b> 圖表調整</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="visualization.html"><a href="visualization.html#點線型態"><i class="fa fa-check"></i><b>9.3.1</b> 點線型態</a></li>
<li class="chapter" data-level="9.3.2" data-path="visualization.html"><a href="visualization.html#標題標籤與圖說"><i class="fa fa-check"></i><b>9.3.2</b> 標題、標籤與圖說</a></li>
<li class="chapter" data-level="9.3.3" data-path="visualization.html"><a href="visualization.html#字體樣式"><i class="fa fa-check"></i><b>9.3.3</b> 字體樣式</a></li>
<li class="chapter" data-level="9.3.4" data-path="visualization.html"><a href="visualization.html#圖表主題色調"><i class="fa fa-check"></i><b>9.3.4</b> 圖表主題色調</a></li>
<li class="chapter" data-level="9.3.5" data-path="visualization.html"><a href="visualization.html#預設主題"><i class="fa fa-check"></i><b>9.3.5</b> 預設主題</a></li>
<li class="chapter" data-level="9.3.6" data-path="visualization.html"><a href="visualization.html#顯示中文字體"><i class="fa fa-check"></i><b>9.3.6</b> 顯示中文字體</a></li>
<li class="chapter" data-level="9.3.7" data-path="visualization.html"><a href="visualization.html#xy軸方向"><i class="fa fa-check"></i><b>9.3.7</b> X/Y軸方向</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="visualization.html"><a href="visualization.html#視覺化說故事的技巧"><i class="fa fa-check"></i><b>9.4</b> 視覺化說故事的技巧</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="visualization.html"><a href="visualization.html#依群組指定顏色"><i class="fa fa-check"></i><b>9.4.1</b> 依群組指定顏色</a></li>
<li class="chapter" data-level="9.4.2" data-path="visualization.html"><a href="visualization.html#使用gghighlight套件"><i class="fa fa-check"></i><b>9.4.2</b> 使用gghighlight套件</a></li>
<li class="chapter" data-level="9.4.3" data-path="visualization.html"><a href="visualization.html#為視覺化建立群組"><i class="fa fa-check"></i><b>9.4.3</b> 為視覺化建立群組</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="visualization.html"><a href="visualization.html#colors"><i class="fa fa-check"></i><b>9.5</b> COLORS</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="chart-types.html"><a href="chart-types.html"><i class="fa fa-check"></i><b>10</b> CHART TYPES</a></li>
<li class="chapter" data-level="11" data-path="COORDINATE.html"><a href="COORDINATE.html"><i class="fa fa-check"></i><b>11</b> COORDINATE</a>
<ul>
<li class="chapter" data-level="11.1" data-path="COORDINATE.html"><a href="COORDINATE.html#排序以展示分佈"><i class="fa fa-check"></i><b>11.1</b> 排序以展示分佈</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="COORDINATE.html"><a href="COORDINATE.html#section"><i class="fa fa-check"></i><b>11.1.1</b> </a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="COORDINATE.html"><a href="COORDINATE.html#用log-scale放大長尾頭部"><i class="fa fa-check"></i><b>11.2</b> 用Log-scale放大長尾頭部</a></li>
<li class="chapter" data-level="11.3" data-path="COORDINATE.html"><a href="COORDINATE.html#square-root-scale"><i class="fa fa-check"></i><b>11.3</b> Square-root scale</a></li>
<li class="chapter" data-level="11.4" data-path="COORDINATE.html"><a href="COORDINATE.html#座標軸從數值到增加值"><i class="fa fa-check"></i><b>11.4</b> 座標軸從數值到增加值</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="COORDINATE.html"><a href="COORDINATE.html#net-worth-by-age-group-wgoitg-of-nytimes"><i class="fa fa-check"></i><b>11.4.1</b> Net Worth by Age Group (WGOITG of NYTIMES)</a></li>
<li class="chapter" data-level="11.4.2" data-path="COORDINATE.html"><a href="COORDINATE.html#read-and-sort-data"><i class="fa fa-check"></i><b>11.4.2</b> Read and sort data</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="COORDINATE.html"><a href="COORDINATE.html#等比例座標軸"><i class="fa fa-check"></i><b>11.5</b> 等比例座標軸</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="COORDINATE.html"><a href="COORDINATE.html#unicef-optimistic-wgoith"><i class="fa fa-check"></i><b>11.5.1</b> UNICEF-Optimistic (WGOITH)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="amount.html"><a href="amount.html"><i class="fa fa-check"></i><b>12</b> AMOUNT</a>
<ul>
<li class="chapter" data-level="12.1" data-path="amount.html"><a href="amount.html#bar-chart"><i class="fa fa-check"></i><b>12.1</b> Bar chart</a></li>
<li class="chapter" data-level="12.2" data-path="amount.html"><a href="amount.html#heatmap-vaccination"><i class="fa fa-check"></i><b>12.2</b> Heatmap: Vaccination</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="distribution-histogram-density.html"><a href="distribution-histogram-density.html"><i class="fa fa-check"></i><b>13</b> DISTRIBUTION: Histogram &amp; Density</a>
<ul>
<li class="chapter" data-level="13.1" data-path="distribution-histogram-density.html"><a href="distribution-histogram-density.html#density-plot"><i class="fa fa-check"></i><b>13.1</b> Density plot</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="distribution-histogram-density.html"><a href="distribution-histogram-density.html#density-with-different-bandwidth"><i class="fa fa-check"></i><b>13.1.1</b> Density with different bandwidth</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="distribution-histogram-density.html"><a href="distribution-histogram-density.html#histogram"><i class="fa fa-check"></i><b>13.2</b> Histogram</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="distribution-histogram-density.html"><a href="distribution-histogram-density.html#histogram-with-different-number-of-bins"><i class="fa fa-check"></i><b>13.2.1</b> Histogram with different number of bins</a></li>
<li class="chapter" data-level="13.2.2" data-path="distribution-histogram-density.html"><a href="distribution-histogram-density.html#density-vs-histogram"><i class="fa fa-check"></i><b>13.2.2</b> Density vs histogram</a></li>
<li class="chapter" data-level="13.2.3" data-path="distribution-histogram-density.html"><a href="distribution-histogram-density.html#positions-of-bar-chart"><i class="fa fa-check"></i><b>13.2.3</b> Positions of bar chart</a></li>
<li class="chapter" data-level="13.2.4" data-path="distribution-histogram-density.html"><a href="distribution-histogram-density.html#display-two-groups-histogram-by-facet_wrap"><i class="fa fa-check"></i><b>13.2.4</b> Display two groups histogram by facet_wrap()</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="distribution-histogram-density.html"><a href="distribution-histogram-density.html#pyramid-plot"><i class="fa fa-check"></i><b>13.3</b> Pyramid Plot</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="distribution-histogram-density.html"><a href="distribution-histogram-density.html#modify-geom_col-to-pyramid-plot"><i class="fa fa-check"></i><b>13.3.1</b> Modify geom_col() to pyramid plot</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="distribution-histogram-density.html"><a href="distribution-histogram-density.html#box-plot-muitiple-distrubution"><i class="fa fa-check"></i><b>13.4</b> Box plot: Muitiple Distrubution</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="distribution-histogram-density.html"><a href="distribution-histogram-density.html#tw-salary-boxplot"><i class="fa fa-check"></i><b>13.4.1</b> TW-Salary (boxplot)</a></li>
<li class="chapter" data-level="13.4.2" data-path="distribution-histogram-density.html"><a href="distribution-histogram-density.html#tw-income-boxplot"><i class="fa fa-check"></i><b>13.4.2</b> TW-Income (boxplot)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="proportion.html"><a href="proportion.html"><i class="fa fa-check"></i><b>14</b> PROPORTION</a>
<ul>
<li class="chapter" data-level="14.1" data-path="proportion.html"><a href="proportion.html#pie-chart"><i class="fa fa-check"></i><b>14.1</b> Pie Chart</a></li>
<li class="chapter" data-level="14.2" data-path="proportion.html"><a href="proportion.html#dodged-bar-chart"><i class="fa fa-check"></i><b>14.2</b> Dodged Bar Chart</a></li>
<li class="chapter" data-level="14.3" data-path="proportion.html"><a href="proportion.html#treemap-nested-proportion"><i class="fa fa-check"></i><b>14.3</b> Treemap: Nested Proportion</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="proportion.html"><a href="proportion.html#global-carbon-projects-wgoith-nytimes"><i class="fa fa-check"></i><b>14.3.1</b> Global Carbon Projects (WGOITH-NYTIMES)</a></li>
<li class="chapter" data-level="14.3.2" data-path="proportion.html"><a href="proportion.html#tw-budget"><i class="fa fa-check"></i><b>14.3.2</b> TW Budget</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="association.html"><a href="association.html"><i class="fa fa-check"></i><b>15</b> ASSOCIATION</a>
<ul>
<li class="chapter" data-level="15.1" data-path="association.html"><a href="association.html#等比例座標軸-1"><i class="fa fa-check"></i><b>15.1</b> 等比例座標軸</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="association.html"><a href="association.html#unicef-optimistic-wgoith-1"><i class="fa fa-check"></i><b>15.1.1</b> UNICEF-Optimistic (WGOITH)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="time-trends.html"><a href="time-trends.html"><i class="fa fa-check"></i><b>16</b> TIME &amp; TRENDS</a></li>
<li class="chapter" data-level="17" data-path="network-vis.html"><a href="network-vis.html"><i class="fa fa-check"></i><b>17</b> NETWORK VIS</a>
<ul>
<li class="chapter" data-level="17.1" data-path="network-vis.html"><a href="network-vis.html#generating-networks"><i class="fa fa-check"></i><b>17.1</b> Generating networks</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="network-vis.html"><a href="network-vis.html#random-network"><i class="fa fa-check"></i><b>17.1.1</b> Random network</a></li>
<li class="chapter" data-level="17.1.2" data-path="network-vis.html"><a href="network-vis.html#random-network-1"><i class="fa fa-check"></i><b>17.1.2</b> Random network</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="network-vis.html"><a href="network-vis.html#retrieve-top3-components"><i class="fa fa-check"></i><b>17.2</b> Retrieve Top3 Components</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="network-vis.html"><a href="network-vis.html#visualize-again"><i class="fa fa-check"></i><b>17.2.1</b> Visualize again</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="network-vis.html"><a href="network-vis.html#motif-visualization-and-analysis"><i class="fa fa-check"></i><b>17.3</b> Motif visualization and analysis</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="network-vis.html"><a href="network-vis.html#motif-type"><i class="fa fa-check"></i><b>17.3.1</b> Motif type</a></li>
<li class="chapter" data-level="17.3.2" data-path="network-vis.html"><a href="network-vis.html#motif-analysis"><i class="fa fa-check"></i><b>17.3.2</b> Motif analysis</a></li>
<li class="chapter" data-level="17.3.3" data-path="network-vis.html"><a href="network-vis.html#generate-motives"><i class="fa fa-check"></i><b>17.3.3</b> Generate motives</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="geospatial.html"><a href="geospatial.html"><i class="fa fa-check"></i><b>18</b> GEOSPATIAL</a></li>
<li class="chapter" data-level="19" data-path="interactivity.html"><a href="interactivity.html"><i class="fa fa-check"></i><b>19</b> Interactivity</a>
<ul>
<li class="chapter" data-level="19.1" data-path="interactivity.html"><a href="interactivity.html#ggplotly"><i class="fa fa-check"></i><b>19.1</b> ggplotly</a>
<ul>
<li class="chapter" data-level="19.1.1" data-path="interactivity.html"><a href="interactivity.html#line-chart"><i class="fa fa-check"></i><b>19.1.1</b> LINE CHART</a></li>
<li class="chapter" data-level="19.1.2" data-path="interactivity.html"><a href="interactivity.html#scatter"><i class="fa fa-check"></i><b>19.1.2</b> SCATTER</a></li>
<li class="chapter" data-level="19.1.3" data-path="interactivity.html"><a href="interactivity.html#barplot"><i class="fa fa-check"></i><b>19.1.3</b> Barplot</a></li>
<li class="chapter" data-level="19.1.4" data-path="interactivity.html"><a href="interactivity.html#boxplot"><i class="fa fa-check"></i><b>19.1.4</b> Boxplot</a></li>
<li class="chapter" data-level="19.1.5" data-path="interactivity.html"><a href="interactivity.html#treemap-global-carbon"><i class="fa fa-check"></i><b>19.1.5</b> Treemap (Global Carbon)</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="interactivity.html"><a href="interactivity.html#產製圖表動畫"><i class="fa fa-check"></i><b>19.2</b> 產製圖表動畫</a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="interactivity.html"><a href="interactivity.html#地圖下載與轉換投影方法"><i class="fa fa-check"></i><b>19.2.1</b> 地圖下載與轉換投影方法</a></li>
<li class="chapter" data-level="19.2.2" data-path="interactivity.html"><a href="interactivity.html#靜態繪圖測試"><i class="fa fa-check"></i><b>19.2.2</b> 靜態繪圖測試</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="20" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>20</b> Appendix</a>
<ul>
<li class="chapter" data-level="20.1" data-path="appendix.html"><a href="appendix.html#dataset"><i class="fa fa-check"></i><b>20.1</b> Dataset</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="wgoitg.html"><a href="wgoitg.html"><i class="fa fa-check"></i><b>21</b> WGOITG of NyTimes</a>
<ul>
<li class="chapter" data-level="21.1" data-path="wgoitg.html"><a href="wgoitg.html#inequality-net-worth-by-age-group"><i class="fa fa-check"></i><b>21.1</b> Inequality: Net Worth by Age Group</a></li>
<li class="chapter" data-level="21.2" data-path="wgoitg.html"><a href="wgoitg.html#unicef-global-survey-optimism"><i class="fa fa-check"></i><b>21.2</b> UNICEF-Global Survey Optimism</a></li>
<li class="chapter" data-level="21.3" data-path="wgoitg.html"><a href="wgoitg.html#global-carbon-projects"><i class="fa fa-check"></i><b>21.3</b> Global Carbon Projects</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="taiwan.html"><a href="taiwan.html"><i class="fa fa-check"></i><b>22</b> Case Studies (Taiwan)</a>
<ul>
<li class="chapter" data-level="22.1" data-path="taiwan.html"><a href="taiwan.html#tw-aqi-visual-studies"><i class="fa fa-check"></i><b>22.1</b> TW AQI Visual Studies</a>
<ul>
<li class="chapter" data-level="22.1.1" data-path="taiwan.html"><a href="taiwan.html#trending-central-tendency"><i class="fa fa-check"></i><b>22.1.1</b> Trending: Central tendency</a></li>
<li class="chapter" data-level="22.1.2" data-path="taiwan.html"><a href="taiwan.html#trending-extreme-value"><i class="fa fa-check"></i><b>22.1.2</b> Trending: Extreme value</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Data Journalism</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="使用基礎r套件" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> 使用基礎R套件<a href="使用基礎r套件.html#使用基礎r套件" class="anchor-section" aria-label="Anchor link to header"></a></h1>

<div id="案例產假支薪跨國跨時比較" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> 案例：產假支薪跨國跨時比較<a href="使用基礎r套件.html#案例產假支薪跨國跨時比較" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p>本案例將利用R來重製華盛頓郵報在2016/08/13的一篇談論美國婦女產假支薪情形的報導。這個案例中將會應用到data.frame和基本的繪圖與資料摘要方法。The case adaped Washington Post’s paid maternity leave as an exmaple to introduce basic skill of data.frame, plotting, and data mamipulation.</p></li>
<li><p>原始新聞來源：<a href="https://www.washingtonpost.com/news/worldviews/wp/2016/08/13/the-world-is-getting-better-at-paid-maternity-leave-the-u-s-is-not/?tid=sm_tw&amp;utm_term=.f8cd50280326#comments" class="uri">https://www.washingtonpost.com/news/worldviews/wp/2016/08/13/the-world-is-getting-better-at-paid-maternity-leave-the-u-s-is-not/?tid=sm_tw&amp;utm_term=.f8cd50280326#comments</a></p></li>
</ul>
<div id="reading-.xlsx-by-readxl-package" class="section level3 hasAnchor" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> Reading .xlsx by readxl package<a href="使用基礎r套件.html#reading-.xlsx-by-readxl-package" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>readxl也包含在tidyverse的套件集中，所以應該已經在前次安裝過，不用特別安裝。</li>
</ul>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="使用基礎r套件.html#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import readxl package</span></span>
<span id="cb240-2"><a href="使用基礎r套件.html#cb240-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb240-3"><a href="使用基礎r套件.html#cb240-3" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="使用基礎r套件.html#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use read_excel() to convert excel sheet to data.frame</span></span>
<span id="cb241-2"><a href="使用基礎r套件.html#cb241-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;data/WORLD-MACHE_Gender_6.8.15.xls&quot;</span>, <span class="st">&quot;Sheet1&quot;</span>, <span class="at">col_names=</span>T)</span></code></pre></div>
</div>
<div id="previewing-data-by-view-class-dim-str-summary-and-names" class="section level3 hasAnchor" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> Previewing data by <code>View()</code>, <code>class()</code>, <code>dim()</code>, <code>str()</code>, <code>summary()</code> and <code>names()</code><a href="使用基礎r套件.html#previewing-data-by-view-class-dim-str-summary-and-names" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="使用基礎r套件.html#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(df)</span></span>
<span id="cb242-2"><a href="使用基礎r套件.html#cb242-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(df)       <span class="co"># [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</span></span></code></pre></div>
<pre class="output"><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="使用基礎r套件.html#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df)</span></code></pre></div>
<pre class="output"><code>## [1] 197 156</code></pre>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="使用基礎r套件.html#cb246-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Show names of variables (vectors, columns) by names()</span></span>
<span id="cb246-2"><a href="使用基礎r套件.html#cb246-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df)</span></code></pre></div>
<pre class="output"><code>##   [1] &quot;country&quot;           &quot;iso2&quot;              &quot;iso3&quot;             
##   [4] &quot;region&quot;            &quot;wb_econ&quot;           &quot;matleave_95&quot;      
##   [7] &quot;matleave_96&quot;       &quot;matleave_97&quot;       &quot;matleave_98&quot;      
##  [10] &quot;matleave_99&quot;       &quot;matleave_00&quot;       &quot;matleave_01&quot;      
##  [13] &quot;matleave_02&quot;       &quot;matleave_03&quot;       &quot;matleave_04&quot;      
##  [16] &quot;matleave_05&quot;       &quot;matleave_06&quot;       &quot;matleave_07&quot;      
##  [19] &quot;matleave_08&quot;       &quot;matleave_09&quot;       &quot;matleave_10&quot;      
##  [22] &quot;matleave_11&quot;       &quot;matleave_12&quot;       &quot;matleave_13&quot;      
##  [25] &quot;matleave_wrr_95&quot;   &quot;matleave_wrr_96&quot;   &quot;matleave_wrr_97&quot;  
##  [28] &quot;matleave_wrr_98&quot;   &quot;matleave_wrr_99&quot;   &quot;matleave_wrr_00&quot;  
##  [31] &quot;matleave_wrr_01&quot;   &quot;matleave_wrr_02&quot;   &quot;matleave_wrr_03&quot;  
##  [34] &quot;matleave_wrr_04&quot;   &quot;matleave_wrr_05&quot;   &quot;matleave_wrr_06&quot;  
##  [37] &quot;matleave_wrr_07&quot;   &quot;matleave_wrr_08&quot;   &quot;matleave_wrr_09&quot;  
##  [40] &quot;matleave_wrr_10&quot;   &quot;matleave_wrr_11&quot;   &quot;matleave_wrr_12&quot;  
##  [43] &quot;matleave_wrr_13&quot;   &quot;bf_dur_95&quot;         &quot;bf_dur_96&quot;        
##  [46] &quot;bf_dur_97&quot;         &quot;bf_dur_98&quot;         &quot;bf_dur_99&quot;        
##  [49] &quot;bf_dur_00&quot;         &quot;bf_dur_01&quot;         &quot;bf_dur_02&quot;        
##  [52] &quot;bf_dur_03&quot;         &quot;bf_dur_04&quot;         &quot;bf_dur_05&quot;        
##  [55] &quot;bf_dur_06&quot;         &quot;bf_dur_07&quot;         &quot;bf_dur_08&quot;        
##  [58] &quot;bf_dur_09&quot;         &quot;bf_dur_10&quot;         &quot;bf_dur_11&quot;        
##  [61] &quot;bf_dur_12&quot;         &quot;bf_dur_13&quot;         &quot;mat_bfeed_6mon_95&quot;
##  [64] &quot;mat_bfeed_6mon_96&quot; &quot;mat_bfeed_6mon_97&quot; &quot;mat_bfeed_6mon_98&quot;
##  [67] &quot;mat_bfeed_6mon_99&quot; &quot;mat_bfeed_6mon_00&quot; &quot;mat_bfeed_6mon_01&quot;
##  [70] &quot;mat_bfeed_6mon_02&quot; &quot;mat_bfeed_6mon_03&quot; &quot;mat_bfeed_6mon_04&quot;
##  [73] &quot;mat_bfeed_6mon_05&quot; &quot;mat_bfeed_6mon_06&quot; &quot;mat_bfeed_6mon_07&quot;
##  [76] &quot;mat_bfeed_6mon_08&quot; &quot;mat_bfeed_6mon_09&quot; &quot;mat_bfeed_6mon_10&quot;
##  [79] &quot;mat_bfeed_6mon_11&quot; &quot;mat_bfeed_6mon_12&quot; &quot;mat_bfeed_6mon_13&quot;
##  [82] &quot;minage_fem_leg_95&quot; &quot;minage_fem_leg_96&quot; &quot;minage_fem_leg_97&quot;
##  [85] &quot;minage_fem_leg_98&quot; &quot;minage_fem_leg_99&quot; &quot;minage_fem_leg_00&quot;
##  [88] &quot;minage_fem_leg_01&quot; &quot;minage_fem_leg_02&quot; &quot;minage_fem_leg_03&quot;
##  [91] &quot;minage_fem_leg_04&quot; &quot;minage_fem_leg_05&quot; &quot;minage_fem_leg_06&quot;
##  [94] &quot;minage_fem_leg_07&quot; &quot;minage_fem_leg_08&quot; &quot;minage_fem_leg_09&quot;
##  [97] &quot;minage_fem_leg_10&quot; &quot;minage_fem_leg_11&quot; &quot;minage_fem_leg_12&quot;
## [100] &quot;legal_diff_leg_95&quot; &quot;legal_diff_leg_96&quot; &quot;legal_diff_leg_97&quot;
## [103] &quot;legal_diff_leg_98&quot; &quot;legal_diff_leg_99&quot; &quot;legal_diff_leg_00&quot;
## [106] &quot;legal_diff_leg_01&quot; &quot;legal_diff_leg_02&quot; &quot;legal_diff_leg_03&quot;
## [109] &quot;legal_diff_leg_04&quot; &quot;legal_diff_leg_05&quot; &quot;legal_diff_leg_06&quot;
## [112] &quot;legal_diff_leg_07&quot; &quot;legal_diff_leg_08&quot; &quot;legal_diff_leg_09&quot;
## [115] &quot;legal_diff_leg_10&quot; &quot;legal_diff_leg_11&quot; &quot;legal_diff_leg_12&quot;
## [118] &quot;minage_fem_pc_95&quot;  &quot;minage_fem_pc_96&quot;  &quot;minage_fem_pc_97&quot; 
## [121] &quot;minage_fem_pc_98&quot;  &quot;minage_fem_pc_99&quot;  &quot;minage_fem_pc_00&quot; 
## [124] &quot;minage_fem_pc_01&quot;  &quot;minage_fem_pc_02&quot;  &quot;minage_fem_pc_03&quot; 
## [127] &quot;minage_fem_pc_04&quot;  &quot;minage_fem_pc_05&quot;  &quot;minage_fem_pc_06&quot; 
## [130] &quot;minage_fem_pc_07&quot;  &quot;minage_fem_pc_08&quot;  &quot;minage_fem_pc_09&quot; 
## [133] &quot;minage_fem_pc_10&quot;  &quot;minage_fem_pc_11&quot;  &quot;minage_fem_pc_12&quot; 
## [136] &quot;legal_diff_pc_95&quot;  &quot;legal_diff_pc_96&quot;  &quot;legal_diff_pc_97&quot; 
## [139] &quot;legal_diff_pc_98&quot;  &quot;legal_diff_pc_99&quot;  &quot;legal_diff_pc_00&quot; 
## [142] &quot;legal_diff_pc_01&quot;  &quot;legal_diff_pc_02&quot;  &quot;legal_diff_pc_03&quot; 
## [145] &quot;legal_diff_pc_04&quot;  &quot;legal_diff_pc_05&quot;  &quot;legal_diff_pc_06&quot; 
## [148] &quot;legal_diff_pc_07&quot;  &quot;legal_diff_pc_08&quot;  &quot;legal_diff_pc_09&quot; 
## [151] &quot;legal_diff_pc_10&quot;  &quot;legal_diff_pc_11&quot;  &quot;legal_diff_pc_12&quot; 
## [154] &quot;minwage_ppp_2013&quot;  &quot;mw_overtime&quot;       &quot;oecd&quot;</code></pre>
</div>
<div id="select-variables" class="section level3 hasAnchor" number="5.1.3">
<h3><span class="header-section-number">5.1.3</span> Select variables<a href="使用基礎r套件.html#select-variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="使用基礎r套件.html#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select the 3rd and 6th to 24th columns</span></span>
<span id="cb248-2"><a href="使用基礎r套件.html#cb248-2" aria-hidden="true" tabindex="-1"></a>matleave <span class="ot">&lt;-</span> df[ , <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">6</span><span class="sc">:</span><span class="dv">24</span>)]</span>
<span id="cb248-3"><a href="使用基礎r套件.html#cb248-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-4"><a href="使用基礎r套件.html#cb248-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Use class(), dim(), and str() to inspect the data</span></span>
<span id="cb248-5"><a href="使用基礎r套件.html#cb248-5" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(matleave)</span></code></pre></div>
<pre class="output"><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="使用基礎r套件.html#cb250-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(matleave)</span></code></pre></div>
<pre class="output"><code>## [1] 197  20</code></pre>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="使用基礎r套件.html#cb252-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(matleave)</span></code></pre></div>
<pre class="output"><code>## tibble [197 × 20] (S3: tbl_df/tbl/data.frame)
##  $ iso3       : chr [1:197] &quot;AFG&quot; &quot;ALB&quot; &quot;DZA&quot; &quot;AND&quot; ...
##  $ matleave_95: num [1:197] 2 5 3 2 2 2 2 3 1 5 ...
##  $ matleave_96: num [1:197] 2 5 3 2 2 2 2 3 1 5 ...
##  $ matleave_97: num [1:197] 2 5 3 2 2 2 2 3 1 5 ...
##  $ matleave_98: num [1:197] 2 5 3 2 2 2 2 3 1 5 ...
##  $ matleave_99: num [1:197] 2 5 3 2 2 2 2 3 1 5 ...
##  $ matleave_00: num [1:197] 2 5 3 3 2 2 2 3 1 5 ...
##  $ matleave_01: num [1:197] 2 5 3 3 2 2 2 3 1 5 ...
##  $ matleave_02: num [1:197] 2 5 3 3 2 2 2 3 1 5 ...
##  $ matleave_03: num [1:197] 2 5 3 3 2 2 2 3 1 5 ...
##  $ matleave_04: num [1:197] 2 5 3 3 2 2 2 5 1 5 ...
##  $ matleave_05: num [1:197] 2 5 3 3 2 2 2 5 1 5 ...
##  $ matleave_06: num [1:197] 2 5 3 3 2 2 2 5 1 5 ...
##  $ matleave_07: num [1:197] 2 5 3 3 2 2 2 5 1 5 ...
##  $ matleave_08: num [1:197] 2 5 3 3 2 2 2 5 1 5 ...
##  $ matleave_09: num [1:197] 2 5 3 3 2 2 2 5 1 5 ...
##  $ matleave_10: num [1:197] 2 5 3 3 2 2 2 5 NA 5 ...
##  $ matleave_11: num [1:197] 2 5 3 3 2 2 2 5 3 5 ...
##  $ matleave_12: num [1:197] 2 5 3 3 2 2 2 5 3 5 ...
##  $ matleave_13: num [1:197] 2 5 3 3 2 2 2 5 3 5 ...</code></pre>
</div>
<div id="check-replace-nas" class="section level3 hasAnchor" number="5.1.4">
<h3><span class="header-section-number">5.1.4</span> Check &amp; Replace NAs<a href="使用基礎r套件.html#check-replace-nas" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><code>NA: Not Available</code></li>
<li><code>v[is.na(v)]</code> will select all NA cells</li>
<li>以0取代NA的資料格。避免繪圖產生錯誤</li>
<li><code>sum(is.na(matleave))</code>的目的是檢測還有沒有NA值。如果有的話<code>is.na()</code>就會是<code>TRUE</code>，那麼加總後，如果不是0，那就代表還有NA。</li>
</ul>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="使用基礎r套件.html#cb254-1" aria-hidden="true" tabindex="-1"></a><span class="co"># is.na() to indicate each element is NA or NOT(TRUE/FALSE)</span></span>
<span id="cb254-2"><a href="使用基礎r套件.html#cb254-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">is.na</span>(matleave), <span class="at">n=</span><span class="dv">20</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
iso3
</th>
<th style="text-align:left;">
matleave_95
</th>
<th style="text-align:left;">
matleave_96
</th>
<th style="text-align:left;">
matleave_97
</th>
<th style="text-align:left;">
matleave_98
</th>
<th style="text-align:left;">
matleave_99
</th>
<th style="text-align:left;">
matleave_00
</th>
<th style="text-align:left;">
matleave_01
</th>
<th style="text-align:left;">
matleave_02
</th>
<th style="text-align:left;">
matleave_03
</th>
<th style="text-align:left;">
matleave_04
</th>
<th style="text-align:left;">
matleave_05
</th>
<th style="text-align:left;">
matleave_06
</th>
<th style="text-align:left;">
matleave_07
</th>
<th style="text-align:left;">
matleave_08
</th>
<th style="text-align:left;">
matleave_09
</th>
<th style="text-align:left;">
matleave_10
</th>
<th style="text-align:left;">
matleave_11
</th>
<th style="text-align:left;">
matleave_12
</th>
<th style="text-align:left;">
matleave_13
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="使用基礎r套件.html#cb255-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign 0 to those NA data</span></span>
<span id="cb255-2"><a href="使用基礎r套件.html#cb255-2" aria-hidden="true" tabindex="-1"></a>matleave[<span class="fu">is.na</span>(matleave)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb255-3"><a href="使用基礎r套件.html#cb255-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb255-4"><a href="使用基礎r套件.html#cb255-4" aria-hidden="true" tabindex="-1"></a><span class="co"># anyNA() to check if there are still NA cells.</span></span>
<span id="cb255-5"><a href="使用基礎r套件.html#cb255-5" aria-hidden="true" tabindex="-1"></a><span class="fu">anyNA</span>(matleave)</span></code></pre></div>
<pre class="output"><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="使用基礎r套件.html#cb257-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sum(is.na()) to count the number of NA</span></span>
<span id="cb257-2"><a href="使用基礎r套件.html#cb257-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(matleave))</span></code></pre></div>
<pre class="output"><code>## [1] 0</code></pre>
</div>
<div id="filtering-data" class="section level3 hasAnchor" number="5.1.5">
<h3><span class="header-section-number">5.1.5</span> Filtering data<a href="使用基礎r套件.html#filtering-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="filtered-by-the-last-year-value" class="section level4 hasAnchor" number="5.1.5.1">
<h4><span class="header-section-number">5.1.5.1</span> Filtered by the last year value<a href="使用基礎r套件.html#filtered-by-the-last-year-value" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="使用基礎r套件.html#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use logical comparison to see if the last year equals to 5</span></span>
<span id="cb259-2"><a href="使用基礎r套件.html#cb259-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign matching data to var m5</span></span>
<span id="cb259-3"><a href="使用基礎r套件.html#cb259-3" aria-hidden="true" tabindex="-1"></a>m5 <span class="ot">&lt;-</span> matleave[matleave<span class="sc">$</span><span class="st">&#39;matleave_13&#39;</span><span class="sc">==</span><span class="dv">5</span>, ]</span>
<span id="cb259-4"><a href="使用基礎r套件.html#cb259-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-5"><a href="使用基礎r套件.html#cb259-5" aria-hidden="true" tabindex="-1"></a><span class="co"># nrow() to count matching data</span></span>
<span id="cb259-6"><a href="使用基礎r套件.html#cb259-6" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(m5)</span></code></pre></div>
<pre class="output"><code>## [1] 34</code></pre>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="使用基礎r套件.html#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Is it possible to use length() to check the data length?</span></span>
<span id="cb261-2"><a href="使用基礎r套件.html#cb261-2" aria-hidden="true" tabindex="-1"></a><span class="co"># matleave$&#39;matleave_13&#39;</span></span>
<span id="cb261-3"><a href="使用基礎r套件.html#cb261-3" aria-hidden="true" tabindex="-1"></a><span class="co"># matleave$&#39;matleave_13&#39;==5</span></span>
<span id="cb261-4"><a href="使用基礎r套件.html#cb261-4" aria-hidden="true" tabindex="-1"></a><span class="co"># length(matleave$&#39;matleave_13&#39;==5)</span></span></code></pre></div>
</div>
<div id="filtered-data-by-the-first-year-value" class="section level4 hasAnchor" number="5.1.5.2">
<h4><span class="header-section-number">5.1.5.2</span> Filtered data by the first year value<a href="使用基礎r套件.html#filtered-data-by-the-first-year-value" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="使用基礎r套件.html#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filter rows whose &#39;matleave_95&#39; is 5, and assign to var m55</span></span>
<span id="cb262-2"><a href="使用基礎r套件.html#cb262-2" aria-hidden="true" tabindex="-1"></a>m55<span class="ot">&lt;-</span> m5[m5<span class="sc">$</span><span class="st">&#39;matleave_95&#39;</span><span class="sc">==</span><span class="dv">5</span>,]</span>
<span id="cb262-3"><a href="使用基礎r套件.html#cb262-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-4"><a href="使用基礎r套件.html#cb262-4" aria-hidden="true" tabindex="-1"></a><span class="co"># filter rows whose &#39;matleave_95&#39; is not 5, and assign to var m05</span></span>
<span id="cb262-5"><a href="使用基礎r套件.html#cb262-5" aria-hidden="true" tabindex="-1"></a>m05<span class="ot">&lt;-</span> m5[m5<span class="sc">$</span><span class="st">&#39;matleave_95&#39;</span><span class="sc">!=</span><span class="dv">5</span>,]</span></code></pre></div>
</div>
</div>
<div id="plotting" class="section level3 hasAnchor" number="5.1.6">
<h3><span class="header-section-number">5.1.6</span> Plotting<a href="使用基礎r套件.html#plotting" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Plotting the second rows and all columns except 1st column</li>
<li><strong>Question</strong> 為何要<code>unlist()</code>？請試著執行<code>barplot(matleave[2, -1])</code>這個沒有<code>unlist()</code>的版本，看看會有什麼錯誤訊息。資料結構有何差異呢？</li>
<li>嘗試用<code>class()</code>或<code>str()</code>嘗試觀察沒有<code>unlist()</code>版本的資料，看看資料型態和有<code>unlist()</code>的會有何不同？</li>
</ul>
<div id="plotting-one-line" class="section level4 hasAnchor" number="5.1.6.1">
<h4><span class="header-section-number">5.1.6.1</span> Plotting one line<a href="使用基礎r套件.html#plotting-one-line" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="使用基礎r套件.html#cb263-1" aria-hidden="true" tabindex="-1"></a><span class="co"># barplot() the second row of m55</span></span>
<span id="cb263-2"><a href="使用基礎r套件.html#cb263-2" aria-hidden="true" tabindex="-1"></a><span class="co"># barplot(m55[2, ])       # raise error</span></span>
<span id="cb263-3"><a href="使用基礎r套件.html#cb263-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-4"><a href="使用基礎r套件.html#cb263-4" aria-hidden="true" tabindex="-1"></a><span class="co"># barplot() the second row when neglecting the first column</span></span>
<span id="cb263-5"><a href="使用基礎r套件.html#cb263-5" aria-hidden="true" tabindex="-1"></a><span class="co"># barplot(m55[2, -1])     # raise error</span></span>
<span id="cb263-6"><a href="使用基礎r套件.html#cb263-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-7"><a href="使用基礎r套件.html#cb263-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Take a look at the data type of matleave[2, ]</span></span>
<span id="cb263-8"><a href="使用基礎r套件.html#cb263-8" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(matleave[<span class="dv">2</span>, <span class="sc">-</span><span class="dv">1</span>])</span></code></pre></div>
<pre class="output"><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="使用基礎r套件.html#cb265-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">unlist</span>(matleave[<span class="dv">2</span>, <span class="sc">-</span><span class="dv">1</span>]))</span></code></pre></div>
<pre class="output"><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="使用基礎r套件.html#cb267-1" aria-hidden="true" tabindex="-1"></a><span class="co"># unlist() to convert a single row data.frame to a vector for barplot()</span></span>
<span id="cb267-2"><a href="使用基礎r套件.html#cb267-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">unlist</span>(m55[<span class="dv">2</span>, <span class="sc">-</span><span class="dv">1</span>]))</span></code></pre></div>
<p><img src="R-for-Data-Journalism_files/figure-html/unnamed-chunk-52-1.png" width="672" /></p>
<ul>
<li>Testing</li>
</ul>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="使用基礎r套件.html#cb268-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(matleave[1]) # select the 1st variable</span></span>
<span id="cb268-2"><a href="使用基礎r套件.html#cb268-2" aria-hidden="true" tabindex="-1"></a><span class="co"># View(matleave[ ,1]) # select the 1st column</span></span>
<span id="cb268-3"><a href="使用基礎r套件.html#cb268-3" aria-hidden="true" tabindex="-1"></a><span class="co"># View(matleave[1, ]) # select the 1st row</span></span>
<span id="cb268-4"><a href="使用基礎r套件.html#cb268-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-5"><a href="使用基礎r套件.html#cb268-5" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(m55[<span class="dv">1</span>])       <span class="co"># &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</span></span></code></pre></div>
<pre class="output"><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="使用基礎r套件.html#cb270-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(m55[ ,<span class="dv">1</span>]) <span class="co"># &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</span></span></code></pre></div>
<pre class="output"><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="使用基礎r套件.html#cb272-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(m55[<span class="dv">1</span>, ]) <span class="co"># &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</span></span></code></pre></div>
<pre class="output"><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="使用基礎r套件.html#cb274-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(m55<span class="sc">$</span>iso3) <span class="co"># character (vector)</span></span></code></pre></div>
<pre class="output"><code>## [1] &quot;character&quot;</code></pre>
</div>
<div id="more-arguments-args" class="section level4 hasAnchor" number="5.1.6.2">
<h4><span class="header-section-number">5.1.6.2</span> More arguments (args)<a href="使用基礎r套件.html#more-arguments-args" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="使用基礎r套件.html#cb276-1" aria-hidden="true" tabindex="-1"></a><span class="co"># barplot() the unlisted second row (neglecting the first col)</span></span>
<span id="cb276-2"><a href="使用基礎r套件.html#cb276-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">unlist</span>(m55[<span class="dv">2</span>, <span class="sc">-</span><span class="dv">1</span>]))</span></code></pre></div>
<p><img src="R-for-Data-Journalism_files/figure-html/unnamed-chunk-54-1.png" width="672" /></p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="使用基礎r套件.html#cb277-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use ?barplot to know more argument of the function.</span></span>
<span id="cb277-2"><a href="使用基礎r套件.html#cb277-2" aria-hidden="true" tabindex="-1"></a>?barplot</span></code></pre></div>
<div class="r-help-page">
<div class="container">
<table style="width: 100%;">
<tr>
<td>
barplot
</td>
<td style="text-align: right;">
R Documentation
</td>
</tr>
</table>
<h2>
Bar Plots
</h2>
<h3>
Description
</h3>
<p>
Creates a bar plot with vertical or horizontal bars.
</p>
<h3>
Usage
</h3>
<pre class="r"><code class='language-R'>barplot(height, ...)

## Default S3 method:
barplot(height, width = 1, space = NULL,
        names.arg = NULL, legend.text = NULL, beside = FALSE,
        horiz = FALSE, density = NULL, angle = 45,
        col = NULL, border = par("fg"),
        main = NULL, sub = NULL, xlab = NULL, ylab = NULL,
        xlim = NULL, ylim = NULL, xpd = TRUE, log = "",
        axes = TRUE, axisnames = TRUE,
        cex.axis = par("cex.axis"), cex.names = par("cex.axis"),
        inside = TRUE, plot = TRUE, axis.lty = 0, offset = 0,
        add = FALSE, ann = !add &amp;&amp; par("ann"), args.legend = NULL, ...)

## S3 method for class 'formula'
barplot(formula, data, subset, na.action,
        horiz = FALSE, xlab = NULL, ylab = NULL, ...)
</code></pre>
<h3>
Arguments
</h3>
<table>
<tr style="vertical-align: top;">
<td>
<code>height</code>
</td>
<td>
<p>
either a vector or matrix of values describing the
bars which make up the plot. If <code>height</code> is a vector, the
plot consists of a sequence of rectangular bars with heights
given by the values in the vector. If <code>height</code> is a matrix
and <code>beside</code> is <code>FALSE</code> then each bar of the plot
corresponds to a column of <code>height</code>, with the values in the
column giving the heights of stacked sub-bars making up the
bar. If <code>height</code> is a matrix and <code>beside</code> is
<code>TRUE</code>, then the values in each column are juxtaposed
rather than stacked.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>width</code>
</td>
<td>
<p>
optional vector of bar widths. Re-cycled to length the
number of bars drawn. Specifying a single value will have no
visible effect unless <code>xlim</code> is specified.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>space</code>
</td>
<td>
<p>
the amount of space (as a fraction of the average bar
width) left before each bar. May be given as a single number or
one number per bar. If <code>height</code> is a matrix and
<code>beside</code> is <code>TRUE</code>, <code>space</code> may be specified by
two numbers, where the first is the space between bars in the
same group, and the second the space between the groups. If not
given explicitly, it defaults to <code>c(0,1)</code> if <code>height</code>
is a matrix and <code>beside</code> is <code>TRUE</code>, and to 0.2
otherwise.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>names.arg</code>
</td>
<td>
<p>
a vector of names to be plotted below each bar or
group of bars. If this argument is omitted, then the names are
taken from the <code>names</code> attribute of <code>height</code> if this
is a vector, or the column names if it is a matrix.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>legend.text</code>
</td>
<td>
<p>
a vector of text used to construct a legend for
the plot, or a logical indicating whether a legend should be
included. This is only useful when <code>height</code> is a matrix.
In that case given legend labels should correspond to the rows of
<code>height</code>; if <code>legend.text</code> is true, the row names of
<code>height</code> will be used as labels if they are non-null.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>beside</code>
</td>
<td>
<p>
a logical value. If <code>FALSE</code>, the columns of
<code>height</code> are portrayed as stacked bars, and if <code>TRUE</code>
the columns are portrayed as juxtaposed bars.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>horiz</code>
</td>
<td>
<p>
a logical value. If <code>FALSE</code>, the bars are drawn
vertically with the first bar to the left. If <code>TRUE</code>, the
bars are drawn horizontally with the first at the bottom.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>density</code>
</td>
<td>
<p>
a vector giving the density of shading lines, in
lines per inch, for the bars or bar components.
The default value of <code>NULL</code> means that no shading lines
are drawn. Non-positive values of <code>density</code> also inhibit the
drawing of shading lines.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>angle</code>
</td>
<td>
<p>
the slope of shading lines, given as an angle in
degrees (counter-clockwise), for the bars or bar components.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>col</code>
</td>
<td>
<p>
a vector of colors for the bars or bar components.
By default, <code>“grey”</code> is used if <code>height</code> is a vector, and a
gamma-corrected grey palette if <code>height</code> is a matrix;
see <code>grey.colors</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>border</code>
</td>
<td>
<p>
the color to be used for the border of the bars.
Use <code>border = NA</code> to omit borders. If there are shading
lines, <code>border = TRUE</code> means use the same colour for
the border as for the shading lines.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>main,sub</code>
</td>
<td>
<p>
main title and subtitle for the plot.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>xlab</code>
</td>
<td>
<p>
a label for the x axis.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>ylab</code>
</td>
<td>
<p>
a label for the y axis.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>xlim</code>
</td>
<td>
<p>
limits for the x axis.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>ylim</code>
</td>
<td>
<p>
limits for the y axis.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>xpd</code>
</td>
<td>
<p>
logical. Should bars be allowed to go outside region?
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>log</code>
</td>
<td>
<p>
string specifying if axis scales should be logarithmic; see
<code>plot.default</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>axes</code>
</td>
<td>
<p>
logical. If <code>TRUE</code>, a vertical (or horizontal, if
<code>horiz</code> is true) axis is drawn.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>axisnames</code>
</td>
<td>
<p>
logical. If <code>TRUE</code>, and if there are
<code>names.arg</code> (see above), the
other axis is drawn (with <code>lty = 0</code>) and labeled.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>cex.axis</code>
</td>
<td>
<p>
expansion factor for numeric axis labels (see
<code>par(‘cex’)</code>).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>cex.names</code>
</td>
<td>
<p>
expansion factor for axis names (bar labels).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>inside</code>
</td>
<td>
<p>
logical. If <code>TRUE</code>, the lines which divide
adjacent (non-stacked!) bars will be drawn. Only applies when
<code>space = 0</code> (which it partly is when <code>beside = TRUE</code>).
</p>
</td>
</tr>
</table>
<table>
<tr style="vertical-align: top;">
<td>
<code>plot</code>
</td>
<td>
<p>
logical. If <code>FALSE</code>, nothing is plotted.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>axis.lty</code>
</td>
<td>
<p>
the graphics parameter <code>lty</code> (see
<code>par(‘lty’)</code>) applied to the axis
and tick marks of the categorical (default horizontal) axis. Note
that by default the axis is suppressed.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>offset</code>
</td>
<td>
<p>
a vector indicating how much the bars should be shifted
relative to the x axis.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>add</code>
</td>
<td>
<p>
logical specifying if bars should be added to an already
existing plot; defaults to <code>FALSE</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>ann</code>
</td>
<td>
<p>
logical specifying if the default annotation (<code>main</code>,
<code>sub</code>, <code>xlab</code>, <code>ylab</code>) should appear on the plot, see
<code>title</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>args.legend</code>
</td>
<td>
<p>
list of additional arguments to pass to
<code>legend()</code>; names of the list are used as argument
names. Only used if <code>legend.text</code> is supplied.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>formula</code>
</td>
<td>
<p>
a formula where the <code>y</code> variables are numeric data
to plot against the categorical <code>x</code> variables. The formula
can have one of three forms:
</p>
<pre class="r">
      y ~ x
      y ~ x1 + x2
      cbind(y1, y2) ~ x
    </pre>
<p>
(see the examples).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>data</code>
</td>
<td>
<p>
a data frame (or list) from which the variables in formula
should be taken.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>subset</code>
</td>
<td>
<p>
an optional vector specifying a subset of observations
to be used.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>na.action</code>
</td>
<td>
<p>
a function which indicates what should happen when
the data contain <code>NA</code> values. The default is to ignore missing
values in the given variables.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>…</code>
</td>
<td>
<p>
arguments to be passed to/from other methods. For the
default method these can include further arguments (such as
<code>axes</code>, <code>asp</code> and <code>main</code>) and
graphical parameters (see <code>par</code>) which are passed to
<code>plot.window()</code>, <code>title()</code> and
<code>axis</code>.
</p>
</td>
</tr>
</table>
<h3>
Value
</h3>
<p>
A numeric vector (or matrix, when <code>beside = TRUE</code>), say
<code>mp</code>, giving the coordinates of <em>all</em> the bar midpoints
drawn, useful for adding to the graph.
</p>
<p>
If <code>beside</code> is true, use <code>colMeans(mp)</code> for the
midpoints of each <em>group</em> of bars, see example.
</p>
<h3>
Author(s)
</h3>
<p>
R Core, with a contribution by Arni Magnusson.
</p>
<h3>
References
</h3>
<p>
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
<em>The New S Language</em>.
Wadsworth &amp; Brooks/Cole.
</p>
<p>
Murrell, P. (2005) <em>R Graphics</em>. Chapman &amp; Hall/CRC Press.
</p>
<h3>
See Also
</h3>
<p>
<code>plot(…, type = “h”)</code>, <code>dotchart</code>;
<code>hist</code> for bars of a <em>continuous</em> variable.
<code>mosaicplot()</code>, more sophisticated to visualize
<em>several</em> categorical variables.
</p>
<h3>
Examples
</h3>
<pre class="r"><code class='language-R'># Formula method
barplot(GNP ~ Year, data = longley)
barplot(cbind(Employed, Unemployed) ~ Year, data = longley)

## 3rd form of formula - 2 categories :
op &lt;- par(mfrow = 2:1, mgp = c(3,1,0)/2, mar = .1+c(3,3:1))
summary(d.Titanic &lt;- as.data.frame(Titanic))
barplot(Freq ~ Class + Survived, data = d.Titanic,
        subset = Age == "Adult" &amp; Sex == "Male",
        main = "barplot(Freq ~ Class + Survived, *)", ylab = "# {passengers}", legend.text = TRUE)
# Corresponding table :
(xt &lt;- xtabs(Freq ~ Survived + Class + Sex, d.Titanic, subset = Age=="Adult"))
# Alternatively, a mosaic plot :
mosaicplot(xt[,,"Male"], main = "mosaicplot(Freq ~ Class + Survived, *)", color=TRUE)
par(op)


# Default method
require(grDevices) # for colours
tN &lt;- table(Ni &lt;- stats::rpois(100, lambda = 5))
r &lt;- barplot(tN, col = rainbow(20))
#- type = "h" plotting *is* 'bar'plot
lines(r, tN, type = "h", col = "red", lwd = 2)

barplot(tN, space = 1.5, axisnames = FALSE,
        sub = "barplot(..., space= 1.5, axisnames = FALSE)")

barplot(VADeaths, plot = FALSE)
barplot(VADeaths, plot = FALSE, beside = TRUE)

mp &lt;- barplot(VADeaths) # default
tot &lt;- colMeans(VADeaths)
text(mp, tot + 3, format(tot), xpd = TRUE, col = "blue")
barplot(VADeaths, beside = TRUE,
        col = c("lightblue", "mistyrose", "lightcyan",
                "lavender", "cornsilk"),
        legend.text = rownames(VADeaths), ylim = c(0, 100))
title(main = "Death Rates in Virginia", font.main = 4)

hh &lt;- t(VADeaths)[, 5:1]
mybarcol &lt;- "gray20"
mp &lt;- barplot(hh, beside = TRUE,
        col = c("lightblue", "mistyrose",
                "lightcyan", "lavender"),
        legend.text = colnames(VADeaths), ylim = c(0,100),
        main = "Death Rates in Virginia", font.main = 4,
        sub = "Faked upper 2*sigma error bars", col.sub = mybarcol,
        cex.names = 1.5)
segments(mp, hh, mp, hh + 2*sqrt(1000*hh/100), col = mybarcol, lwd = 1.5)
stopifnot(dim(mp) == dim(hh))  # corresponding matrices
mtext(side = 1, at = colMeans(mp), line = -2,
      text = paste("Mean", formatC(colMeans(hh))), col = "red")

# Bar shading example
barplot(VADeaths, angle = 15+10*1:5, density = 20, col = "black",
        legend.text = rownames(VADeaths))
title(main = list("Death Rates in Virginia", font = 4))

# Border color
barplot(VADeaths, border = "dark blue") 


# Log scales (not much sense here)
barplot(tN, col = heat.colors(12), log = "y")
barplot(tN, col = gray.colors(20), log = "xy")

# Legend location
barplot(height = cbind(x = c(465, 91) / 465 * 100,
                       y = c(840, 200) / 840 * 100,
                       z = c(37, 17) / 37 * 100),
        beside = FALSE,
        width = c(465, 840, 37),
        col = c(1, 2),
        legend.text = c("A", "B"),
        args.legend = list(x = "topleft"))
</code></pre>
</div>
</div>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="使用基礎r套件.html#cb278-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add arguments ylim, space, border, and axat/yaxt one by one to barplot()</span></span>
<span id="cb278-2"><a href="使用基礎r套件.html#cb278-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">unlist</span>(m55[<span class="dv">2</span>, <span class="sc">-</span><span class="dv">1</span>]), <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>))</span></code></pre></div>
<p><img src="R-for-Data-Journalism_files/figure-html/unnamed-chunk-54-2.png" width="672" /></p>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="使用基礎r套件.html#cb279-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">unlist</span>(m55[<span class="dv">2</span>, <span class="sc">-</span><span class="dv">1</span>]), <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>), <span class="at">space=</span><span class="dv">0</span>)</span></code></pre></div>
<p><img src="R-for-Data-Journalism_files/figure-html/unnamed-chunk-54-3.png" width="672" /></p>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="使用基礎r套件.html#cb280-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">unlist</span>(m55[<span class="dv">2</span>, <span class="sc">-</span><span class="dv">1</span>]), <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>), <span class="at">space=</span><span class="dv">0</span>, <span class="at">border=</span><span class="cn">NA</span>)</span></code></pre></div>
<p><img src="R-for-Data-Journalism_files/figure-html/unnamed-chunk-54-4.png" width="672" /></p>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="使用基礎r套件.html#cb281-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">unlist</span>(m55[<span class="dv">2</span>, <span class="sc">-</span><span class="dv">1</span>]), <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>), <span class="at">space=</span><span class="dv">0</span>, <span class="at">border=</span><span class="cn">NA</span>, <span class="at">xaxt=</span><span class="st">&quot;n&quot;</span>, <span class="at">yaxt=</span><span class="st">&quot;n&quot;</span>)</span></code></pre></div>
<p><img src="R-for-Data-Journalism_files/figure-html/unnamed-chunk-54-5.png" width="672" /></p>
</div>
<div id="plotting-multiple-lines" class="section level4 hasAnchor" number="5.1.6.3">
<h4><span class="header-section-number">5.1.6.3</span> Plotting multiple lines<a href="使用基礎r套件.html#plotting-multiple-lines" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>底下可以看見每一行非常相似且一致的特徵，僅有<code>matleave</code>內的索引由1被列出至6。因此，最好的方法是用迴圈（for-loop）的方式將相同的程式碼，從1~6之間做六次。</li>
</ul>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="使用基礎r套件.html#cb282-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot the first row</span></span>
<span id="cb282-2"><a href="使用基礎r套件.html#cb282-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">unlist</span>(m55[<span class="dv">1</span>, <span class="sc">-</span><span class="dv">1</span>]), <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>), <span class="at">space=</span><span class="dv">0</span>, <span class="at">border=</span><span class="cn">NA</span>, <span class="at">xaxt=</span><span class="st">&quot;n&quot;</span>, <span class="at">yaxt=</span><span class="st">&quot;n&quot;</span>)</span>
<span id="cb282-3"><a href="使用基礎r套件.html#cb282-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb282-4"><a href="使用基礎r套件.html#cb282-4" aria-hidden="true" tabindex="-1"></a><span class="co"># plot the second to 6th rows</span></span>
<span id="cb282-5"><a href="使用基礎r套件.html#cb282-5" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">unlist</span>(m55[<span class="dv">2</span>, <span class="sc">-</span><span class="dv">1</span>]), <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>), <span class="at">space=</span><span class="dv">0</span>, <span class="at">border=</span><span class="cn">NA</span>, <span class="at">xaxt=</span><span class="st">&quot;n&quot;</span>, <span class="at">yaxt=</span><span class="st">&quot;n&quot;</span>)</span></code></pre></div>
<p><img src="R-for-Data-Journalism_files/figure-html/unnamed-chunk-55-1.png" width="672" /></p>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="使用基礎r套件.html#cb283-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">unlist</span>(m55[<span class="dv">3</span>, <span class="sc">-</span><span class="dv">1</span>]), <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>), <span class="at">space=</span><span class="dv">0</span>, <span class="at">border=</span><span class="cn">NA</span>, <span class="at">xaxt=</span><span class="st">&quot;n&quot;</span>, <span class="at">yaxt=</span><span class="st">&quot;n&quot;</span>)</span>
<span id="cb283-2"><a href="使用基礎r套件.html#cb283-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">unlist</span>(m55[<span class="dv">4</span>, <span class="sc">-</span><span class="dv">1</span>]), <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>), <span class="at">space=</span><span class="dv">0</span>, <span class="at">border=</span><span class="cn">NA</span>, <span class="at">xaxt=</span><span class="st">&quot;n&quot;</span>, <span class="at">yaxt=</span><span class="st">&quot;n&quot;</span>)</span>
<span id="cb283-3"><a href="使用基礎r套件.html#cb283-3" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">unlist</span>(m55[<span class="dv">5</span>, <span class="sc">-</span><span class="dv">1</span>]), <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>), <span class="at">space=</span><span class="dv">0</span>, <span class="at">border=</span><span class="cn">NA</span>, <span class="at">xaxt=</span><span class="st">&quot;n&quot;</span>, <span class="at">yaxt=</span><span class="st">&quot;n&quot;</span>)</span>
<span id="cb283-4"><a href="使用基礎r套件.html#cb283-4" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">unlist</span>(m55[<span class="dv">6</span>, <span class="sc">-</span><span class="dv">1</span>]), <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>), <span class="at">space=</span><span class="dv">0</span>, <span class="at">border=</span><span class="cn">NA</span>, <span class="at">xaxt=</span><span class="st">&quot;n&quot;</span>, <span class="at">yaxt=</span><span class="st">&quot;n&quot;</span>)</span></code></pre></div>
</div>
<div id="for-loop-to-plot-multiple-lines" class="section level4 hasAnchor" number="5.1.6.4">
<h4><span class="header-section-number">5.1.6.4</span> for-loop to plot multiple lines<a href="使用基礎r套件.html#for-loop-to-plot-multiple-lines" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="使用基礎r套件.html#cb284-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use for loop and use i as index to barplot multiple subgraphs</span></span>
<span id="cb284-2"><a href="使用基礎r套件.html#cb284-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>){</span>
<span id="cb284-3"><a href="使用基礎r套件.html#cb284-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">barplot</span>(<span class="fu">unlist</span>(m55[i, <span class="sc">-</span><span class="dv">1</span>]), <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>), <span class="at">space=</span><span class="dv">0</span>, <span class="at">border=</span><span class="cn">NA</span>, <span class="at">xaxt=</span><span class="st">&quot;n&quot;</span>, <span class="at">yaxt=</span><span class="st">&quot;n&quot;</span>)</span>
<span id="cb284-4"><a href="使用基礎r套件.html#cb284-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><img src="R-for-Data-Journalism_files/figure-html/unnamed-chunk-56-1.png" width="672" /><img src="R-for-Data-Journalism_files/figure-html/unnamed-chunk-56-2.png" width="672" /></p>
</div>
<div id="sub-plots" class="section level4 hasAnchor" number="5.1.6.5">
<h4><span class="header-section-number">5.1.6.5</span> Sub-plots<a href="使用基礎r套件.html#sub-plots" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>Check <code>?par</code> to get paremeters of plotting</p></li>
<li><p><code>**mai**</code>: A numerical vector of the form c(bottom, left, top, right) which gives the margin size specified in inches.</p></li>
<li><p><code>**mfcol, mfrow**</code>:A vector of the form c(nr, nc). Subsequent figures will be drawn in an nr-by-nc array on the device by columns (mfcol), or rows (mfrow), respectively.</p></li>
</ul>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="使用基礎r套件.html#cb285-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use ?par to get more plotting parameters</span></span>
<span id="cb285-2"><a href="使用基礎r套件.html#cb285-2" aria-hidden="true" tabindex="-1"></a>?par</span></code></pre></div>
<div class="r-help-page">
<div class="container">
<table style="width: 100%;">
<tr>
<td>
par
</td>
<td style="text-align: right;">
R Documentation
</td>
</tr>
</table>
<h2>
Set or Query Graphical Parameters
</h2>
<h3>
Description
</h3>
<p>
<code>par</code> can be used to set or query graphical parameters.
Parameters can be set by specifying them as arguments to <code>par</code> in
<code>tag = value</code> form, or by passing them as a list of tagged
values.
</p>
<h3>
Usage
</h3>
<pre class="r"><code class='language-R'>par(..., no.readonly = FALSE)

&lt;highlevel plot&gt; (...., &lt;tag&gt; = &lt;value&gt;)
</code></pre>
<h3>
Arguments
</h3>
<table>
<tr style="vertical-align: top;">
<td>
<code>…</code>
</td>
<td>
<p>
arguments in <code>tag = value</code> form, a single list of tagged
values, or character vectors of parameter names. Supported parameters are
described in the ‘Graphical Parameters’ section.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td>
<code>no.readonly</code>
</td>
<td>
<p>
logical; if <code>TRUE</code> and there are no other
arguments, only parameters are returned which can be set by a
subsequent <code>par()</code> call <em>on the same device</em>.
</p>
</td>
</tr>
</table>
<h3>
Details
</h3>
<p>
Each device has its own set of graphical parameters. If the current
device is the null device, <code>par</code> will open a new device before
querying/setting parameters. (What device is controlled by
<code>options(“device”)</code>.)
</p>
<p>
Parameters are queried by giving one or more character vectors of
parameter names to <code>par</code>.
</p>
<p>
<code>par()</code> (no arguments) or <code>par(no.readonly = TRUE)</code> is used to
get <em>all</em> the graphical parameters (as a named list). Their
names are currently taken from the unexported variable
<code>graphics:::.Pars</code>.
</p>
<p>
<em><b>R.O.</b></em> indicates <em><b>read-only arguments</b></em>: These
may only be used in queries and cannot be set. (<code>“cin”</code>,
<code>“cra”</code>, <code>“csi”</code>, <code>“cxy”</code>, <code>“din”</code> and
<code>“page”</code> are always read-only.)
</p>
<p>
Several parameters can only be set by a call to <code>par()</code>:
</p>
<ul>
<li>
<p>
<code>“ask”</code>,
</p>
</li>
<li>
<p>
<code>“fig”</code>, <code>“fin”</code>,
</p>
</li>
<li>
<p>
<code>“lheight”</code>,
</p>
</li>
<li>
<p>
<code>“mai”</code>, <code>“mar”</code>, <code>“mex”</code>,
<code>“mfcol”</code>, <code>“mfrow”</code>, <code>“mfg”</code>,
</p>
</li>
<li>
<p>
<code>“new”</code>,
</p>
</li>
<li>
<p>
<code>“oma”</code>, <code>“omd”</code>, <code>“omi”</code>,
</p>
</li>
<li>
<p>
<code>“pin”</code>, <code>“plt”</code>, <code>“ps”</code>, <code>“pty”</code>,
</p>
</li>
<li>
<p>
<code>“usr”</code>,
</p>
</li>
<li>
<p>
<code>“xlog”</code>, <code>“ylog”</code>,
</p>
</li>
<li>
<p>
<code>“ylbias”</code>
</p>
</li>
</ul>
<p>
The remaining parameters can also be set as arguments (often via
<code>…</code>) to high-level plot functions such as
<code>plot.default</code>, <code>plot.window</code>,
<code>points</code>, <code>lines</code>, <code>abline</code>,
<code>axis</code>, <code>title</code>, <code>text</code>,
<code>mtext</code>, <code>segments</code>, <code>symbols</code>,
<code>arrows</code>, <code>polygon</code>, <code>rect</code>,
<code>box</code>, <code>contour</code>, <code>filled.contour</code>
and <code>image</code>. Such settings will be active during the
execution of the function, only. However, see the comments on
<code>bg</code>, <code>cex</code>, <code>col</code>, <code>lty</code>, <code>lwd</code> and
<code>pch</code> which may be taken as <em>arguments</em> to certain plot
functions rather than as graphical parameters.
</p>
<p>
The meaning of ‘character size’ is not well-defined: this is
set up for the device taking <code>pointsize</code> into account but often
not the actual font family in use. Internally the corresponding pars
(<code>cra</code>, <code>cin</code>, <code>cxy</code> and <code>csi</code>) are used only to
set the inter-line spacing used to convert <code>mar</code> and <code>oma</code>
to physical margins. (The same inter-line spacing multiplied by
<code>lheight</code> is used for multi-line strings in <code>text</code> and
<code>strheight</code>.)
</p>
<p>
Note that graphical parameters are suggestions: plotting functions and
devices need not make use of them (and this is particularly true of
non-default methods for e.g. <code>plot</code>).
</p>
<h3>
Value
</h3>
<p>
When parameters are set, their previous values are returned in an
invisible named list. Such a list can be passed as an argument to
<code>par</code> to restore the parameter values. Use <code>par(no.readonly
= TRUE)</code> for the full list of parameters that can be restored.
However, restoring all of these is not wise: see the ‘Note’
section.
</p>
<p>
When just one parameter is queried, the value of that parameter
is returned as (atomic) vector. When two or more parameters are
queried, their values are returned in a list, with the list names
giving the parameters.
</p>
<p>
Note the inconsistency: setting one parameter returns a list, but
querying one parameter returns a vector.
</p>
<h3>
Graphical Parameters
</h3>
<dl>
<dt>
<code>adj</code>
</dt>
<dd>
<p>
The value of <code>adj</code> determines the way in
which text strings are justified in <code>text</code>,
<code>mtext</code> and <code>title</code>. A value of <code>0</code> produces
left-justified text, <code>0.5</code> (the default) centered text and <code>1</code>
right-justified text. (Any value in <code class="reqn">[0, 1]</code> is allowed, and
on most devices values outside that interval will also work.)
</p>
<p>
Note that the <code>adj</code> <em>argument</em> of <code>text</code> also
allows <code>adj = c(x, y)</code> for different adjustment in x- and y-
directions. Note that whereas for <code>text</code> it refers to
positioning of text about a point, for <code>mtext</code> and
<code>title</code> it controls placement within the plot or device region.
</p>
</dd>
<dt>
<code>ann</code>
</dt>
<dd>
<p>
If set to <code>FALSE</code>, high-level plotting
functions calling <code>plot.default</code> do not annotate the
plots they produce with axis titles and overall titles. The
default is to do annotation.
</p>
</dd>
<dt>
<code>ask</code>
</dt>
<dd>
<p>
logical. If <code>TRUE</code> (and the <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> session is
interactive) the user is asked for input, before a new figure is
drawn. As this applies to the device, it also affects output by
packages <span class="pkg">grid</span> and <a href="https://CRAN.R-project.org/package=lattice"><span class="pkg">lattice</span></a>. It can be set even on
non-screen devices but may have no effect there.
</p>
<p>
This not really a graphics parameter, and its use is deprecated in
favour of <code>devAskNewPage</code>.
</p>
</dd>
<dt>
<code>bg</code>
</dt>
<dd>
<p>
The color to be used for the background of the
device region. When called from <code>par()</code> it also sets
<code>new = FALSE</code>. See section ‘Color Specification’ for
suitable values. For many devices the initial value is set from
the <code>bg</code> argument of the device, and for the rest it is
normally <code>“white”</code>.
</p>
<p>
Note that some graphics functions such as
<code>plot.default</code> and <code>points</code> have an
<em>argument</em> of this name with a different meaning.
</p>
</dd>
<dt>
<code>bty</code>
</dt>
<dd>
<p>
A character string which determined the type of
<code>box</code> which is drawn about plots. If <code>bty</code> is
one of <code>“o”</code> (the default), <code>“l”</code>, <code>“7”</code>,
<code>“c”</code>, <code>“u”</code>, or <code>“]”</code> the resulting box resembles
the corresponding upper case letter. A value of <code>“n”</code>
suppresses the box.
</p>
</dd>
<dt>
<code>cex</code>
</dt>
<dd>
<p>
A numerical value giving the amount by which
plotting text and symbols should be magnified relative to the
default. This starts as <code>1</code> when a device is opened, and is
reset when the layout is changed, e.g. by setting <code>mfrow</code>.
</p>
<p>
Note that some graphics functions such as
<code>plot.default</code> have an <em>argument</em> of this name
which <em>multiplies</em> this graphical parameter, and some
functions such as <code>points</code> and <code>text</code>
accept a vector of values which are recycled.
</p>
</dd>
<dt>
<code>cex.axis</code>
</dt>
<dd>
<p>
The magnification to be used for axis
annotation relative to the current setting of <code>cex</code>.
</p>
</dd>
<dt>
<code>cex.lab</code>
</dt>
<dd>
<p>
The magnification to be used for x and y
labels relative to the current setting of <code>cex</code>.
</p>
</dd>
<dt>
<code>cex.main</code>
</dt>
<dd>
<p>
The magnification to be used for main titles
relative to the current setting of <code>cex</code>.
</p>
</dd>
<dt>
<code>cex.sub</code>
</dt>
<dd>
<p>
The magnification to be used for sub-titles
relative to the current setting of <code>cex</code>.
</p>
</dd>
<dt>
<code>cin</code>
</dt>
<dd>
<p>
<em><b>R.O.</b></em>; character size
<code>(width, height)</code> in inches. These are the same measurements
as <code>cra</code>, expressed in different units.
</p>
</dd>
<dt>
<code>col</code>
</dt>
<dd>
<p>
A specification for the default plotting color. See
section ‘Color Specification’.
</p>
<p>
Some functions such as <code>lines</code> and <code>text</code>
accept a vector of values which are recycled and may be
interpreted slightly differently.
</p>
</dd>
<dt>
<code>col.axis</code>
</dt>
<dd>
<p>
The color to be used for axis
annotation. Defaults to <code>“black”</code>.
</p>
</dd>
<dt>
<code>col.lab</code>
</dt>
<dd>
<p>
The color to be used for x and y labels.
Defaults to <code>“black”</code>.
</p>
</dd>
<dt>
<code>col.main</code>
</dt>
<dd>
<p>
The color to be used for plot main titles.
Defaults to <code>“black”</code>.
</p>
</dd>
<dt>
<code>col.sub</code>
</dt>
<dd>
<p>
The color to be used for plot sub-titles.
Defaults to <code>“black”</code>.
</p>
</dd>
<dt>
<code>cra</code>
</dt>
<dd>
<p>
<em><b>R.O.</b></em>; size of default character
<code>(width, height)</code> in ‘rasters’ (pixels). Some devices
have no concept of pixels and so assume an arbitrary pixel size,
usually 1/72 inch. These are the same measurements
as <code>cin</code>, expressed in different units.
</p>
</dd>
<dt>
<code>crt</code>
</dt>
<dd>
<p>
A numerical value specifying (in degrees) how
single characters should be rotated. It is unwise to expect
values other than multiples of 90 to work. Compare with
<code>srt</code> which does string rotation.
</p>
</dd>
<dt>
<code>csi</code>
</dt>
<dd>
<p>
<em><b>R.O.</b></em>; height of (default-sized)
characters in inches. The same as <code>par(“cin”)[2]</code>.
</p>
</dd>
<dt>
<code>cxy</code>
</dt>
<dd>
<p>
<em><b>R.O.</b></em>; size of default character
<code>(width, height)</code> in user coordinate units.
<code>par(“cxy”)</code> is <code>par(“cin”)/par(“pin”)</code> scaled to user
coordinates.
Note that <code>c(strwidth(ch), strheight(ch))</code> for
a given string <code>ch</code> is usually much more precise.
</p>
</dd>
<dt>
<code>din</code>
</dt>
<dd>
<p>
<em><b>R.O.</b></em>; the device dimensions,
<code>(width, height)</code>, in inches. See also
<code>dev.size</code>, which is updated immediately when an
on-screen device windows is re-sized.
</p>
</dd>
<dt>
<code>err</code>
</dt>
<dd>
<p>
(<em>Unimplemented</em>; <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> is silent when points
outside the plot region are <em>not</em> plotted.)
The degree of error reporting desired.
</p>
</dd>
<dt>
<code>family</code>
</dt>
<dd>
<p>
The name of a font family for drawing text.
The maximum allowed length is 200 bytes.
This name gets mapped by each graphics device to a device-specific
font description. The default value is <code>““</code> which means that
the default device fonts will be used (and what those are should
be listed on the help page for the device). Standard values are
<code>”serif”</code>, <code>“sans”</code> and <code>“mono”</code>, and the
Hershey font families are also available. (Devices may
define others, and some devices will ignore this setting
completely. Names starting with <code>“Hershey”</code> are treated
specially and should only be used for the built-in Hershey font
families.) This can be specified inline for <code>text</code>.
</p>
</dd>
<dt>
<code>fg</code>
</dt>
<dd>
<p>
The color to be used for the foreground of plots.
This is the default color used for things like axes and boxes
around plots. When called from <code>par()</code> this also sets
parameter <code>col</code> to the same value. See section ‘Color
Specification’. A few devices have an argument to set the
initial value, which is otherwise <code>“black”</code>.
</p>
</dd>
<dt>
<code>fig</code>
</dt>
<dd>
<p>
A numerical vector of the form <code>c(x1, x2, y1,
y2)</code> which gives the (NDC) coordinates of the figure region in
the display region of the device. If you set this, unlike S, you
start a new plot, so to add to an existing plot use
<code>new = TRUE</code> as well.
</p>
</dd>
<dt>
<code>fin</code>
</dt>
<dd>
<p>
The figure region dimensions,
<code>(width, height)</code>, in inches. If you set this, unlike S, you
start a new plot.
</p>
</dd>
<dt>
<code>font</code>
</dt>
<dd>
<p>
An integer which specifies which font to use for
text. If possible, device drivers arrange so that 1 corresponds
to plain text (the default), 2 to bold face, 3 to italic and 4 to
bold italic. Also, font 5 is expected to be the symbol font, in
Adobe symbol encoding. On some devices font families can be
selected by <code>family</code> to choose different sets of 5 fonts.
</p>
</dd>
<dt>
<code>font.axis</code>
</dt>
<dd>
<p>
The font to be used for axis annotation.
</p>
</dd>
<dt>
<code>font.lab</code>
</dt>
<dd>
<p>
The font to be used for x and y labels.
</p>
</dd>
<dt>
<code>font.main</code>
</dt>
<dd>
<p>
The font to be used for plot main titles.
</p>
</dd>
<dt>
<code>font.sub</code>
</dt>
<dd>
<p>
The font to be used for plot sub-titles.
</p>
</dd>
<dt>
<code>lab</code>
</dt>
<dd>
<p>
A numerical vector of the form <code>c(x, y, len)</code>
which modifies the default way that axes are annotated. The values of
<code>x</code> and <code>y</code> give the (approximate) number of tickmarks
on the x and y axes and <code>len</code> specifies the label length. The
default is <code>c(5, 5, 7)</code>.
<code>len</code> <em>is unimplemented</em> in <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>.
</p>
</dd>
<dt>
<code>las</code>
</dt>
<dd>
<p>
numeric in {0,1,2,3}; the style of axis labels.
</p>
<dl>
<dt>
0:
</dt>
<dd>
<p>
always parallel to the axis [<em>default</em>],
</p>
</dd>
<dt>
1:
</dt>
<dd>
<p>
always horizontal,
</p>
</dd>
<dt>
2:
</dt>
<dd>
<p>
always perpendicular to the axis,
</p>
</dd>
<dt>
3:
</dt>
<dd>
<p>
always vertical.
</p>
</dd>
</dl>
<p>
Also supported by <code>mtext</code>. Note that
string/character rotation <em>via</em> argument <code>srt</code> to <code>par</code>
does <em>not</em> affect the axis labels.
</p>
</dd>
<dt>
<code>lend</code>
</dt>
<dd>
<p>
The line end style. This can be specified as an
integer or string:
</p>
<dl>
<dt>
<code>0</code>
</dt>
<dd>
<p>
and <code>“round”</code> mean rounded line caps
[<em>default</em>];
</p>
</dd>
<dt>
<code>1</code>
</dt>
<dd>
<p>
and <code>“butt”</code> mean butt line caps;
</p>
</dd>
<dt>
<code>2</code>
</dt>
<dd>
<p>
and <code>“square”</code> mean square line caps.
</p>
</dd>
</dl>
</dd>
<dt>
<code>lheight</code>
</dt>
<dd>
<p>
The line height multiplier.
The height of a line of text (used to vertically space
multi-line text) is found by multiplying the character height
both by the current character expansion and by the
line height multiplier. Default value is 1. Used in
<code>text</code> and <code>strheight</code>.
</p>
</dd>
<dt>
<code>ljoin</code>
</dt>
<dd>
<p>
The line join style.
This can be specified as an integer or string:
</p>
<dl>
<dt>
<code>0</code>
</dt>
<dd>
<p>
and <code>“round”</code> mean rounded line joins
[<em>default</em>];
</p>
</dd>
<dt>
<code>1</code>
</dt>
<dd>
<p>
and <code>“mitre”</code> mean mitred line joins;
</p>
</dd>
<dt>
<code>2</code>
</dt>
<dd>
<p>
and <code>“bevel”</code> mean bevelled line joins.
</p>
</dd>
</dl>
</dd>
<dt>
<code>lmitre</code>
</dt>
<dd>
<p>
The line mitre limit. This controls when
mitred line joins are automatically converted into bevelled line
joins. The value must be larger than 1 and the default is 10.
Not all devices will honour this setting.
</p>
</dd>
<dt>
<code>lty</code>
</dt>
<dd>
<p>
The line type.
Line types can either be specified as an integer (0=blank, 1=solid
(default), 2=dashed, 3=dotted, 4=dotdash, 5=longdash, 6=twodash)
or as one of the character strings <code>“blank”</code>, <code>“solid”</code>,
<code>“dashed”</code>, <code>“dotted”</code>, <code>“dotdash”</code>,
<code>“longdash”</code>, or <code>“twodash”</code>, where <code>“blank”</code> uses
‘invisible lines’ (i.e., does not draw them).
</p>
<p>
Alternatively, a string of up to 8 characters (from <code>c(1:9,
“A”:“F”)</code>) may be given, giving the length of line segments
which are alternatively drawn and skipped. See section
‘Line Type Specification’.
</p>
<p>
Functions such as <code>lines</code> and <code>segments</code>
accept a vector of values which are recycled.
</p>
</dd>
<dt>
<code>lwd</code>
</dt>
<dd>
<p>
The line width, a <em>positive</em> number,
defaulting to <code>1</code>. The interpretation is device-specific,
and some devices do not implement line widths less than one.
(See the help on the device for details of the interpretation.)
</p>
<p>
Functions such as <code>lines</code> and <code>segments</code>
accept a vector of values which are recycled: in such uses lines
corresponding to values <code>NA</code> or <code>NaN</code> are omitted. The
interpretation of <code>0</code> is device-specific.
</p>
</dd>
<dt>
<code>mai</code>
</dt>
<dd>
<p>
<p>A numerical vector of the form <code>c(bottom,
left, top, right)</code> which gives the margin size specified in
inches.<br />
<img src="../help/figures/mai.png" width="35%" alt="Figure: mai.png" /></p>
</p>
</dd>
<dt>
<code>mar</code>
</dt>
<dd>
<p>
A numerical vector of the form <code>c(bottom,
left, top, right)</code> which gives the number of lines of margin to be
specified on the four sides of the plot.
The default is <code>c(5, 4, 4, 2) + 0.1</code>.
</p>
</dd>
<dt>
<code>mex</code>
</dt>
<dd>
<p>
<code>mex</code> is a character size expansion factor which is used to
describe coordinates in the margins of plots. Note that this does
not change the font size, rather specifies the size of font (as a
multiple of <code>csi</code>) used to convert between <code>mar</code> and
<code>mai</code>, and between <code>oma</code> and <code>omi</code>.
</p>
<p>
This starts as <code>1</code> when the device is opened, and is reset
when the layout is changed (alongside resetting <code>cex</code>).
</p>
</dd>
<dt>
<code>mfcol, mfrow</code>
</dt>
<dd>
<p>
A vector of the form <code>c(nr, nc)</code>.
Subsequent figures will be drawn in an <code>nr</code>-by-<code>nc</code>
array on the device by <em>columns</em> (<code>mfcol</code>), or
<em>rows</em> (<code>mfrow</code>), respectively.
</p>
<p>
In a layout with exactly two rows and columns the base value of
<code>“cex”</code> is reduced by a factor of 0.83: if there are three or
more of either rows or columns, the reduction factor is 0.66.
</p>
<p>
Setting a layout resets the base value of <code>cex</code> and that of
<code>mex</code> to <code>1</code>.
</p>
<p>
If either of these is queried it will give the current layout, so
querying cannot tell you the order in which the array will be filled.
</p>
<p>
Consider the alternatives, <code>layout</code> and
<code>split.screen</code>.
</p>
</dd>
<dt>
<code>mfg</code>
</dt>
<dd>
<p>
A numerical vector of the form <code>c(i, j)</code>
where <code>i</code> and <code>j</code> indicate which figure in an array of
figures is to be drawn next (if setting) or is being drawn (if
enquiring). The array must already have been set by <code>mfcol</code>
or <code>mfrow</code>.
</p>
<p>
For compatibility with S, the form <code>c(i, j, nr, nc)</code> is also
accepted, when <code>nr</code> and <code>nc</code> should be the current
number of rows and number of columns. Mismatches will be ignored,
with a warning.
</p>
</dd>
<dt>
<code>mgp</code>
</dt>
<dd>
<p>
The margin line (in <code>mex</code> units) for the axis
title, axis labels and axis line. Note that <code>mgp[1]</code> affects
<code>title</code> whereas <code>mgp[2:3]</code> affect <code>axis</code>.
The default is <code>c(3, 1, 0)</code>.
</p>
</dd>
<dt>
<code>mkh</code>
</dt>
<dd>
<p>
The height in inches of symbols to be drawn when
the value of <code>pch</code> is an integer. <em>Completely ignored in <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span></em>.
</p>
</dd>
<dt>
<code>new</code>
</dt>
<dd>
<p>
logical, defaulting to <code>FALSE</code>. If set to
<code>TRUE</code>, the next high-level plotting command (actually
<code>plot.new</code>) should <em>not clean</em> the frame before
drawing <em>as if it were on a <b><em>new</em></b> device</em>. It is
an error (ignored with a warning) to try to use <code>new = TRUE</code>
on a device that does not currently contain a high-level plot.
</p>
</dd>
<dt>
<code>oma</code>
</dt>
<dd>
<p>
<p>A vector of the form <code>c(bottom, left, top,
right)</code> giving the size of the outer margins in lines of text.<br />
<img src="../help/figures/oma.png" width="25%" alt="Figure: oma.png" /></p>
</p>
</dd>
<dt>
<code>omd</code>
</dt>
<dd>
<p>
A vector of the form <code>c(x1, x2, y1, y2)</code>
giving the region <em>inside</em> outer margins in NDC (=
normalized device coordinates), i.e., as a fraction (in <code class="reqn">[0, 1]</code>)
of the device region.
</p>
</dd>
<dt>
<code>omi</code>
</dt>
<dd>
<p>
A vector of the form <code>c(bottom, left, top,
right)</code> giving the size of the outer margins in inches.
</p>
</dd>
<dt>
<code>page</code>
</dt>
<dd>
<p>
<em><b>R.O.</b></em>; A boolean value indicating
whether the next call to <code>plot.new</code> is going
to start a new page. This value may be <code>FALSE</code> if there
are multiple figures on the page.
</p>
</dd>
<dt>
<code>pch</code>
</dt>
<dd>
<p>
Either an integer specifying a symbol or a single
character to be used as the default in plotting points. See
<code>points</code> for possible values and their interpretation.
Note that only integers and single-character strings can
be set as a graphics parameter (and not <code>NA</code> nor <code>NULL</code>).
</p>
<p>
Some functions such as <code>points</code> accept a vector of values
which are recycled.
</p>
</dd>
<dt>
<code>pin</code>
</dt>
<dd>
<p>
The current plot dimensions, <code>(width, height)</code>,
in inches.
</p>
</dd>
<dt>
<code>plt</code>
</dt>
<dd>
<p>
A vector of the form <code>c(x1, x2, y1, y2)</code>
giving the coordinates of the plot region as fractions of the
current figure region.
</p>
</dd>
<dt>
<code>ps</code>
</dt>
<dd>
<p>
integer; the point size of text (but not symbols). Unlike
the <code>pointsize</code> argument of most devices, this does not change
the relationship between <code>mar</code> and <code>mai</code> (nor <code>oma</code>
and <code>omi</code>).
</p>
<p>
What is meant by ‘point size’ is device-specific, but most
devices mean a multiple of 1bp, that is 1/72 of an inch.
</p>
</dd>
<dt>
<code>pty</code>
</dt>
<dd>
<p>
A character specifying the type of plot region to
be used; <code>“s”</code> generates a square plotting region and
<code>“m”</code> generates the maximal plotting region.
</p>
</dd>
<dt>
<code>smo</code>
</dt>
<dd>
<p>
(<em>Unimplemented</em>) a value which indicates how
smooth circles and circular arcs should be.
</p>
</dd>
<dt>
<code>srt</code>
</dt>
<dd>
<p>
<p>The string rotation in degrees. See the comment
about <code>crt</code>. Only supported by <code>text</code>.</p>
</p>
</dd>
<dt>
<code>tck</code>
</dt>
<dd>
<p>
The length of tick marks as a fraction of the
smaller of the width or height of the plotting region.
If <code>tck &gt;= 0.5</code> it is interpreted as a fraction of the
relevant side, so if <code>tck = 1</code> grid lines are drawn. The
default setting (<code>tck = NA</code>) is to use <code>tcl = -0.5</code>.
</p>
</dd>
<dt>
<code>tcl</code>
</dt>
<dd>
<p>
The length of tick marks as a fraction of the
height of a line of text. The default value is <code>-0.5</code>;
setting <code>tcl = NA</code> sets <code>tck = -0.01</code> which is S’ default.
</p>
</dd>
<dt>
<code>usr</code>
</dt>
<dd>
<p>
A vector of the form <code>c(x1, x2, y1, y2)</code>
giving the extremes of the user coordinates of the plotting
region. When a logarithmic scale is in use (i.e.,
<code>par(“xlog”)</code> is true, see below), then the x-limits will be
<code>10 ^ par(“usr”)[1:2]</code>. Similarly for the y-axis.
</p>
</dd>
<dt>
<code>xaxp</code>
</dt>
<dd>
<p>
A vector of the form <code>c(x1, x2, n)</code> giving
the coordinates of the extreme tick marks and the number of
intervals between tick-marks when <code>par(“xlog”)</code> is false.
Otherwise, when <em>log</em> coordinates are active, the three
values have a different meaning: For a small range, <code>n</code> is
<em>negative</em>, and the ticks are as in the linear case,
otherwise, <code>n</code> is in <code>1:3</code>, specifying a case number,
and <code>x1</code> and <code>x2</code> are the lowest and highest power of 10
inside the user coordinates, <code>10 ^ par(“usr”)[1:2]</code>. (The
<code>“usr”</code> coordinates are log10-transformed here!)
</p>
<dl>
<dt>
n = 1
</dt>
<dd>
<p>
will produce tick marks at <code class="reqn">10^j</code> for integer <code class="reqn">j</code>,
</p>
</dd>
<dt>
n = 2
</dt>
<dd>
<p>
gives marks <code class="reqn">k 10^j</code> with
<code class="reqn">k {1, 5}</code>,
</p>
</dd>
<dt>
n = 3
</dt>
<dd>
<p>
gives marks <code class="reqn">k 10^j</code> with
<code class="reqn">k {1, 2, 5}</code>.
</p>
</dd>
</dl>
<p>
See <code>axTicks()</code> for a pure <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> implementation of this.
</p>
<p>
This parameter is reset when a user coordinate system is set up,
for example by starting a new page or by calling
<code>plot.window</code> or setting <code>par(“usr”)</code>: <code>n</code>
is taken from <code>par(“lab”)</code>. It affects the default behaviour
of subsequent calls to <code>axis</code> for sides 1 or 3.
</p>
<p>
It is only relevant to default numeric axis systems, and not for
example to dates.
</p>
</dd>
<dt>
<code>xaxs</code>
</dt>
<dd>
<p>
The style of axis interval calculation to be used
for the x-axis. Possible values are <code>“r”</code>, <code>“i”</code>,
<code>“e”</code>, <code>“s”</code>, <code>“d”</code>. The styles are generally
controlled by the range of data or <code>xlim</code>, if given.<br />
Style <code>“r”</code> (regular) first extends the data range by 4
percent at each end and then finds an axis with pretty labels
that fits within the extended range.<br />
Style <code>“i”</code> (internal) just finds an axis with pretty labels
that fits within the original data range.<br />
Style <code>“s”</code> (standard) finds an axis with pretty labels
within which the original data range fits.<br />
Style <code>“e”</code> (extended) is like style <code>“s”</code>, except that
it is also ensures that there is room for plotting symbols within
the bounding box.<br />
Style <code>“d”</code> (direct) specifies that the current axis should
be used on subsequent plots.<br />
(<em>Only <code>“r”</code> and <code>“i”</code> styles have been
implemented in <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>.</em>)
</p>
</dd>
<dt>
<code>xaxt</code>
</dt>
<dd>
<p>
A character which specifies the x axis type.
Specifying <code>“n”</code> suppresses plotting of the axis. The
standard value is <code>“s”</code>: for compatibility with S values
<code>“l”</code> and <code>“t”</code> are accepted but are equivalent to
<code>“s”</code>: any value other than <code>“n”</code> implies plotting.
</p>
</dd>
<dt>
<code>xlog</code>
</dt>
<dd>
<p>
A logical value (see <code>log</code> in
<code>plot.default</code>). If <code>TRUE</code>, a logarithmic scale
is in use (e.g., after <code>plot(*, log = “x”)</code>).
For a new device, it defaults to <code>FALSE</code>, i.e., linear scale.
</p>
</dd>
<dt>
<code>xpd</code>
</dt>
<dd>
<p>
A logical value or <code>NA</code>.
If <code>FALSE</code>, all plotting is clipped to the plot region, if
<code>TRUE</code>, all plotting is clipped to the figure region, and if
<code>NA</code>, all plotting is clipped to the device region. See also
<code>clip</code>.
</p>
</dd>
<dt>
<code>yaxp</code>
</dt>
<dd>
<p>
A vector of the form <code>c(y1, y2, n)</code> giving
the coordinates of the extreme tick marks and the number of
intervals between tick-marks unless for log coordinates, see
<code>xaxp</code> above.
</p>
</dd>
<dt>
<code>yaxs</code>
</dt>
<dd>
<p>
The style of axis interval calculation to be used
for the y-axis. See <code>xaxs</code> above.
</p>
</dd>
<dt>
<code>yaxt</code>
</dt>
<dd>
<p>
A character which specifies the y axis type.
Specifying <code>“n”</code> suppresses plotting.
</p>
</dd>
<dt>
<code>ylbias</code>
</dt>
<dd>
<p>
A positive real value used in the positioning
of text in the margins by <code>axis</code> and
<code>mtext</code>. The default is in principle device-specific,
but currently <code>0.2</code> for all of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>’s own devices. Set this to
<code>0.2</code> for compatibility with <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> &lt; 2.14.0 on <code>x11</code> and
<code>windows()</code> devices.
</p>
</dd>
<dt>
<code>ylog</code>
</dt>
<dd>
<p>
A logical value; see <code>xlog</code> above.
</p>
</dd>
</dl>
<h3>
Color Specification
</h3>
<p>
Colors can be specified in several different ways. The simplest way is
with a character string giving the color name (e.g., <code>“red”</code>). A
list of the possible colors can be obtained with the function
<code>colors</code>. Alternatively, colors can be specified directly
in terms of their RGB components with a string of the form
<code>“#RRGGBB”</code> where each of the pairs <code>RR</code>, <code>GG</code>,
<code>BB</code> consist of two hexadecimal digits giving a value in the
range <code>00</code> to <code>FF</code>. Colors can also be specified by giving
an index into a small table of colors, the <code>palette</code>:
indices wrap round so with the default palette of size 8, <code>10</code> is
the same as <code>2</code>. This provides compatibility with S. Index
<code>0</code> corresponds to the background color. Note that the palette
(apart from <code>0</code> which is per-device) is a per-session setting.
</p>
<p>
Negative integer colours are errors.
</p>
<p>
Additionally, <code>“transparent”</code> is <em>transparent</em>, useful for
filled areas (such as the background!), and just invisible for things
like lines or text. In most circumstances (integer) <code>NA</code>
is equivalent to <code>“transparent”</code> (but not for
<code>text</code> and <code>mtext</code>).
</p>
<p>
Semi-transparent colors are available for use on devices that support
them.
</p>
<p>
The functions <code>rgb</code>, <code>hsv</code>, <code>hcl</code>,
<code>gray</code> and <code>rainbow</code> provide additional ways
of generating colors.
</p>
<h3>
Line Type Specification
</h3>
<p>
Line types can either be specified by giving an index into a small
built-in table of line types (1 = solid, 2 = dashed, etc, see
<code>lty</code> above) or directly as the lengths of on/off stretches of
line. This is done with a string of an even number (up to eight)
of characters, namely <em>non-zero</em>
(hexadecimal) digits which give the lengths in consecutive positions
in the string. For example, the string <code>“33”</code> specifies three
units on followed by three off and <code>“3313”</code> specifies three units
on followed by three off followed by one on and finally three off.
The ‘units’ here are (on most devices) proportional to
<code>lwd</code>, and with <code>lwd = 1</code> are in pixels or points or 1/96
inch.
</p>
<p>
The five standard dash-dot line types (<code>lty = 2:6</code>) correspond to
<code>c(“44”, “13”, “1343”, “73”, “2262”)</code>.
</p>
<p>
Note that <code>NA</code> is not a valid value for <code>lty</code>.
</p>
<h3>
Note
</h3>
<p>
The effect of restoring all the (settable) graphics parameters as
in the examples is hard to predict if the device has been resized.
Several of them are attempting to set the same things in different
ways, and those last in the alphabet will win. In particular, the
settings of <code>mai</code>, <code>mar</code>, <code>pin</code>, <code>plt</code> and
<code>pty</code> interact, as do the outer margin settings, the figure
layout and figure region size.
</p>
<h3>
References
</h3>
<p>
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
<em>The New S Language</em>.
Wadsworth &amp; Brooks/Cole.
</p>
<p>
Murrell, P. (2005) <em>R Graphics</em>. Chapman &amp; Hall/CRC Press.
</p>
<h3>
See Also
</h3>
<p>
<code>plot.default</code> for some high-level plotting parameters;
<code>colors</code>; <code>clip</code>;
<code>options</code> for other setup parameters;
graphic devices <code>x11</code>, <code>postscript</code> and
setting up device regions by <code>layout</code> and
<code>split.screen</code>.
</p>
<h3>
Examples
</h3>
<pre class="r"><code class='language-R'>op &lt;- par(mfrow = c(2, 2), # 2 x 2 pictures on one plot
          pty = "s")       # square plotting region,
                           # independent of device size

## At end of plotting, reset to previous settings:
par(op)

## Alternatively,
op &lt;- par(no.readonly = TRUE) # the whole list of settable par's.
## do lots of plotting and par(.) calls, then reset:
par(op)
## Note this is not in general good practice

par("ylog") # FALSE
plot(1 : 12, log = "y")
par("ylog") # TRUE

plot(1:2, xaxs = "i") # 'inner axis' w/o extra space
par(c("usr", "xaxp"))

( nr.prof &lt;-
c(prof.pilots = 16, lawyers = 11, farmers = 10, salesmen = 9, physicians = 9,
  mechanics = 6, policemen = 6, managers = 6, engineers = 5, teachers = 4,
  housewives = 3, students = 3, armed.forces = 1))
par(las = 3)
barplot(rbind(nr.prof)) # R 0.63.2: shows alignment problem
par(las = 0)  # reset to default

require(grDevices) # for gray
## 'fg' use:
plot(1:12, type = "b", main = "'fg' : axes, ticks and box in gray",
     fg = gray(0.7), bty = "7" , sub = R.version.string)

ex &lt;- function() {
   old.par &lt;- par(no.readonly = TRUE) # all par settings which
                                      # could be changed.
   on.exit(par(old.par))
   ## ...
   ## ... do lots of par() settings and plots
   ## ...
   invisible() #-- now,  par(old.par)  will be executed
}
ex()

## Line types
showLty &lt;- function(ltys, xoff = 0, ...) {
   stopifnot((n &lt;- length(ltys)) &gt;= 1)
   op &lt;- par(mar = rep(.5,4)); on.exit(par(op))
   plot(0:1, 0:1, type = "n", axes = FALSE, ann = FALSE)
   y &lt;- (n:1)/(n+1)
   clty &lt;- as.character(ltys)
   mytext &lt;- function(x, y, txt)
      text(x, y, txt, adj = c(0, -.3), cex = 0.8, ...)
   abline(h = y, lty = ltys, ...); mytext(xoff, y, clty)
   y &lt;- y - 1/(3*(n+1))
   abline(h = y, lty = ltys, lwd = 2, ...)
   mytext(1/8+xoff, y, paste(clty," lwd = 2"))
}
showLty(c("solid", "dashed", "dotted", "dotdash", "longdash", "twodash"))
par(new = TRUE)  # the same:
showLty(c("solid", "44", "13", "1343", "73", "2262"), xoff = .2, col = 2)
showLty(c("11", "22", "33", "44",   "12", "13", "14",   "21", "31"))
</code></pre>
</div>
</div>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="使用基礎r套件.html#cb286-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use par() to set-up the layout of subgraphs</span></span>
<span id="cb286-2"><a href="使用基礎r套件.html#cb286-2" aria-hidden="true" tabindex="-1"></a><span class="co"># use the parameter main=c(0.2, 0.2, 0.2, 0.2) to thrink the padding of figures.</span></span>
<span id="cb286-3"><a href="使用基礎r套件.html#cb286-3" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">2</span>), <span class="at">mai=</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span>))</span>
<span id="cb286-4"><a href="使用基礎r套件.html#cb286-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>){</span>
<span id="cb286-5"><a href="使用基礎r套件.html#cb286-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">barplot</span>(<span class="fu">unlist</span>(m55[i, <span class="sc">-</span><span class="dv">1</span>]), <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>), <span class="at">space=</span><span class="dv">0</span>, <span class="at">border=</span><span class="cn">NA</span>, <span class="at">xaxt=</span><span class="st">&quot;n&quot;</span>, <span class="at">yaxt=</span><span class="st">&quot;n&quot;</span>)</span>
<span id="cb286-6"><a href="使用基礎r套件.html#cb286-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><img src="R-for-Data-Journalism_files/figure-html/unnamed-chunk-57-1.png" width="672" /></p>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="使用基礎r套件.html#cb287-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot more rows to see what happens</span></span>
<span id="cb287-2"><a href="使用基礎r套件.html#cb287-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">2</span>), <span class="at">mai=</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span>))</span>
<span id="cb287-3"><a href="使用基礎r套件.html#cb287-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>){</span>
<span id="cb287-4"><a href="使用基礎r套件.html#cb287-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">barplot</span>(<span class="fu">unlist</span>(m55[i, <span class="sc">-</span><span class="dv">1</span>]), <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>), <span class="at">space=</span><span class="dv">0</span>, <span class="at">border=</span><span class="cn">NA</span>, <span class="at">xaxt=</span><span class="st">&quot;n&quot;</span>, <span class="at">yaxt=</span><span class="st">&quot;n&quot;</span>)</span>
<span id="cb287-5"><a href="使用基礎r套件.html#cb287-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><img src="R-for-Data-Journalism_files/figure-html/pml-plot-test-1.png" width="672" /></p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="使用基礎r套件.html#cb288-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot all subplots in a figure</span></span></code></pre></div>
<p><img src="R-for-Data-Journalism_files/figure-html/pml-plot-test-2.png" width="672" /></p>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="使用基礎r套件.html#cb289-1" aria-hidden="true" tabindex="-1"></a><span class="co"># nrow() to check number of row of m55.</span></span>
<span id="cb289-2"><a href="使用基礎r套件.html#cb289-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(m55)</span></code></pre></div>
<pre class="output"><code>## [1] 18</code></pre>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="使用基礎r套件.html#cb291-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use par() to set-up plotting parameters.</span></span>
<span id="cb291-2"><a href="使用基礎r套件.html#cb291-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">6</span>), <span class="at">mai=</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span>))</span>
<span id="cb291-3"><a href="使用基礎r套件.html#cb291-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb291-4"><a href="使用基礎r套件.html#cb291-4" aria-hidden="true" tabindex="-1"></a><span class="co"># use for-loop to plot all graph as subgraph</span></span>
<span id="cb291-5"><a href="使用基礎r套件.html#cb291-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(m55)){</span>
<span id="cb291-6"><a href="使用基礎r套件.html#cb291-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">barplot</span>(<span class="fu">unlist</span>(m55[i, <span class="sc">-</span><span class="dv">1</span>]), <span class="at">border=</span><span class="cn">NA</span>, <span class="at">space=</span><span class="dv">0</span>, <span class="at">xaxt=</span><span class="st">&quot;n&quot;</span>, <span class="at">yaxt=</span><span class="st">&quot;n&quot;</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">5</span>))</span>
<span id="cb291-7"><a href="使用基礎r套件.html#cb291-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><img src="R-for-Data-Journalism_files/figure-html/plot-m55-1.png" width="672" /></p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="使用基礎r套件.html#cb292-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">6</span>), <span class="at">mai=</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span>))</span>
<span id="cb292-2"><a href="使用基礎r套件.html#cb292-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(m55)){</span>
<span id="cb292-3"><a href="使用基礎r套件.html#cb292-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">barplot</span>(<span class="fu">unlist</span>(m55[i, <span class="sc">-</span><span class="dv">1</span>]), <span class="at">border=</span><span class="cn">NA</span>, <span class="at">space=</span><span class="dv">0</span>,<span class="at">xaxt=</span><span class="st">&quot;n&quot;</span>, <span class="at">yaxt=</span><span class="st">&quot;n&quot;</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">5</span>))</span>
<span id="cb292-4"><a href="使用基礎r套件.html#cb292-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">title</span>(m55[i,<span class="dv">1</span>], <span class="at">line =</span> <span class="sc">-</span><span class="dv">4</span>, <span class="at">cex.main=</span><span class="dv">3</span>)</span>
<span id="cb292-5"><a href="使用基礎r套件.html#cb292-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><img src="R-for-Data-Journalism_files/figure-html/plot-caption-1.png" width="672" /></p>
</div>
</div>
<div id="practice02_1_1-plotting-more" class="section level3 hasAnchor" number="5.1.7">
<h3><span class="header-section-number">5.1.7</span> Practice02_1_1 Plotting more<a href="使用基礎r套件.html#practice02_1_1-plotting-more" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="使用基礎r套件.html#cb293-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plotting matleave_95 != 5 but matleve_13 == 5</span></span>
<span id="cb293-2"><a href="使用基礎r套件.html#cb293-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb293-3"><a href="使用基礎r套件.html#cb293-3" aria-hidden="true" tabindex="-1"></a><span class="co"># plotting for matleave_13 == 4</span></span></code></pre></div>
</div>
<div id="practice02_2_2-selecting-and-filtering-by-dplyr-i" class="section level3 hasAnchor" number="5.1.8">
<h3><span class="header-section-number">5.1.8</span> Practice02_2_2 selecting and filtering by dplyr I<a href="使用基礎r套件.html#practice02_2_2-selecting-and-filtering-by-dplyr-i" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="使用基礎r套件.html#cb294-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;data/WORLD-MACHE_Gender_6.8.15.xls&quot;</span>, <span class="st">&quot;Sheet1&quot;</span>, <span class="at">col_names=</span>T)</span>
<span id="cb294-2"><a href="使用基礎r套件.html#cb294-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb294-3"><a href="使用基礎r套件.html#cb294-3" aria-hidden="true" tabindex="-1"></a><span class="co"># select columns by index</span></span>
<span id="cb294-4"><a href="使用基礎r套件.html#cb294-4" aria-hidden="true" tabindex="-1"></a><span class="co"># matleave &lt;- df[ , c(3, 6:24)]</span></span>
<span id="cb294-5"><a href="使用基礎r套件.html#cb294-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb294-6"><a href="使用基礎r套件.html#cb294-6" aria-hidden="true" tabindex="-1"></a><span class="co"># select all NA cells and assign 0 to them</span></span>
<span id="cb294-7"><a href="使用基礎r套件.html#cb294-7" aria-hidden="true" tabindex="-1"></a><span class="co"># matleave[is.na(matleave)] &lt;- 0</span></span>
<span id="cb294-8"><a href="使用基礎r套件.html#cb294-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb294-9"><a href="使用基礎r套件.html#cb294-9" aria-hidden="true" tabindex="-1"></a><span class="co"># filter rows by condition</span></span>
<span id="cb294-10"><a href="使用基礎r套件.html#cb294-10" aria-hidden="true" tabindex="-1"></a><span class="co"># m5 &lt;- matleave[matleave$&#39;matleave_13&#39; == 5, ]</span></span>
<span id="cb294-11"><a href="使用基礎r套件.html#cb294-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb294-12"><a href="使用基礎r套件.html#cb294-12" aria-hidden="true" tabindex="-1"></a><span class="co"># filter rows by condition</span></span>
<span id="cb294-13"><a href="使用基礎r套件.html#cb294-13" aria-hidden="true" tabindex="-1"></a><span class="co"># m55&lt;- m5[m5$&#39;matleave_95&#39; == 5,]</span></span>
<span id="cb294-14"><a href="使用基礎r套件.html#cb294-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb294-15"><a href="使用基礎r套件.html#cb294-15" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb294-16"><a href="使用基礎r套件.html#cb294-16" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">6</span>), <span class="at">mai=</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span>))</span>
<span id="cb294-17"><a href="使用基礎r套件.html#cb294-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(m55))){</span>
<span id="cb294-18"><a href="使用基礎r套件.html#cb294-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">barplot</span>(<span class="fu">unlist</span>(m55[i,<span class="sc">-</span><span class="dv">1</span>]),</span>
<span id="cb294-19"><a href="使用基礎r套件.html#cb294-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">border=</span><span class="cn">NA</span>, <span class="at">space=</span><span class="dv">0</span>,<span class="at">xaxt=</span><span class="st">&quot;n&quot;</span>, <span class="at">yaxt=</span><span class="st">&quot;n&quot;</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">5</span>))</span>
<span id="cb294-20"><a href="使用基礎r套件.html#cb294-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">title</span>(m55[i,<span class="dv">1</span>], <span class="at">line =</span> <span class="sc">-</span><span class="dv">4</span>, <span class="at">cex.main=</span><span class="dv">3</span>)</span>
<span id="cb294-21"><a href="使用基礎r套件.html#cb294-21" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><img src="R-for-Data-Journalism_files/figure-html/unnamed-chunk-59-1.png" width="672" /></p>
</div>
<div id="more-clean-version" class="section level3 hasAnchor" number="5.1.9">
<h3><span class="header-section-number">5.1.9</span> (More) Clean version<a href="使用基礎r套件.html#more-clean-version" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="使用基礎r套件.html#cb295-1" aria-hidden="true" tabindex="-1"></a><span class="co"># readxl::read_excel() to import the xls file</span></span>
<span id="cb295-2"><a href="使用基礎r套件.html#cb295-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;data/WORLD-MACHE_Gender_6.8.15.xls&quot;</span>, <span class="st">&quot;Sheet1&quot;</span>, <span class="at">col_names=</span>T)</span>
<span id="cb295-3"><a href="使用基礎r套件.html#cb295-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb295-4"><a href="使用基礎r套件.html#cb295-4" aria-hidden="true" tabindex="-1"></a><span class="co"># select iso3, and matleave columns by index</span></span>
<span id="cb295-5"><a href="使用基礎r套件.html#cb295-5" aria-hidden="true" tabindex="-1"></a>matleave <span class="ot">&lt;-</span> df[ , <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">6</span><span class="sc">:</span><span class="dv">24</span>)]</span>
<span id="cb295-6"><a href="使用基礎r套件.html#cb295-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb295-7"><a href="使用基礎r套件.html#cb295-7" aria-hidden="true" tabindex="-1"></a><span class="co"># str() to inspect the data structure of </span></span>
<span id="cb295-8"><a href="使用基礎r套件.html#cb295-8" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(matleave)</span></code></pre></div>
<pre class="output"><code>## tibble [197 × 20] (S3: tbl_df/tbl/data.frame)
##  $ iso3       : chr [1:197] &quot;AFG&quot; &quot;ALB&quot; &quot;DZA&quot; &quot;AND&quot; ...
##  $ matleave_95: num [1:197] 2 5 3 2 2 2 2 3 1 5 ...
##  $ matleave_96: num [1:197] 2 5 3 2 2 2 2 3 1 5 ...
##  $ matleave_97: num [1:197] 2 5 3 2 2 2 2 3 1 5 ...
##  $ matleave_98: num [1:197] 2 5 3 2 2 2 2 3 1 5 ...
##  $ matleave_99: num [1:197] 2 5 3 2 2 2 2 3 1 5 ...
##  $ matleave_00: num [1:197] 2 5 3 3 2 2 2 3 1 5 ...
##  $ matleave_01: num [1:197] 2 5 3 3 2 2 2 3 1 5 ...
##  $ matleave_02: num [1:197] 2 5 3 3 2 2 2 3 1 5 ...
##  $ matleave_03: num [1:197] 2 5 3 3 2 2 2 3 1 5 ...
##  $ matleave_04: num [1:197] 2 5 3 3 2 2 2 5 1 5 ...
##  $ matleave_05: num [1:197] 2 5 3 3 2 2 2 5 1 5 ...
##  $ matleave_06: num [1:197] 2 5 3 3 2 2 2 5 1 5 ...
##  $ matleave_07: num [1:197] 2 5 3 3 2 2 2 5 1 5 ...
##  $ matleave_08: num [1:197] 2 5 3 3 2 2 2 5 1 5 ...
##  $ matleave_09: num [1:197] 2 5 3 3 2 2 2 5 1 5 ...
##  $ matleave_10: num [1:197] 2 5 3 3 2 2 2 5 NA 5 ...
##  $ matleave_11: num [1:197] 2 5 3 3 2 2 2 5 3 5 ...
##  $ matleave_12: num [1:197] 2 5 3 3 2 2 2 5 3 5 ...
##  $ matleave_13: num [1:197] 2 5 3 3 2 2 2 5 3 5 ...</code></pre>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="使用基礎r套件.html#cb297-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select all NA cells and assign 0 to them</span></span>
<span id="cb297-2"><a href="使用基礎r套件.html#cb297-2" aria-hidden="true" tabindex="-1"></a>matleave[<span class="fu">is.na</span>(matleave)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb297-3"><a href="使用基礎r套件.html#cb297-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb297-4"><a href="使用基礎r套件.html#cb297-4" aria-hidden="true" tabindex="-1"></a><span class="co"># filter rows by condition</span></span>
<span id="cb297-5"><a href="使用基礎r套件.html#cb297-5" aria-hidden="true" tabindex="-1"></a>m5 <span class="ot">&lt;-</span> matleave[matleave<span class="sc">$</span><span class="st">&#39;matleave_13&#39;</span> <span class="sc">==</span> <span class="dv">5</span>, ]</span>
<span id="cb297-6"><a href="使用基礎r套件.html#cb297-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb297-7"><a href="使用基礎r套件.html#cb297-7" aria-hidden="true" tabindex="-1"></a><span class="co"># filter rows by condition</span></span>
<span id="cb297-8"><a href="使用基礎r套件.html#cb297-8" aria-hidden="true" tabindex="-1"></a>m55<span class="ot">&lt;-</span> m5[m5<span class="sc">$</span><span class="st">&#39;matleave_95&#39;</span> <span class="sc">==</span> <span class="dv">5</span>,]</span>
<span id="cb297-9"><a href="使用基礎r套件.html#cb297-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb297-10"><a href="使用基礎r套件.html#cb297-10" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb297-11"><a href="使用基礎r套件.html#cb297-11" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">6</span>), <span class="at">mai=</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span>))</span>
<span id="cb297-12"><a href="使用基礎r套件.html#cb297-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(m55))){</span>
<span id="cb297-13"><a href="使用基礎r套件.html#cb297-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">barplot</span>(<span class="fu">unlist</span>(m55[i,<span class="sc">-</span><span class="dv">1</span>]),</span>
<span id="cb297-14"><a href="使用基礎r套件.html#cb297-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">border=</span><span class="cn">NA</span>, <span class="at">space=</span><span class="dv">0</span>,<span class="at">xaxt=</span><span class="st">&quot;n&quot;</span>, <span class="at">yaxt=</span><span class="st">&quot;n&quot;</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">5</span>))</span>
<span id="cb297-15"><a href="使用基礎r套件.html#cb297-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">title</span>(m55[i,<span class="dv">1</span>], <span class="at">line =</span> <span class="sc">-</span><span class="dv">4</span>, <span class="at">cex.main=</span><span class="dv">3</span>)</span>
<span id="cb297-16"><a href="使用基礎r套件.html#cb297-16" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><img src="R-for-Data-Journalism_files/figure-html/unnamed-chunk-60-1.png" width="672" /></p>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="使用基礎r套件.html#cb298-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb298-2"><a href="使用基礎r套件.html#cb298-2" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">stringsAsFactors =</span> F)</span>
<span id="cb298-3"><a href="使用基礎r套件.html#cb298-3" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">999</span>)</span>
<span id="cb298-4"><a href="使用基礎r套件.html#cb298-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb298-5"><a href="使用基礎r套件.html#cb298-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb298-6"><a href="使用基礎r套件.html#cb298-6" aria-hidden="true" tabindex="-1"></a><span class="fu">read_excel</span>(<span class="st">&quot;data/WORLD-MACHE_Gender_6.8.15.xls&quot;</span>, <span class="st">&quot;Sheet1&quot;</span>, <span class="at">col_names=</span>T) <span class="sc">%&gt;%</span> </span>
<span id="cb298-7"><a href="使用基礎r套件.html#cb298-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(iso3, <span class="dv">6</span><span class="sc">:</span><span class="dv">24</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb298-8"><a href="使用基礎r套件.html#cb298-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(matleave_13 <span class="sc">==</span> <span class="dv">5</span>, matleave_95 <span class="sc">==</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb298-9"><a href="使用基礎r套件.html#cb298-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">gather</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;degree&quot;</span>, <span class="dv">2</span><span class="sc">:</span><span class="dv">20</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb298-10"><a href="使用基礎r套件.html#cb298-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># spread(year, degree, fill = 0) %&gt;% View</span></span>
<span id="cb298-11"><a href="使用基礎r套件.html#cb298-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">replace_na</span>(<span class="fu">list</span>(<span class="at">degree =</span> <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb298-12"><a href="使用基礎r套件.html#cb298-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">year2 =</span> <span class="fu">as.POSIXct</span>(<span class="fu">strptime</span>(year, <span class="st">&quot;matleave_%y&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb298-13"><a href="使用基礎r套件.html#cb298-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">year3 =</span> lubridate<span class="sc">::</span><span class="fu">year</span>(year2)) <span class="sc">%&gt;%</span></span>
<span id="cb298-14"><a href="使用基礎r套件.html#cb298-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb298-15"><a href="使用基礎r套件.html#cb298-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(year3, degree) <span class="sc">+</span> </span>
<span id="cb298-16"><a href="使用基礎r套件.html#cb298-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="at">color =</span> <span class="st">&quot;royalblue&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;royalblue&quot;</span>) <span class="sc">+</span> </span>
<span id="cb298-17"><a href="使用基礎r套件.html#cb298-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> iso3) <span class="sc">+</span></span>
<span id="cb298-18"><a href="使用基礎r套件.html#cb298-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>()</span></code></pre></div>
<p><img src="R-for-Data-Journalism_files/figure-html/unnamed-chunk-61-1.png" width="672" /></p>
</div>
<div id="more-the-fittest-version-to-compute-staysame" class="section level3 hasAnchor" number="5.1.10">
<h3><span class="header-section-number">5.1.10</span> (More) The fittest version to compute staySame<a href="使用基礎r套件.html#more-the-fittest-version-to-compute-staysame" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="使用基礎r套件.html#cb299-1" aria-hidden="true" tabindex="-1"></a><span class="co"># staySame version</span></span>
<span id="cb299-2"><a href="使用基礎r套件.html#cb299-2" aria-hidden="true" tabindex="-1"></a><span class="co"># staySame &lt;- apply(m5[,2:20], 1, function(x) length(unique(x[!is.na(x)]))) </span></span>
<span id="cb299-3"><a href="使用基礎r套件.html#cb299-3" aria-hidden="true" tabindex="-1"></a><span class="co"># m55 &lt;- m5[staySame, ]</span></span>
<span id="cb299-4"><a href="使用基礎r套件.html#cb299-4" aria-hidden="true" tabindex="-1"></a><span class="co"># m50 &lt;- m5[!staySame, ]</span></span></code></pre></div>

</div>
</div>
<div id="樞紐分析台北住宅竊盜點位" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> 樞紐分析：台北住宅竊盜點位<a href="使用基礎r套件.html#樞紐分析台北住宅竊盜點位" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="讀取檔案" class="section level3 hasAnchor" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> 讀取檔案<a href="使用基礎r套件.html#讀取檔案" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>首先要至<a href="https://data.taipei/#/">臺北資料大平台</a>上查詢「住宅竊盜」，可以找到<a href="https://data.taipei/#/dataset/detail?id=68785231-d6c5-47a1-b001-77eec70bec02">臺北市住宅竊盜點位資訊</a>。將該CSV檔下載至個人本機端，置入<code>data</code> 資料夾中，便可以用<code>read.csv()</code>讀取該檔案。</p>
<ul>
<li><code>read.csv()</code> to read csv and convert it to a data.frame</li>
</ul>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="使用基礎r套件.html#cb300-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/臺北市住宅竊盜點位資訊-UTF8-BOM-1.csv&quot;</span>)</span>
<span id="cb300-2"><a href="使用基礎r套件.html#cb300-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df) </span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
編號
</th>
<th style="text-align:left;">
案類
</th>
<th style="text-align:right;">
發生日期
</th>
<th style="text-align:left;">
發生時段
</th>
<th style="text-align:left;">
發生地點
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
住宅竊盜
</td>
<td style="text-align:right;">
1030623
</td>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
臺北市中正區廈門街91~120號
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
住宅竊盜
</td>
<td style="text-align:right;">
1040101
</td>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
臺北市文山區萬美里萬寧街1~30號
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
住宅竊盜
</td>
<td style="text-align:right;">
1040101
</td>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
臺北市信義區富台里忠孝東路5段295巷6弄1~30號
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
住宅竊盜
</td>
<td style="text-align:right;">
1040101
</td>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
臺北市中山區新生北路1段91~120號
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
住宅竊盜
</td>
<td style="text-align:right;">
1040101
</td>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
臺北市文山區明興里興隆路4段1~30號
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
住宅竊盜
</td>
<td style="text-align:right;">
1040102
</td>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
臺北市士林區天福里1鄰忠誠路2段130巷1~30號
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="使用基礎r套件.html#cb301-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)         <span class="co"># Checking the strcutrue of it</span></span></code></pre></div>
<pre class="output"><code>## &#39;data.frame&#39;:    3347 obs. of  5 variables:
##  $ 編號    : int  1 2 3 4 5 6 7 8 9 10 ...
##  $ 案類    : chr  &quot;住宅竊盜&quot; &quot;住宅竊盜&quot; &quot;住宅竊盜&quot; &quot;住宅竊盜&quot; ...
##  $ 發生日期: int  1030623 1040101 1040101 1040101 1040101 1040102 1040102 1040102 1040102 1040104 ...
##  $ 發生時段: chr  &quot;08~10&quot; &quot;00~02&quot; &quot;00~02&quot; &quot;06~08&quot; ...
##  $ 發生地點: chr  &quot;臺北市中正區廈門街91~120號&quot; &quot;臺北市文山區萬美里萬寧街1~30號&quot; &quot;臺北市信義區富台里忠孝東路5段295巷6弄1~30號&quot; &quot;臺北市中山區新生北路1段91~120號&quot; ...</code></pre>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="使用基礎r套件.html#cb303-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df)     <span class="co"># glimpse() is the tibble package&#39;s function.</span></span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
編號
</th>
<th style="text-align:left;">
案類
</th>
<th style="text-align:left;">
發生日期
</th>
<th style="text-align:left;">
發生時段
</th>
<th style="text-align:left;">
發生地點
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Min. : 1.0
</td>
<td style="text-align:left;">
Length:3347
</td>
<td style="text-align:left;">
Min. :1030623
</td>
<td style="text-align:left;">
Length:3347
</td>
<td style="text-align:left;">
Length:3347
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
1st Qu.: 837.5
</td>
<td style="text-align:left;">
Class :character
</td>
<td style="text-align:left;">
1st Qu.:1050320
</td>
<td style="text-align:left;">
Class :character
</td>
<td style="text-align:left;">
Class :character
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Median :1674.0
</td>
<td style="text-align:left;">
Mode :character
</td>
<td style="text-align:left;">
Median :1060708
</td>
<td style="text-align:left;">
Mode :character
</td>
<td style="text-align:left;">
Mode :character
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Mean :1674.0
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Mean :1063954
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
3rd Qu.:2510.5
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
3rd Qu.:1080306
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Max. :3347.0
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Max. :1110328
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
</tbody>
</table>
<p><strong>用readr::read_csv()來讀取。</strong>。除了 base套件的<code>read.csv()</code>外，也可使用<code>readr</code>套件的<code>read_csv()</code>函式來讀取，該套件屬於tidyverse套件系的其中一個套件，如果已經有用<code>install.packages("tidyverse")</code>安裝過，只要用<code>library(tidyverse)</code>就可以使用<code>read_csv()</code>函式。在此鼓勵各位使用tidyverse系列套件。普遍來說，<code>read_csv()</code> 的功能和效果都會比<code>read.csv()</code>好，該函式還會自動猜測每個變數的變數型態並直接進行轉換（尤其是有時間欄位的時候，會非常方便）。</p>
<ul>
<li>除錯：萬一遇到中文檔案會有讀檔編碼問題時，有可能該檔案是用big5來儲存的，可以在<code>read_csv()</code>中設定<code>locale</code>來指定讀取的編碼方法。如<code>read_csv(url, locale = locale(encoding = "Big5"))</code></li>
</ul>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="使用基礎r套件.html#cb304-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb304-2"><a href="使用基礎r套件.html#cb304-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/臺北市住宅竊盜點位資訊-UTF8-BOM-1.csv&quot;</span>)</span>
<span id="cb304-3"><a href="使用基礎r套件.html#cb304-3" aria-hidden="true" tabindex="-1"></a><span class="co"># df &lt;- read_csv(&quot;data/臺北市住宅竊盜點位資訊-UTF8-BOM-1.csv&quot;, locale = locale(encoding = &quot;Big5&quot;))</span></span>
<span id="cb304-4"><a href="使用基礎r套件.html#cb304-4" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
編號
</th>
<th style="text-align:left;">
案類
</th>
<th style="text-align:right;">
發生日期
</th>
<th style="text-align:left;">
發生時段
</th>
<th style="text-align:left;">
發生地點
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
住宅竊盜
</td>
<td style="text-align:right;">
1030623
</td>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
臺北市中正區廈門街91~120號
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
住宅竊盜
</td>
<td style="text-align:right;">
1040101
</td>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
臺北市文山區萬美里萬寧街1~30號
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
住宅竊盜
</td>
<td style="text-align:right;">
1040101
</td>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
臺北市信義區富台里忠孝東路5段295巷6弄1~30號
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
住宅竊盜
</td>
<td style="text-align:right;">
1040101
</td>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
臺北市中山區新生北路1段91~120號
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
住宅竊盜
</td>
<td style="text-align:right;">
1040101
</td>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
臺北市文山區明興里興隆路4段1~30號
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
住宅竊盜
</td>
<td style="text-align:right;">
1040102
</td>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
臺北市士林區天福里1鄰忠誠路2段130巷1~30號
</td>
</tr>
</tbody>
</table>
<p><strong>直接依資料網址讀取檔案。</strong>現在的程式語言所設計的讀取檔案函式通常會允許使用者直接讀取資料所在的URL。所以，我們可以直接從網路上載入台北市竊盜案資料。首先要至<a href="https://data.taipei/#/">臺北資料大平台</a>上查詢「住宅竊盜」，可以找到<a href="https://data.taipei/#/dataset/detail?id=68785231-d6c5-47a1-b001-77eec70bec02">臺北市住宅竊盜點位資訊</a>，點選後對右上方的<a href="https://data.taipei/api/getDatasetInfo/downloadResource?id=68785231-d6c5-47a1-b001-77eec70bec02&amp;rid=93d9bc2d-af08-4db7-a56b-9f0a49226fa3">下載</a>按右鍵可取得鏈結到該資料的URL（如<a href="https://data.taipei/api/getDatasetInfo/downloadResource?id=68785231-d6c5-47a1-b001-77eec70bec02&amp;rid=93d9bc2d-af08-4db7-a56b-9f0a49226fa3" class="uri">https://data.taipei/api/getDatasetInfo/downloadResource?id=68785231-d6c5-47a1-b001-77eec70bec02&amp;rid=93d9bc2d-af08-4db7-a56b-9f0a49226fa3</a>）。</p>
<p>由於該資料網址似非永久網址，故本範例並未執行以下程式碼，僅提供範例程式碼讓個人替換網址來做測試。</p>
<p><strong>(參考) 用R程式將該網址的檔案抓回本機端儲存。</strong>部分Mac電腦無法使用<code>read.csv()</code>從網路上取得資料又轉為<code>data.frame</code>，一個可行的辦法是先用<code>GET(url,write_disk("data/tptheft.csv"))</code>將其取回並命名為<code>data/tptheft.csv</code>，之後再用<code>df &lt;- read.csv("data/tptheft.csv")</code>直接讀取該檔案。</p>
</div>
<div id="查看資料內容" class="section level3 hasAnchor" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> 查看資料內容<a href="使用基礎r套件.html#查看資料內容" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><code>View(df)</code> 用RStudio所提供的GUI直接觀看變數。自行移去#註解符號來測試，因為knit成html檔時，有<code>View()</code>的指令都會造成knit程序中斷。</li>
<li><code>head(df)</code> 取前面六筆資料（也就是六列的資料來概觀該資料）</li>
<li><code>class(df)</code> 印出該</li>
<li><code>str(df)</code></li>
</ul>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="使用基礎r套件.html#cb305-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(df)</span></span>
<span id="cb305-2"><a href="使用基礎r套件.html#cb305-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)    <span class="co"># get first part of the data.frame</span></span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
編號
</th>
<th style="text-align:left;">
案類
</th>
<th style="text-align:right;">
發生日期
</th>
<th style="text-align:left;">
發生時段
</th>
<th style="text-align:left;">
發生地點
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
住宅竊盜
</td>
<td style="text-align:right;">
1030623
</td>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
臺北市中正區廈門街91~120號
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
住宅竊盜
</td>
<td style="text-align:right;">
1040101
</td>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
臺北市文山區萬美里萬寧街1~30號
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
住宅竊盜
</td>
<td style="text-align:right;">
1040101
</td>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
臺北市信義區富台里忠孝東路5段295巷6弄1~30號
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
住宅竊盜
</td>
<td style="text-align:right;">
1040101
</td>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
臺北市中山區新生北路1段91~120號
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
住宅竊盜
</td>
<td style="text-align:right;">
1040101
</td>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
臺北市文山區明興里興隆路4段1~30號
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
住宅竊盜
</td>
<td style="text-align:right;">
1040102
</td>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
臺北市士林區天福里1鄰忠誠路2段130巷1~30號
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="使用基礎r套件.html#cb306-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(df)</span></code></pre></div>
<pre class="output"><code>## [1] &quot;spec_tbl_df&quot; &quot;tbl_df&quot;      &quot;tbl&quot;         &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="使用基礎r套件.html#cb308-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)</span></code></pre></div>
<pre class="output"><code>## spec_tbl_df [3,347 × 5] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ 編號    : num [1:3347] 1 2 3 4 5 6 7 8 9 10 ...
##  $ 案類    : chr [1:3347] &quot;住宅竊盜&quot; &quot;住宅竊盜&quot; &quot;住宅竊盜&quot; &quot;住宅竊盜&quot; ...
##  $ 發生日期: num [1:3347] 1030623 1040101 1040101 1040101 1040101 ...
##  $ 發生時段: chr [1:3347] &quot;08~10&quot; &quot;00~02&quot; &quot;00~02&quot; &quot;06~08&quot; ...
##  $ 發生地點: chr [1:3347] &quot;臺北市中正區廈門街91~120號&quot; &quot;臺北市文山區萬美里萬寧街1~30號&quot; &quot;臺北市信義區富台里忠孝東路5段295巷6弄1~30號&quot; &quot;臺北市中山區新生北路1段91~120號&quot; ...
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   編號 = col_double(),
##   ..   案類 = col_character(),
##   ..   發生日期 = col_double(),
##   ..   發生時段 = col_character(),
##   ..   發生地點 = col_character()
##   .. )
##  - attr(*, &quot;problems&quot;)=&lt;externalptr&gt;</code></pre>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="使用基礎r套件.html#cb310-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
編號
</th>
<th style="text-align:left;">
案類
</th>
<th style="text-align:left;">
發生日期
</th>
<th style="text-align:left;">
發生時段
</th>
<th style="text-align:left;">
發生地點
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Min. : 1.0
</td>
<td style="text-align:left;">
Length:3347
</td>
<td style="text-align:left;">
Min. :1030623
</td>
<td style="text-align:left;">
Length:3347
</td>
<td style="text-align:left;">
Length:3347
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
1st Qu.: 837.5
</td>
<td style="text-align:left;">
Class :character
</td>
<td style="text-align:left;">
1st Qu.:1050320
</td>
<td style="text-align:left;">
Class :character
</td>
<td style="text-align:left;">
Class :character
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Median :1674.0
</td>
<td style="text-align:left;">
Mode :character
</td>
<td style="text-align:left;">
Median :1060708
</td>
<td style="text-align:left;">
Mode :character
</td>
<td style="text-align:left;">
Mode :character
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Mean :1674.0
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Mean :1063954
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
3rd Qu.:2510.5
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
3rd Qu.:1080306
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Max. :3347.0
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Max. :1110328
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="使用基礎r套件.html#cb311-1" aria-hidden="true" tabindex="-1"></a><span class="co"># look up help</span></span></code></pre></div>
</div>
<div id="觀察資料維度-1" class="section level3 hasAnchor" number="5.2.3">
<h3><span class="header-section-number">5.2.3</span> 觀察資料維度<a href="使用基礎r套件.html#觀察資料維度-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>e.g., dim(), ncol(), nrow(),length()</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="使用基礎r套件.html#cb312-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df)</span></code></pre></div>
<pre class="output"><code>## [1] 3347    5</code></pre>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="使用基礎r套件.html#cb314-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(df)</span></code></pre></div>
<pre class="output"><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="使用基礎r套件.html#cb316-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df)</span></code></pre></div>
<pre class="output"><code>## [1] 3347</code></pre>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="使用基礎r套件.html#cb318-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(df)</span></code></pre></div>
<pre class="output"><code>## [1] 5</code></pre>
</div>
<div id="觀察變數名稱" class="section level3 hasAnchor" number="5.2.4">
<h3><span class="header-section-number">5.2.4</span> 觀察變數名稱<a href="使用基礎r套件.html#觀察變數名稱" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><code>names(df)</code> 列出變數名稱</li>
<li><code>df$發生地點</code> 顯示該變數內容</li>
<li><code>df$發生時段</code> 顯示該變數內容</li>
<li><code>length(df$發生時段)</code> 顯示該變數的長度（相當於有幾個）</li>
</ul>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="使用基礎r套件.html#cb320-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df)</span></code></pre></div>
<pre class="output"><code>## [1] &quot;編號&quot;     &quot;案類&quot;     &quot;發生日期&quot; &quot;發生時段&quot; &quot;發生地點&quot;</code></pre>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="使用基礎r套件.html#cb322-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df<span class="sc">$</span>發生地點)</span></code></pre></div>
<pre class="output"><code>## [1] &quot;臺北市中正區廈門街91~120號&quot;                 
## [2] &quot;臺北市文山區萬美里萬寧街1~30號&quot;             
## [3] &quot;臺北市信義區富台里忠孝東路5段295巷6弄1~30號&quot;
## [4] &quot;臺北市中山區新生北路1段91~120號&quot;            
## [5] &quot;臺北市文山區明興里興隆路4段1~30號&quot;          
## [6] &quot;臺北市士林區天福里1鄰忠誠路2段130巷1~30號&quot;</code></pre>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="使用基礎r套件.html#cb324-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df<span class="sc">$</span>發生時段)</span></code></pre></div>
<pre class="output"><code>## [1] &quot;08~10&quot; &quot;00~02&quot; &quot;00~02&quot; &quot;06~08&quot; &quot;10~12&quot; &quot;00~02&quot;</code></pre>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="使用基礎r套件.html#cb326-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(df<span class="sc">$</span>發生時段)</span></code></pre></div>
<pre class="output"><code>## [1] 3347</code></pre>
</div>
<div id="萃取所需新變項" class="section level3 hasAnchor" number="5.2.5">
<h3><span class="header-section-number">5.2.5</span> 萃取所需新變項<a href="使用基礎r套件.html#萃取所需新變項" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>該data.frame包含編號、案類、發生日期、發生時段、發生地點五個變項。其中比較有意義的應該是發生日期、發生時段和發生地點。然而，發生地點幾乎是完整地址，除非要繪製發生的地圖點位地圖，才會需要近乎完整的地址。假設我們的目標是抽取出台北市的「行政區」，發生地點的格式還蠻一致的如「臺北市中正區廈門街91<sub>120號」。因此，我們只要抽出發生地點的第4到第5個字，或者第4</sub>6個字即可。</p>
<p>從一個字串中抽取出第n個字到第m個字，要用<code>substr()</code>或<code>stringr</code>套件的<code>str_sub()</code>。可以用<code>?substr</code>或<code>?str_sub</code>查詢help中的相關用法。在此</p>
<ul>
<li>我將中文變數<code>現在時間</code>的資料指給一個新的英文變項<code>time</code>。</li>
<li>從變數<code>發生地點</code>，用<code>substr()</code>取出行政區（<code>region</code>）</li>
<li>或用<code>stringr::str_sub()</code></li>
<li><code>?substr</code>查詢其用法和意義。相當於<code>getting sub string since x to y</code>。</li>
</ul>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="使用基礎r套件.html#cb328-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get substring of var &quot;發生時段&quot; and assign to a new time var</span></span>
<span id="cb328-2"><a href="使用基礎r套件.html#cb328-2" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>time <span class="ot">&lt;-</span> df<span class="sc">$</span>發生時段</span>
<span id="cb328-3"><a href="使用基礎r套件.html#cb328-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb328-4"><a href="使用基礎r套件.html#cb328-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Get substring of var &quot;發生地點&quot; and assign to a new region var</span></span>
<span id="cb328-5"><a href="使用基礎r套件.html#cb328-5" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>region <span class="ot">&lt;-</span> <span class="fu">substr</span>(df<span class="sc">$</span>發生地點, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb328-6"><a href="使用基礎r套件.html#cb328-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
編號
</th>
<th style="text-align:left;">
案類
</th>
<th style="text-align:right;">
發生日期
</th>
<th style="text-align:left;">
發生時段
</th>
<th style="text-align:left;">
發生地點
</th>
<th style="text-align:left;">
time
</th>
<th style="text-align:left;">
region
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
住宅竊盜
</td>
<td style="text-align:right;">
1030623
</td>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
臺北市中正區廈門街91~120號
</td>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
中正
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
住宅竊盜
</td>
<td style="text-align:right;">
1040101
</td>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
臺北市文山區萬美里萬寧街1~30號
</td>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
文山
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
住宅竊盜
</td>
<td style="text-align:right;">
1040101
</td>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
臺北市信義區富台里忠孝東路5段295巷6弄1~30號
</td>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
信義
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
住宅竊盜
</td>
<td style="text-align:right;">
1040101
</td>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
臺北市中山區新生北路1段91~120號
</td>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
中山
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
住宅竊盜
</td>
<td style="text-align:right;">
1040101
</td>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
臺北市文山區明興里興隆路4段1~30號
</td>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
文山
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
住宅竊盜
</td>
<td style="text-align:right;">
1040102
</td>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
臺北市士林區天福里1鄰忠誠路2段130巷1~30號
</td>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
士林
</td>
</tr>
</tbody>
</table>
<p><strong><em>Practice</em></strong>. 萃取月份作為新變項<code>month</code></p>
<p>除了時間和地區可能會有差別外，那月份會不會竊盜案的數量也有差異呢？會不會冬天小偷也都在家休息了，夏天多呢？請嘗試從發生日期萃取出竊盜案發生的月份，並儲存為一個新的變項<code>month</code>。</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="使用基礎r套件.html#cb329-1" aria-hidden="true" tabindex="-1"></a><span class="co"># YOUR CODE SHOULD BE HERE</span></span></code></pre></div>
</div>
<div id="iv.-樞紐分析計數加總與彙整" class="section level3 hasAnchor" number="5.2.6">
<h3><span class="header-section-number">5.2.6</span> IV. 樞紐分析：計數、加總與彙整。<a href="使用基礎r套件.html#iv.-樞紐分析計數加總與彙整" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Pivot analysis: Counting and Summarizing 清理完資料後，我們要回答的第一個數據問題通常是「那XXX的案例有幾個？」例如：大安區有多少竊盜案？10~12這個時段有多少案例。</p>
</div>
<div id="方法一counting-by-table" class="section level3 hasAnchor" number="5.2.7">
<h3><span class="header-section-number">5.2.7</span> 方法一：Counting by <code>table()</code><a href="使用基礎r套件.html#方法一counting-by-table" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>table()</code>函式可以對Vector中的值進行計數（Counting）。<code>table(df$time)</code> 相當於去計數不同的時間區間出現多少起案例；<code>table(df$region)</code> 相當於去計數不同地區各出現多少起案例。</p>
<p>提示：可以用<code>class(tb_1)</code> 觀察用<code>table()</code> 計數後所產生的資料型態（<code>table</code>）。</p>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="使用基礎r套件.html#cb330-1" aria-hidden="true" tabindex="-1"></a><span class="co"># counting the frequency of time variable</span></span>
<span id="cb330-2"><a href="使用基礎r套件.html#cb330-2" aria-hidden="true" tabindex="-1"></a>(tb_1 <span class="ot">&lt;-</span> <span class="fu">table</span>(df<span class="sc">$</span>time)) </span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
00~02
</th>
<th style="text-align:right;">
02~04
</th>
<th style="text-align:right;">
03~05
</th>
<th style="text-align:right;">
04~06
</th>
<th style="text-align:right;">
05~07
</th>
<th style="text-align:right;">
06~08
</th>
<th style="text-align:right;">
08~10
</th>
<th style="text-align:right;">
09~11
</th>
<th style="text-align:right;">
10~12
</th>
<th style="text-align:right;">
11~03
</th>
<th style="text-align:right;">
11~13
</th>
<th style="text-align:right;">
12~14
</th>
<th style="text-align:right;">
12~15
</th>
<th style="text-align:right;">
14~16
</th>
<th style="text-align:right;">
15~17
</th>
<th style="text-align:right;">
15~18
</th>
<th style="text-align:right;">
16~18
</th>
<th style="text-align:right;">
17~19
</th>
<th style="text-align:right;">
18~20
</th>
<th style="text-align:right;">
18~21
</th>
<th style="text-align:right;">
19~21
</th>
<th style="text-align:right;">
20~22
</th>
<th style="text-align:right;">
21~23
</th>
<th style="text-align:right;">
21~24
</th>
<th style="text-align:right;">
22~24
</th>
<th style="text-align:right;">
23~01
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
272
</td>
<td style="text-align:right;">
214
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
156
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
191
</td>
<td style="text-align:right;">
305
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
338
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
338
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
342
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
246
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
314
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
303
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
206
</td>
<td style="text-align:right;">
20
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="使用基礎r套件.html#cb331-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(tb_1)       <span class="co"># table</span></span></code></pre></div>
<pre class="output"><code>## [1] &quot;table&quot;</code></pre>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="使用基礎r套件.html#cb333-1" aria-hidden="true" tabindex="-1"></a><span class="co"># counting the frequency of region variable</span></span>
<span id="cb333-2"><a href="使用基礎r套件.html#cb333-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>region)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
中山
</th>
<th style="text-align:right;">
中正
</th>
<th style="text-align:right;">
信義
</th>
<th style="text-align:right;">
內湖
</th>
<th style="text-align:right;">
北投
</th>
<th style="text-align:right;">
南港
</th>
<th style="text-align:right;">
士林
</th>
<th style="text-align:right;">
大同
</th>
<th style="text-align:right;">
大安
</th>
<th style="text-align:right;">
文山
</th>
<th style="text-align:right;">
松山
</th>
<th style="text-align:right;">
萬華
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
438
</td>
<td style="text-align:right;">
263
</td>
<td style="text-align:right;">
214
</td>
<td style="text-align:right;">
303
</td>
<td style="text-align:right;">
318
</td>
<td style="text-align:right;">
181
</td>
<td style="text-align:right;">
373
</td>
<td style="text-align:right;">
172
</td>
<td style="text-align:right;">
311
</td>
<td style="text-align:right;">
204
</td>
<td style="text-align:right;">
220
</td>
<td style="text-align:right;">
350
</td>
</tr>
</tbody>
</table>
</div>
<div id="方法二counting-by-tapply" class="section level3 hasAnchor" number="5.2.8">
<h3><span class="header-section-number">5.2.8</span> 方法二：Counting by <code>tapply()</code><a href="使用基礎r套件.html#方法二counting-by-tapply" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>我們也可用<code>tapply()</code> 函式來達到一樣的目的。Apply家族的函式都是，針對某個資料，將某個函式套用到某個物件上。<code>tapply()</code> 即是用來做計數的，<code>tapply(df$編號, df$time, length)</code>有三個輸入，第一個輸入為整體物件，第二個輸入為要據以彙整的變項，在此為<code>df$time</code>，第三個是要用來彙整的函式，因為這裡要做計數，所以要用<code>length</code>函式。</p>
<p>註：同樣用<code>class()</code>來觀察彙整後的資料型態為<code>array</code>，和前者的<code>table</code>資料型態不同。</p>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="使用基礎r套件.html#cb334-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tapply() one arbitrary var by var time with length() function</span></span>
<span id="cb334-2"><a href="使用基礎r套件.html#cb334-2" aria-hidden="true" tabindex="-1"></a>(tb_2 <span class="ot">&lt;-</span> <span class="fu">tapply</span>(df<span class="sc">$</span>編號, df<span class="sc">$</span>time, length))</span></code></pre></div>
<pre class="output"><code>## 00~02 02~04 03~05 04~06 05~07 06~08 08~10 09~11 10~12 11~03 11~13 12~14 12~15 
##   272   214     8   156    23   191   305     6   338     1    26   338     2 
## 14~16 15~17 15~18 16~18 17~19 18~20 18~21 19~21 20~22 21~23 21~24 22~24 23~01 
##   342     3     1   246    21   314     1     4   303     5     1   206    20</code></pre>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="使用基礎r套件.html#cb336-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(tb_2)</span></code></pre></div>
<pre class="output"><code>## [1] &quot;array&quot;</code></pre>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="使用基礎r套件.html#cb338-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tapply() one arbitrary var by var region with length() function</span></span>
<span id="cb338-2"><a href="使用基礎r套件.html#cb338-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(df<span class="sc">$</span>編號, df<span class="sc">$</span>region, length)</span></code></pre></div>
<pre class="output"><code>## 中山 中正 信義 內湖 北投 南港 士林 大同 大安 文山 松山 萬華 
##  438  263  214  303  318  181  373  172  311  204  220  350</code></pre>
</div>
<div id="v.-依照變數值篩選資料" class="section level3 hasAnchor" number="5.2.9">
<h3><span class="header-section-number">5.2.9</span> V. 依照變數值篩選資料<a href="使用基礎r套件.html#v.-依照變數值篩選資料" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>該項竊盜案資料整理時經常不慎用不同的時間區間來標記，有時候也會不小心把新北市的資料給那進來，所以需要做資料篩選。從各個時間區間的竊盜案出現次數來觀察，有少數的案件出現在奇數的時間區間如<code>09~11</code>或<code>12~15</code>等等需要篩除；從各個行政區的竊盜案出現次數來觀察，確實都是台北市的竊盜案。</p>
<p>接下來要用base套件的R，根據某個變數值（例如上述的時間）來篩出符合條件的資料，或者篩去不符合條件的資料。其語法是要在<code>df[ , ]</code>逗號前加上篩選的條件，也就是對資料列進行篩選，篩出或篩除都是以整列為單位。在此的條件是<code>df$time</code><span style="color:hotpink">在</span><code>00~02</code>、<code>02~04</code>、…之間；或者是<code>df$time</code><span style="color:hotpink">不在</span><code>03~05</code>、<code>05~07</code>、…之間。表示法分別如下：</p>
<pre><code>df$time %in% c(&quot;00~02&quot;, &quot;02~04&quot;, &quot;04~6&quot;,...)
!df$time %in% c(&quot;03~05&quot;, &quot;05~07&quot;, ...)</code></pre>
<ul>
<li><p><code>%in%</code> 表示的是左方<code>df$time</code>的值是否是右方Vector中的其中一個</p></li>
<li><p>如果要表示不包含，就在<code>df%time</code>加一個NOT，也就是<span style="color:hotpink"><code>!</code></span>。</p></li>
</ul>
<p>依照各組時間的案例個數統計後，篩除資料未足100的時間區間如下，最後再用<code>table(df$time)</code> 計算一次，發現每個時段都兩三、百個案例，且涵蓋整日的時間。清理後沒有重疊的時間區間，做類別資料分析會比較準確。</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="使用基礎r套件.html#cb341-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filter out irrelevant timestamp</span></span>
<span id="cb341-2"><a href="使用基礎r套件.html#cb341-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[<span class="sc">!</span>df<span class="sc">$</span>time <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;03~05&quot;</span>, <span class="st">&quot;05~07&quot;</span>, <span class="st">&quot;09~11&quot;</span>, <span class="st">&quot;11~13&quot;</span>, <span class="st">&quot;12~15&quot;</span>, <span class="st">&quot;15~17&quot;</span>, <span class="st">&quot;15~18&quot;</span>, <span class="st">&quot;17~19&quot;</span>, <span class="st">&quot; 18~21&quot;</span>, <span class="st">&quot;19~21&quot;</span>, <span class="st">&quot;21~23&quot;</span>, <span class="st">&quot;21~24&quot;</span>, <span class="st">&quot;23~01&quot;</span>), ]</span>
<span id="cb341-3"><a href="使用基礎r套件.html#cb341-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb341-4"><a href="使用基礎r套件.html#cb341-4" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>time)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
00~02
</th>
<th style="text-align:right;">
02~04
</th>
<th style="text-align:right;">
04~06
</th>
<th style="text-align:right;">
06~08
</th>
<th style="text-align:right;">
08~10
</th>
<th style="text-align:right;">
10~12
</th>
<th style="text-align:right;">
11~03
</th>
<th style="text-align:right;">
12~14
</th>
<th style="text-align:right;">
14~16
</th>
<th style="text-align:right;">
16~18
</th>
<th style="text-align:right;">
18~20
</th>
<th style="text-align:right;">
18~21
</th>
<th style="text-align:right;">
20~22
</th>
<th style="text-align:right;">
22~24
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
272
</td>
<td style="text-align:right;">
214
</td>
<td style="text-align:right;">
156
</td>
<td style="text-align:right;">
191
</td>
<td style="text-align:right;">
305
</td>
<td style="text-align:right;">
338
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
338
</td>
<td style="text-align:right;">
342
</td>
<td style="text-align:right;">
246
</td>
<td style="text-align:right;">
314
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
303
</td>
<td style="text-align:right;">
206
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="使用基礎r套件.html#cb342-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filter out irrelevant region(area)</span></span>
<span id="cb342-2"><a href="使用基礎r套件.html#cb342-2" aria-hidden="true" tabindex="-1"></a><span class="co"># df &lt;- df[!df$region %in% c(&quot;三重&quot;, &quot;中和&quot;, &quot;淡水&quot;, &quot;板橋&quot;), ]</span></span></code></pre></div>
</div>
<div id="vi.-雙變數樞紐分析" class="section level3 hasAnchor" number="5.2.10">
<h3><span class="header-section-number">5.2.10</span> VI. 雙變數樞紐分析<a href="使用基礎r套件.html#vi.-雙變數樞紐分析" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>類別變項分析通常是要考驗兩個變項間的關係，從上述的計數中，我可以看見不同行政區或者不同時間的竊盜案數量，但我進一步想知道，那不同行政區的竊盜案常發生時間是否不同？這時後就要做時間和行政區的交叉分析。我們同樣可以用<code>table()</code>和<code>tapply()</code>來做兩個變項的交叉分析，寫法如下。</p>
<div id="by-table" class="section level4 hasAnchor" number="5.2.10.1">
<h4><span class="header-section-number">5.2.10.1</span> (1) by <code>table()</code><a href="使用基礎r套件.html#by-table" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>用<code>table()</code>來交叉分析的結果如下，所得到的結果之變數型態仍是<code>table</code>型態。</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="使用基礎r套件.html#cb343-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabulating time and region variables</span></span>
<span id="cb343-2"><a href="使用基礎r套件.html#cb343-2" aria-hidden="true" tabindex="-1"></a>(res_table <span class="ot">&lt;-</span> <span class="fu">table</span>(df<span class="sc">$</span>time, df<span class="sc">$</span>region))</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
中山
</th>
<th style="text-align:right;">
中正
</th>
<th style="text-align:right;">
信義
</th>
<th style="text-align:right;">
內湖
</th>
<th style="text-align:right;">
北投
</th>
<th style="text-align:right;">
南港
</th>
<th style="text-align:right;">
士林
</th>
<th style="text-align:right;">
大同
</th>
<th style="text-align:right;">
大安
</th>
<th style="text-align:right;">
文山
</th>
<th style="text-align:right;">
松山
</th>
<th style="text-align:right;">
萬華
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:right;">
62
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
29
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
29
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
22
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
21
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:right;">
45
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
34
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:right;">
38
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
35
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
35
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
35
</td>
<td style="text-align:right;">
41
</td>
</tr>
<tr>
<td style="text-align:left;">
11~03
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
49
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
33
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:right;">
43
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
39
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
32
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
26
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:right;">
39
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
23
</td>
</tr>
<tr>
<td style="text-align:left;">
18~21
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
37
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
20
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="使用基礎r套件.html#cb344-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Checking it class and its content</span></span>
<span id="cb344-2"><a href="使用基礎r套件.html#cb344-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(res_table)</span></code></pre></div>
<pre class="output"><code>## [1] &quot;table&quot;</code></pre>
</div>
<div id="by-tapply" class="section level4 hasAnchor" number="5.2.10.2">
<h4><span class="header-section-number">5.2.10.2</span> (2) by <code>tapply()</code><a href="使用基礎r套件.html#by-tapply" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>用<code>tapply()</code>來做兩個變數交叉分析的語法如下，必須要把兩個Vector包在一個<code>list()</code>中。其他不變。兩個變項用<code>tapply()</code>交叉分析後的結果，變數型態會變成<code>matrix</code>。前者用<code>table()</code>來交叉分析的仍是<code>table</code>型態。</p>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="使用基礎r套件.html#cb346-1" aria-hidden="true" tabindex="-1"></a>res_tapply <span class="ot">&lt;-</span> <span class="fu">tapply</span>(df<span class="sc">$</span>編號, <span class="fu">list</span>(df<span class="sc">$</span>time, df<span class="sc">$</span>region), length)</span>
<span id="cb346-2"><a href="使用基礎r套件.html#cb346-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(res_tapply)</span></code></pre></div>
<pre class="output"><code>## [1] &quot;matrix&quot; &quot;array&quot;</code></pre>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="使用基礎r套件.html#cb348-1" aria-hidden="true" tabindex="-1"></a>res_tapply</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
中山
</th>
<th style="text-align:right;">
中正
</th>
<th style="text-align:right;">
信義
</th>
<th style="text-align:right;">
內湖
</th>
<th style="text-align:right;">
北投
</th>
<th style="text-align:right;">
南港
</th>
<th style="text-align:right;">
士林
</th>
<th style="text-align:right;">
大同
</th>
<th style="text-align:right;">
大安
</th>
<th style="text-align:right;">
文山
</th>
<th style="text-align:right;">
松山
</th>
<th style="text-align:right;">
萬華
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:right;">
62
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
29
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
29
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
22
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
21
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:right;">
45
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
34
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:right;">
38
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
35
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
35
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
35
</td>
<td style="text-align:right;">
41
</td>
</tr>
<tr>
<td style="text-align:left;">
11~03
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
49
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
33
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:right;">
43
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
39
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
32
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
26
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:right;">
39
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
23
</td>
</tr>
<tr>
<td style="text-align:left;">
18~21
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
37
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
20
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="使用基礎r套件.html#cb349-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(res)</span></span></code></pre></div>
</div>
<div id="by-dplyrcount" class="section level4 hasAnchor" number="5.2.10.3">
<h4><span class="header-section-number">5.2.10.3</span> (3) by dplyr::count()<a href="使用基礎r套件.html#by-dplyrcount" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>這邊多介紹一個用dplyr套件的<code>count()</code>函式來做交叉分析的方法（未來會常用這個方法，因為dplyr是tidyverse系列套件的核心套件。dplyr的函式第一個參數永遠是該data.frame， 例如<code>count()</code>；後面<code>time</code>與<code>region</code>則是這個data.frame中的兩個變項。不像<code>tapply()</code>或<code>table()</code>的結果一樣，欄與列分別為<code>time</code>與<code>region</code>，count()出來的結果會有兩個變項分別是指定要計數的<code>time</code>與<code>region</code> ，且會新增一個變項<code>n</code>，代表這組數據（<code>time</code> x <code>region</code>）共有幾個。這種表達型態通常稱為long-table（長表）、而<code>tapply()</code>或<code>table()</code> 的結果通常稱為wide-table（寬表）為典型的交叉分析表。</p>
<p>目前大部分的類別資料分析還是會採用交叉分析表的型態，但未來我們要用tidyverse系列套件做大量的數據彙整或視覺化時，都會盡可能想辦法轉為Long-table型態，讓每一欄剛好就是一個變項。只要是tidyverse系列套件所計算出來的資料型態幾乎都是<span style="color:hotpink">類似</span>data.frame的型態，例如觀察<code>count</code>的結果便是<code>"tbl_df"     "tbl"        "data.frame"</code>。</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="使用基礎r套件.html#cb350-1" aria-hidden="true" tabindex="-1"></a><span class="co"># counting by dplyr::count()</span></span>
<span id="cb350-2"><a href="使用基礎r套件.html#cb350-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb350-3"><a href="使用基礎r套件.html#cb350-3" aria-hidden="true" tabindex="-1"></a>(res_count <span class="ot">&lt;-</span> <span class="fu">count</span>(df, time, region)) </span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
time
</th>
<th style="text-align:left;">
region
</th>
<th style="text-align:right;">
n
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
62
</td>
</tr>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
中正
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
信義
</td>
<td style="text-align:right;">
27
</td>
</tr>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
內湖
</td>
<td style="text-align:right;">
20
</td>
</tr>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
北投
</td>
<td style="text-align:right;">
24
</td>
</tr>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
南港
</td>
<td style="text-align:right;">
19
</td>
</tr>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
士林
</td>
<td style="text-align:right;">
28
</td>
</tr>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
大同
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
大安
</td>
<td style="text-align:right;">
24
</td>
</tr>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
文山
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
松山
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
萬華
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
26
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:left;">
中正
</td>
<td style="text-align:right;">
22
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:left;">
信義
</td>
<td style="text-align:right;">
12
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:left;">
內湖
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:left;">
北投
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:left;">
南港
</td>
<td style="text-align:right;">
12
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:left;">
士林
</td>
<td style="text-align:right;">
29
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:left;">
大同
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:left;">
大安
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:left;">
文山
</td>
<td style="text-align:right;">
14
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:left;">
松山
</td>
<td style="text-align:right;">
13
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:left;">
萬華
</td>
<td style="text-align:right;">
29
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
22
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:left;">
中正
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:left;">
信義
</td>
<td style="text-align:right;">
11
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:left;">
內湖
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:left;">
北投
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:left;">
南港
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:left;">
士林
</td>
<td style="text-align:right;">
14
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:left;">
大同
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:left;">
大安
</td>
<td style="text-align:right;">
14
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:left;">
文山
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:left;">
松山
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:left;">
萬華
</td>
<td style="text-align:right;">
22
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
20
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
中正
</td>
<td style="text-align:right;">
19
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
信義
</td>
<td style="text-align:right;">
13
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
內湖
</td>
<td style="text-align:right;">
16
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
北投
</td>
<td style="text-align:right;">
24
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
南港
</td>
<td style="text-align:right;">
13
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
士林
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
大同
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
大安
</td>
<td style="text-align:right;">
19
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
文山
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
松山
</td>
<td style="text-align:right;">
11
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
萬華
</td>
<td style="text-align:right;">
21
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
45
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
中正
</td>
<td style="text-align:right;">
27
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
信義
</td>
<td style="text-align:right;">
20
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
內湖
</td>
<td style="text-align:right;">
27
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
北投
</td>
<td style="text-align:right;">
22
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
南港
</td>
<td style="text-align:right;">
16
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
士林
</td>
<td style="text-align:right;">
24
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
大同
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
大安
</td>
<td style="text-align:right;">
31
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
文山
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
松山
</td>
<td style="text-align:right;">
24
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
萬華
</td>
<td style="text-align:right;">
34
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
38
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
中正
</td>
<td style="text-align:right;">
20
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
信義
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
內湖
</td>
<td style="text-align:right;">
33
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
北投
</td>
<td style="text-align:right;">
35
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
南港
</td>
<td style="text-align:right;">
19
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
士林
</td>
<td style="text-align:right;">
35
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
大同
</td>
<td style="text-align:right;">
12
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
大安
</td>
<td style="text-align:right;">
34
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
文山
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
松山
</td>
<td style="text-align:right;">
35
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
萬華
</td>
<td style="text-align:right;">
41
</td>
</tr>
<tr>
<td style="text-align:left;">
11~03
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
30
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:left;">
中正
</td>
<td style="text-align:right;">
25
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:left;">
信義
</td>
<td style="text-align:right;">
20
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:left;">
內湖
</td>
<td style="text-align:right;">
26
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:left;">
北投
</td>
<td style="text-align:right;">
34
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:left;">
南港
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:left;">
士林
</td>
<td style="text-align:right;">
46
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:left;">
大同
</td>
<td style="text-align:right;">
12
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:left;">
大安
</td>
<td style="text-align:right;">
49
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:left;">
文山
</td>
<td style="text-align:right;">
25
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:left;">
松山
</td>
<td style="text-align:right;">
23
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:left;">
萬華
</td>
<td style="text-align:right;">
33
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
43
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:left;">
中正
</td>
<td style="text-align:right;">
19
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:left;">
信義
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:left;">
內湖
</td>
<td style="text-align:right;">
39
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:left;">
北投
</td>
<td style="text-align:right;">
32
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:left;">
南港
</td>
<td style="text-align:right;">
20
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:left;">
士林
</td>
<td style="text-align:right;">
40
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:left;">
大同
</td>
<td style="text-align:right;">
26
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:left;">
大安
</td>
<td style="text-align:right;">
32
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:left;">
文山
</td>
<td style="text-align:right;">
19
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:left;">
松山
</td>
<td style="text-align:right;">
22
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:left;">
萬華
</td>
<td style="text-align:right;">
32
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
21
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:left;">
中正
</td>
<td style="text-align:right;">
19
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:left;">
信義
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:left;">
內湖
</td>
<td style="text-align:right;">
24
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:left;">
北投
</td>
<td style="text-align:right;">
33
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:left;">
南港
</td>
<td style="text-align:right;">
11
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:left;">
士林
</td>
<td style="text-align:right;">
30
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:left;">
大同
</td>
<td style="text-align:right;">
13
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:left;">
大安
</td>
<td style="text-align:right;">
25
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:left;">
文山
</td>
<td style="text-align:right;">
16
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:left;">
松山
</td>
<td style="text-align:right;">
20
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:left;">
萬華
</td>
<td style="text-align:right;">
26
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
39
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:left;">
中正
</td>
<td style="text-align:right;">
42
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:left;">
信義
</td>
<td style="text-align:right;">
23
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:left;">
內湖
</td>
<td style="text-align:right;">
22
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:left;">
北投
</td>
<td style="text-align:right;">
40
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:left;">
南港
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:left;">
士林
</td>
<td style="text-align:right;">
31
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:left;">
大同
</td>
<td style="text-align:right;">
13
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:left;">
大安
</td>
<td style="text-align:right;">
23
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:left;">
文山
</td>
<td style="text-align:right;">
23
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:left;">
松山
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:left;">
萬華
</td>
<td style="text-align:right;">
23
</td>
</tr>
<tr>
<td style="text-align:left;">
18~21
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
40
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:left;">
中正
</td>
<td style="text-align:right;">
13
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:left;">
信義
</td>
<td style="text-align:right;">
22
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:left;">
內湖
</td>
<td style="text-align:right;">
34
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:left;">
北投
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:left;">
南港
</td>
<td style="text-align:right;">
20
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:left;">
士林
</td>
<td style="text-align:right;">
41
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:left;">
大同
</td>
<td style="text-align:right;">
13
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:left;">
大安
</td>
<td style="text-align:right;">
26
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:left;">
文山
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:left;">
松山
</td>
<td style="text-align:right;">
25
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:left;">
萬華
</td>
<td style="text-align:right;">
37
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
33
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:left;">
中正
</td>
<td style="text-align:right;">
20
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:left;">
信義
</td>
<td style="text-align:right;">
16
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:left;">
內湖
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:left;">
北投
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:left;">
南港
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:left;">
士林
</td>
<td style="text-align:right;">
23
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:left;">
大同
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:left;">
大安
</td>
<td style="text-align:right;">
12
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:left;">
文山
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:left;">
松山
</td>
<td style="text-align:right;">
14
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:left;">
萬華
</td>
<td style="text-align:right;">
20
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="使用基礎r套件.html#cb351-1" aria-hidden="true" tabindex="-1"></a>(res_count <span class="ot">&lt;-</span> <span class="fu">count</span>(df, time, region)) <span class="sc">%&gt;%</span> <span class="fu">datatable</span>()</span></code></pre></div>
<div id="htmlwidget-3618cc711c53584f1a15" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-3618cc711c53584f1a15">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146"],["00~02","00~02","00~02","00~02","00~02","00~02","00~02","00~02","00~02","00~02","00~02","00~02","02~04","02~04","02~04","02~04","02~04","02~04","02~04","02~04","02~04","02~04","02~04","02~04","04~06","04~06","04~06","04~06","04~06","04~06","04~06","04~06","04~06","04~06","04~06","04~06","06~08","06~08","06~08","06~08","06~08","06~08","06~08","06~08","06~08","06~08","06~08","06~08","08~10","08~10","08~10","08~10","08~10","08~10","08~10","08~10","08~10","08~10","08~10","08~10","10~12","10~12","10~12","10~12","10~12","10~12","10~12","10~12","10~12","10~12","10~12","10~12","11~03","12~14","12~14","12~14","12~14","12~14","12~14","12~14","12~14","12~14","12~14","12~14","12~14","14~16","14~16","14~16","14~16","14~16","14~16","14~16","14~16","14~16","14~16","14~16","14~16","16~18","16~18","16~18","16~18","16~18","16~18","16~18","16~18","16~18","16~18","16~18","16~18","18~20","18~20","18~20","18~20","18~20","18~20","18~20","18~20","18~20","18~20","18~20","18~20","18~21","20~22","20~22","20~22","20~22","20~22","20~22","20~22","20~22","20~22","20~22","20~22","20~22","22~24","22~24","22~24","22~24","22~24","22~24","22~24","22~24","22~24","22~24","22~24","22~24"],["中山","中正","信義","內湖","北投","南港","士林","大同","大安","文山","松山","萬華","中山","中正","信義","內湖","北投","南港","士林","大同","大安","文山","松山","萬華","中山","中正","信義","內湖","北投","南港","士林","大同","大安","文山","松山","萬華","中山","中正","信義","內湖","北投","南港","士林","大同","大安","文山","松山","萬華","中山","中正","信義","內湖","北投","南港","士林","大同","大安","文山","松山","萬華","中山","中正","信義","內湖","北投","南港","士林","大同","大安","文山","松山","萬華","中山","中山","中正","信義","內湖","北投","南港","士林","大同","大安","文山","松山","萬華","中山","中正","信義","內湖","北投","南港","士林","大同","大安","文山","松山","萬華","中山","中正","信義","內湖","北投","南港","士林","大同","大安","文山","松山","萬華","中山","中正","信義","內湖","北投","南港","士林","大同","大安","文山","松山","萬華","中山","中山","中正","信義","內湖","北投","南港","士林","大同","大安","文山","松山","萬華","中山","中正","信義","內湖","北投","南港","士林","大同","大安","文山","松山","萬華"],[62,15,27,20,24,19,28,15,24,17,4,17,26,22,12,15,17,12,29,10,15,14,13,29,22,7,11,15,17,6,14,15,14,8,5,22,20,19,13,16,24,13,17,9,19,9,11,21,45,27,20,27,22,16,24,17,31,18,24,34,38,20,18,33,35,19,35,12,34,18,35,41,1,30,25,20,26,34,15,46,12,49,25,23,33,43,19,18,39,32,20,40,26,32,19,22,32,21,19,8,24,33,11,30,13,25,16,20,26,39,42,23,22,40,18,31,13,23,23,17,23,1,40,13,22,34,17,20,41,13,26,15,25,37,33,20,16,18,15,9,23,9,12,17,14,20]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>time<\/th>\n      <th>region<\/th>\n      <th>n<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":3},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="使用基礎r套件.html#cb352-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(res_count)    <span class="co"># &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</span></span></code></pre></div>
<pre class="output"><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<p>那長表列可以轉為寬表嗎？可以，tidyverse系列套件中的tidyr套件有個函式<code>spread()</code>可以接著把某個變項展開為欄。例如原本上述的列是時間與行政區的交叉組合，但我可以把行政區展開為欄、或者把時間展開為欄。<code>spread(res_count, region, n, fill = 0)</code> 有四個參數，遵循tidyverse系列套件的規則，第一個位置為data.frame，第二個參數則是要被展開至欄的變項這裡為<code>region</code>，第三個參數則是因應<code>region</code>被展開後，那中間交叉分析的數值就是n，最後一個參數是避免spread時有些交叉組是沒有資料的，因此<code>fill=0</code>可以指定，如果某個<code>time</code> x <code>region</code>的交叉組別是沒資料的，就填上<code>0</code>，也有可能是用<code>fill=NA</code>填上<code>NA</code>。以下的例子中也提供了將<code>time</code> 展開至欄的寫法供參考。</p>
<p>展開後的資料型態和前者計數後的資料型態一樣，都是<code>"tbl_df"     "tbl"        "data.frame"</code>。這是為什麼tidyverse系列的套件逐漸變成R的顯學的原因之一。</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="使用基礎r套件.html#cb354-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb354-2"><a href="使用基礎r套件.html#cb354-2" aria-hidden="true" tabindex="-1"></a><span class="co"># spreading the region into columns</span></span>
<span id="cb354-3"><a href="使用基礎r套件.html#cb354-3" aria-hidden="true" tabindex="-1"></a>(res_count_spread <span class="ot">&lt;-</span> <span class="fu">spread</span>(res_count, region, n, <span class="at">fill =</span> <span class="dv">0</span>))</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
time
</th>
<th style="text-align:right;">
中山
</th>
<th style="text-align:right;">
中正
</th>
<th style="text-align:right;">
信義
</th>
<th style="text-align:right;">
內湖
</th>
<th style="text-align:right;">
北投
</th>
<th style="text-align:right;">
南港
</th>
<th style="text-align:right;">
士林
</th>
<th style="text-align:right;">
大同
</th>
<th style="text-align:right;">
大安
</th>
<th style="text-align:right;">
文山
</th>
<th style="text-align:right;">
松山
</th>
<th style="text-align:right;">
萬華
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:right;">
62
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
29
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
29
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
22
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
21
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:right;">
45
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
34
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:right;">
38
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
35
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
35
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
35
</td>
<td style="text-align:right;">
41
</td>
</tr>
<tr>
<td style="text-align:left;">
11~03
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
49
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
33
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:right;">
43
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
39
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
32
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
26
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:right;">
39
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
23
</td>
</tr>
<tr>
<td style="text-align:left;">
18~21
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
37
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
20
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="使用基礎r套件.html#cb355-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(res_count_spread)</span></code></pre></div>
<pre class="output"><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="使用基礎r套件.html#cb357-1" aria-hidden="true" tabindex="-1"></a><span class="co"># spreading the time into columns</span></span>
<span id="cb357-2"><a href="使用基礎r套件.html#cb357-2" aria-hidden="true" tabindex="-1"></a><span class="co"># res_count_spread &lt;- spread(res_count, time, n, fill = 0)</span></span>
<span id="cb357-3"><a href="使用基礎r套件.html#cb357-3" aria-hidden="true" tabindex="-1"></a>res_count_spread</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
time
</th>
<th style="text-align:right;">
中山
</th>
<th style="text-align:right;">
中正
</th>
<th style="text-align:right;">
信義
</th>
<th style="text-align:right;">
內湖
</th>
<th style="text-align:right;">
北投
</th>
<th style="text-align:right;">
南港
</th>
<th style="text-align:right;">
士林
</th>
<th style="text-align:right;">
大同
</th>
<th style="text-align:right;">
大安
</th>
<th style="text-align:right;">
文山
</th>
<th style="text-align:right;">
松山
</th>
<th style="text-align:right;">
萬華
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:right;">
62
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
29
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
29
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
22
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
21
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:right;">
45
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
34
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:right;">
38
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
35
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
35
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
35
</td>
<td style="text-align:right;">
41
</td>
</tr>
<tr>
<td style="text-align:left;">
11~03
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
49
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
33
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:right;">
43
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
39
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
32
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
26
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:right;">
39
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
23
</td>
</tr>
<tr>
<td style="text-align:left;">
18~21
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
37
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
20
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="使用基礎r套件.html#cb358-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ??dplyr::count</span></span></code></pre></div>
<p>寬表格亦可用tidyr的<code>gather()</code>函式轉回長表格型態：</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="使用基礎r套件.html#cb359-1" aria-hidden="true" tabindex="-1"></a>(long_table <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">gather</span>(res_count_spread, region, n, <span class="sc">-</span>time))</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
time
</th>
<th style="text-align:left;">
region
</th>
<th style="text-align:right;">
n
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
62
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
26
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
22
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
20
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
45
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
38
</td>
</tr>
<tr>
<td style="text-align:left;">
11~03
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
30
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
43
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
21
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
39
</td>
</tr>
<tr>
<td style="text-align:left;">
18~21
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
40
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:left;">
中山
</td>
<td style="text-align:right;">
33
</td>
</tr>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
中正
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:left;">
中正
</td>
<td style="text-align:right;">
22
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:left;">
中正
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
中正
</td>
<td style="text-align:right;">
19
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
中正
</td>
<td style="text-align:right;">
27
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
中正
</td>
<td style="text-align:right;">
20
</td>
</tr>
<tr>
<td style="text-align:left;">
11~03
</td>
<td style="text-align:left;">
中正
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:left;">
中正
</td>
<td style="text-align:right;">
25
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:left;">
中正
</td>
<td style="text-align:right;">
19
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:left;">
中正
</td>
<td style="text-align:right;">
19
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:left;">
中正
</td>
<td style="text-align:right;">
42
</td>
</tr>
<tr>
<td style="text-align:left;">
18~21
</td>
<td style="text-align:left;">
中正
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:left;">
中正
</td>
<td style="text-align:right;">
13
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:left;">
中正
</td>
<td style="text-align:right;">
20
</td>
</tr>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
信義
</td>
<td style="text-align:right;">
27
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:left;">
信義
</td>
<td style="text-align:right;">
12
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:left;">
信義
</td>
<td style="text-align:right;">
11
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
信義
</td>
<td style="text-align:right;">
13
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
信義
</td>
<td style="text-align:right;">
20
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
信義
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:left;">
11~03
</td>
<td style="text-align:left;">
信義
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:left;">
信義
</td>
<td style="text-align:right;">
20
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:left;">
信義
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:left;">
信義
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:left;">
信義
</td>
<td style="text-align:right;">
23
</td>
</tr>
<tr>
<td style="text-align:left;">
18~21
</td>
<td style="text-align:left;">
信義
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:left;">
信義
</td>
<td style="text-align:right;">
22
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:left;">
信義
</td>
<td style="text-align:right;">
16
</td>
</tr>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
內湖
</td>
<td style="text-align:right;">
20
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:left;">
內湖
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:left;">
內湖
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
內湖
</td>
<td style="text-align:right;">
16
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
內湖
</td>
<td style="text-align:right;">
27
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
內湖
</td>
<td style="text-align:right;">
33
</td>
</tr>
<tr>
<td style="text-align:left;">
11~03
</td>
<td style="text-align:left;">
內湖
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:left;">
內湖
</td>
<td style="text-align:right;">
26
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:left;">
內湖
</td>
<td style="text-align:right;">
39
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:left;">
內湖
</td>
<td style="text-align:right;">
24
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:left;">
內湖
</td>
<td style="text-align:right;">
22
</td>
</tr>
<tr>
<td style="text-align:left;">
18~21
</td>
<td style="text-align:left;">
內湖
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:left;">
內湖
</td>
<td style="text-align:right;">
34
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:left;">
內湖
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
北投
</td>
<td style="text-align:right;">
24
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:left;">
北投
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:left;">
北投
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
北投
</td>
<td style="text-align:right;">
24
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
北投
</td>
<td style="text-align:right;">
22
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
北投
</td>
<td style="text-align:right;">
35
</td>
</tr>
<tr>
<td style="text-align:left;">
11~03
</td>
<td style="text-align:left;">
北投
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:left;">
北投
</td>
<td style="text-align:right;">
34
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:left;">
北投
</td>
<td style="text-align:right;">
32
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:left;">
北投
</td>
<td style="text-align:right;">
33
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:left;">
北投
</td>
<td style="text-align:right;">
40
</td>
</tr>
<tr>
<td style="text-align:left;">
18~21
</td>
<td style="text-align:left;">
北投
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:left;">
北投
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:left;">
北投
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
南港
</td>
<td style="text-align:right;">
19
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:left;">
南港
</td>
<td style="text-align:right;">
12
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:left;">
南港
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
南港
</td>
<td style="text-align:right;">
13
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
南港
</td>
<td style="text-align:right;">
16
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
南港
</td>
<td style="text-align:right;">
19
</td>
</tr>
<tr>
<td style="text-align:left;">
11~03
</td>
<td style="text-align:left;">
南港
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:left;">
南港
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:left;">
南港
</td>
<td style="text-align:right;">
20
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:left;">
南港
</td>
<td style="text-align:right;">
11
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:left;">
南港
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:left;">
18~21
</td>
<td style="text-align:left;">
南港
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:left;">
南港
</td>
<td style="text-align:right;">
20
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:left;">
南港
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
士林
</td>
<td style="text-align:right;">
28
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:left;">
士林
</td>
<td style="text-align:right;">
29
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:left;">
士林
</td>
<td style="text-align:right;">
14
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
士林
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
士林
</td>
<td style="text-align:right;">
24
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
士林
</td>
<td style="text-align:right;">
35
</td>
</tr>
<tr>
<td style="text-align:left;">
11~03
</td>
<td style="text-align:left;">
士林
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:left;">
士林
</td>
<td style="text-align:right;">
46
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:left;">
士林
</td>
<td style="text-align:right;">
40
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:left;">
士林
</td>
<td style="text-align:right;">
30
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:left;">
士林
</td>
<td style="text-align:right;">
31
</td>
</tr>
<tr>
<td style="text-align:left;">
18~21
</td>
<td style="text-align:left;">
士林
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:left;">
士林
</td>
<td style="text-align:right;">
41
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:left;">
士林
</td>
<td style="text-align:right;">
23
</td>
</tr>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
大同
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:left;">
大同
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:left;">
大同
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
大同
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
大同
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
大同
</td>
<td style="text-align:right;">
12
</td>
</tr>
<tr>
<td style="text-align:left;">
11~03
</td>
<td style="text-align:left;">
大同
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:left;">
大同
</td>
<td style="text-align:right;">
12
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:left;">
大同
</td>
<td style="text-align:right;">
26
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:left;">
大同
</td>
<td style="text-align:right;">
13
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:left;">
大同
</td>
<td style="text-align:right;">
13
</td>
</tr>
<tr>
<td style="text-align:left;">
18~21
</td>
<td style="text-align:left;">
大同
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:left;">
大同
</td>
<td style="text-align:right;">
13
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:left;">
大同
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
大安
</td>
<td style="text-align:right;">
24
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:left;">
大安
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:left;">
大安
</td>
<td style="text-align:right;">
14
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
大安
</td>
<td style="text-align:right;">
19
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
大安
</td>
<td style="text-align:right;">
31
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
大安
</td>
<td style="text-align:right;">
34
</td>
</tr>
<tr>
<td style="text-align:left;">
11~03
</td>
<td style="text-align:left;">
大安
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:left;">
大安
</td>
<td style="text-align:right;">
49
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:left;">
大安
</td>
<td style="text-align:right;">
32
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:left;">
大安
</td>
<td style="text-align:right;">
25
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:left;">
大安
</td>
<td style="text-align:right;">
23
</td>
</tr>
<tr>
<td style="text-align:left;">
18~21
</td>
<td style="text-align:left;">
大安
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:left;">
大安
</td>
<td style="text-align:right;">
26
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:left;">
大安
</td>
<td style="text-align:right;">
12
</td>
</tr>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
文山
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:left;">
文山
</td>
<td style="text-align:right;">
14
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:left;">
文山
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
文山
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
文山
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
文山
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:left;">
11~03
</td>
<td style="text-align:left;">
文山
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:left;">
文山
</td>
<td style="text-align:right;">
25
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:left;">
文山
</td>
<td style="text-align:right;">
19
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:left;">
文山
</td>
<td style="text-align:right;">
16
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:left;">
文山
</td>
<td style="text-align:right;">
23
</td>
</tr>
<tr>
<td style="text-align:left;">
18~21
</td>
<td style="text-align:left;">
文山
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:left;">
文山
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:left;">
文山
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
松山
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:left;">
松山
</td>
<td style="text-align:right;">
13
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:left;">
松山
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
松山
</td>
<td style="text-align:right;">
11
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
松山
</td>
<td style="text-align:right;">
24
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
松山
</td>
<td style="text-align:right;">
35
</td>
</tr>
<tr>
<td style="text-align:left;">
11~03
</td>
<td style="text-align:left;">
松山
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:left;">
松山
</td>
<td style="text-align:right;">
23
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:left;">
松山
</td>
<td style="text-align:right;">
22
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:left;">
松山
</td>
<td style="text-align:right;">
20
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:left;">
松山
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
18~21
</td>
<td style="text-align:left;">
松山
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:left;">
松山
</td>
<td style="text-align:right;">
25
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:left;">
松山
</td>
<td style="text-align:right;">
14
</td>
</tr>
<tr>
<td style="text-align:left;">
00~02
</td>
<td style="text-align:left;">
萬華
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
02~04
</td>
<td style="text-align:left;">
萬華
</td>
<td style="text-align:right;">
29
</td>
</tr>
<tr>
<td style="text-align:left;">
04~06
</td>
<td style="text-align:left;">
萬華
</td>
<td style="text-align:right;">
22
</td>
</tr>
<tr>
<td style="text-align:left;">
06~08
</td>
<td style="text-align:left;">
萬華
</td>
<td style="text-align:right;">
21
</td>
</tr>
<tr>
<td style="text-align:left;">
08~10
</td>
<td style="text-align:left;">
萬華
</td>
<td style="text-align:right;">
34
</td>
</tr>
<tr>
<td style="text-align:left;">
10~12
</td>
<td style="text-align:left;">
萬華
</td>
<td style="text-align:right;">
41
</td>
</tr>
<tr>
<td style="text-align:left;">
11~03
</td>
<td style="text-align:left;">
萬華
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
12~14
</td>
<td style="text-align:left;">
萬華
</td>
<td style="text-align:right;">
33
</td>
</tr>
<tr>
<td style="text-align:left;">
14~16
</td>
<td style="text-align:left;">
萬華
</td>
<td style="text-align:right;">
32
</td>
</tr>
<tr>
<td style="text-align:left;">
16~18
</td>
<td style="text-align:left;">
萬華
</td>
<td style="text-align:right;">
26
</td>
</tr>
<tr>
<td style="text-align:left;">
18~20
</td>
<td style="text-align:left;">
萬華
</td>
<td style="text-align:right;">
23
</td>
</tr>
<tr>
<td style="text-align:left;">
18~21
</td>
<td style="text-align:left;">
萬華
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
20~22
</td>
<td style="text-align:left;">
萬華
</td>
<td style="text-align:right;">
37
</td>
</tr>
<tr>
<td style="text-align:left;">
22~24
</td>
<td style="text-align:left;">
萬華
</td>
<td style="text-align:right;">
20
</td>
</tr>
</tbody>
</table>
<p><strong><em>Practice</em></strong> 使用<code>count()</code>來計數</p>
<p>請練習看看如果用<code>count()</code>來計數單一變項，如前述的<code>region</code>、<code>time</code>或前面練習中新產生的<code>month</code>。</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="使用基礎r套件.html#cb360-1" aria-hidden="true" tabindex="-1"></a><span class="co"># YOUR CODE SHOULD BE HERE</span></span></code></pre></div>
</div>
</div>
<div id="vii.-繪圖-plotting" class="section level3 hasAnchor" number="5.2.11">
<h3><span class="header-section-number">5.2.11</span> VII. 繪圖 Plotting<a href="使用基礎r套件.html#vii.-繪圖-plotting" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>通常這種類別資料交叉分析最常用的圖表型態之一便是Mosaic Plot（但事實上Mosaic Plot不見能夠被一眼就了解）。我們可以把交叉分析後的變項<code>res_table</code>直接用MosaicPlot來繪圖。</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="使用基礎r套件.html#cb361-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mosaicplot() to plot 2-dim categorical vars.</span></span>
<span id="cb361-2"><a href="使用基礎r套件.html#cb361-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mosaicplot</span>(res_table)</span></code></pre></div>
<p><img src="R-for-Data-Journalism_files/figure-html/unnamed-chunk-82-1.png" width="672" /></p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="使用基礎r套件.html#cb362-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add argument main (figure title)</span></span>
<span id="cb362-2"><a href="使用基礎r套件.html#cb362-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mosaicplot</span>(res_table, <span class="at">main=</span><span class="st">&quot;mosaic plot&quot;</span>)</span></code></pre></div>
<p><img src="R-for-Data-Journalism_files/figure-html/unnamed-chunk-82-2.png" width="672" /></p>
<div id="無法顯示中文" class="section level4 hasAnchor" number="5.2.11.1">
<h4><span class="header-section-number">5.2.11.1</span> (1) 無法顯示中文<a href="使用基礎r套件.html#無法顯示中文" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>大部分的視覺化套件都無法順利顯示中文，除非特別指定所要用的中文字型。這方面網路上可以找到很多的說明，但非常討厭的是，幾乎每換一套視覺化工具，換一套語言，就有不同的中文字體指定方式。例如用base的<code>plot()</code>來繪圖或用<code>ggplot()</code>的中文字型指定方法便不同，且軸上面有中文、圖標有中文、或者圖內有中文都要分開指定，非常討人厭。</p>
<p>Mosaic Plot屬於base R的<code>plot()</code>，其中文指定方法要指定在繪圖前的<code>par()</code>函式中（<code>par</code>為parameter的意思），指定方法為<code>par(family=('Heiti TC Light'))</code>，Heiti TC Light為字體名稱，為OSX上在用的黑體細字，STKaiti則為標楷體。然後，<code>par()</code>和<code>mosaicplot()</code>兩個函式要「同時執行」，也就是請你直接用shift-cmd(ctrl)-Enter執行整個code-cell，或者將該兩個函式選起來一次執行。</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="使用基礎r套件.html#cb363-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">family=</span>(<span class="st">&#39;STKaiti&#39;</span>))</span>
<span id="cb363-2"><a href="使用基礎r套件.html#cb363-2" aria-hidden="true" tabindex="-1"></a><span class="co"># par(family=(&#39;Heiti TC Light&#39;))</span></span>
<span id="cb363-3"><a href="使用基礎r套件.html#cb363-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mosaicplot</span>(res_table, <span class="at">main=</span><span class="st">&quot;mosaic plot&quot;</span>, <span class="at">color=</span>T)</span></code></pre></div>
<p><img src="R-for-Data-Journalism_files/figure-html/unnamed-chunk-83-1.png" width="672" /></p>
</div>
<div id="自訂顏色" class="section level4 hasAnchor" number="5.2.11.2">
<h4><span class="header-section-number">5.2.11.2</span> (2) 自訂顏色<a href="使用基礎r套件.html#自訂顏色" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>目前顏色實在過醜，你可以自訂顏色指給<code>mosaicplot()</code>。例如我底下便產製了12種顏色後，將其作為<code>mosaicplot()</code>的參數</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="使用基礎r套件.html#cb364-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up color by yourself.</span></span>
<span id="cb364-2"><a href="使用基礎r套件.html#cb364-2" aria-hidden="true" tabindex="-1"></a>colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;#D0104C&#39;</span>, <span class="st">&#39;#DB4D6D&#39;</span>, <span class="st">&#39;#E83015&#39;</span>,  <span class="st">&#39;#F75C2F&#39;</span>,</span>
<span id="cb364-3"><a href="使用基礎r套件.html#cb364-3" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;#E79460&#39;</span>, <span class="st">&#39;#E98B2A&#39;</span>, <span class="st">&#39;#9B6E23&#39;</span>, <span class="st">&#39;#F7C242&#39;</span>,</span>
<span id="cb364-4"><a href="使用基礎r套件.html#cb364-4" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;#BEC23F&#39;</span>, <span class="st">&#39;#90B44B&#39;</span>, <span class="st">&#39;#66BAB7&#39;</span>, <span class="st">&#39;#1E88A8&#39;</span>)</span>
<span id="cb364-5"><a href="使用基礎r套件.html#cb364-5" aria-hidden="true" tabindex="-1"></a><span class="co"># par(family=(&#39;STKaiti&#39;))</span></span>
<span id="cb364-6"><a href="使用基礎r套件.html#cb364-6" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">family=</span>(<span class="st">&#39;Heiti TC Light&#39;</span>))</span>
<span id="cb364-7"><a href="使用基礎r套件.html#cb364-7" aria-hidden="true" tabindex="-1"></a><span class="fu">mosaicplot</span>(res_table, <span class="at">color=</span>colors, <span class="at">border=</span><span class="dv">0</span>, <span class="at">off =</span> <span class="dv">3</span>,</span>
<span id="cb364-8"><a href="使用基礎r套件.html#cb364-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">main=</span><span class="st">&quot;Theft rate of Taipei city (region by hour)&quot;</span>)</span></code></pre></div>
<p><img src="R-for-Data-Journalism_files/figure-html/unnamed-chunk-84-1.png" width="672" /></p>
</div>
</div>
<div id="option-視覺化殘差分析" class="section level3 hasAnchor" number="5.2.12">
<h3><span class="header-section-number">5.2.12</span> (Option) 視覺化殘差分析<a href="使用基礎r套件.html#option-視覺化殘差分析" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="使用基礎r套件.html#cb365-1" aria-hidden="true" tabindex="-1"></a><span class="co"># par(family=(&#39;STKaiti&#39;))</span></span>
<span id="cb365-2"><a href="使用基礎r套件.html#cb365-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">family=</span>(<span class="st">&#39;Heiti TC Light&#39;</span>))</span>
<span id="cb365-3"><a href="使用基礎r套件.html#cb365-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mosaicplot</span>(res_table, <span class="at">color=</span>T, <span class="at">shade =</span> T, <span class="at">border=</span><span class="dv">0</span>, <span class="at">off =</span> <span class="dv">3</span>,</span>
<span id="cb365-4"><a href="使用基礎r套件.html#cb365-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">main=</span><span class="st">&quot;Theft rate of Taipei city (region by hour)&quot;</span>)</span></code></pre></div>
<p><img src="R-for-Data-Journalism_files/figure-html/unnamed-chunk-85-1.png" width="672" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="dataframe.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-manipulation-wity-tidyverse.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/R20-base-R-Data-Analysis.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R for Data Journalism.pdf", "R for Data Journalism.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
