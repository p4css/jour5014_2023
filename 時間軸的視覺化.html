<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6.2 時間軸的視覺化 | R for Data Journalism</title>
  <meta name="description" content="For my Class teaching how to make data news reports" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="6.2 時間軸的視覺化 | R for Data Journalism" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="For my Class teaching how to make data news reports" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6.2 時間軸的視覺化 | R for Data Journalism" />
  
  <meta name="twitter:description" content="For my Class teaching how to make data news reports" />
  

<meta name="author" content="HSIEH, JI-LUNG" />


<meta name="date" content="2022-05-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="base-to-dplyr-tp-theft.html"/>
<link rel="next" href="eda.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.22/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R for Data Journalism</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="part"><span><b>I R BASIC</b></span></li>
<li class="chapter" data-level="2" data-path="basic.html"><a href="basic.html"><i class="fa fa-check"></i><b>2</b> R語言基礎</a>
<ul>
<li class="chapter" data-level="2.1" data-path="使用rstudio.html"><a href="使用rstudio.html"><i class="fa fa-check"></i><b>2.1</b> 使用RStudio</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="使用rstudio.html"><a href="使用rstudio.html#插入新的程式區"><i class="fa fa-check"></i><b>2.1.1</b> 插入新的程式區</a></li>
<li class="chapter" data-level="2.1.2" data-path="使用rstudio.html"><a href="使用rstudio.html#安裝與載入套件"><i class="fa fa-check"></i><b>2.1.2</b> 安裝與載入套件</a></li>
<li class="chapter" data-level="2.1.3" data-path="使用rstudio.html"><a href="使用rstudio.html#載入所安裝的第三方套件"><i class="fa fa-check"></i><b>2.1.3</b> 載入所安裝的第三方套件</a></li>
<li class="chapter" data-level="2.1.4" data-path="使用rstudio.html"><a href="使用rstudio.html#註解"><i class="fa fa-check"></i><b>2.1.4</b> 註解</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="第一次資料嘗試.html"><a href="第一次資料嘗試.html"><i class="fa fa-check"></i><b>2.2</b> 第一次資料嘗試</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="第一次資料嘗試.html"><a href="第一次資料嘗試.html#載入dcard頁面資料"><i class="fa fa-check"></i><b>2.2.1</b> 載入dcard頁面資料</a></li>
<li class="chapter" data-level="2.2.2" data-path="第一次資料嘗試.html"><a href="第一次資料嘗試.html#讀取台北住宅竊盜點位資料"><i class="fa fa-check"></i><b>2.2.2</b> 讀取台北住宅竊盜點位資料</a></li>
<li class="chapter" data-level="2.2.3" data-path="第一次資料嘗試.html"><a href="第一次資料嘗試.html#讀取先行下載的csv檔"><i class="fa fa-check"></i><b>2.2.3</b> 讀取先行下載的csv檔</a></li>
<li class="chapter" data-level="2.2.4" data-path="第一次資料嘗試.html"><a href="第一次資料嘗試.html#直接從網路載入內政部開放資料"><i class="fa fa-check"></i><b>2.2.4</b> 直接從網路載入內政部開放資料</a></li>
<li class="chapter" data-level="2.2.5" data-path="第一次資料嘗試.html"><a href="第一次資料嘗試.html#獲取ubike即時資料"><i class="fa fa-check"></i><b>2.2.5</b> 獲取ubike即時資料</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>3</b> Vectors</a>
<ul>
<li class="chapter" data-level="3.1" data-path="r-syntax.html"><a href="r-syntax.html"><i class="fa fa-check"></i><b>3.1</b> R Syntax</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="r-syntax.html"><a href="r-syntax.html#assignment"><i class="fa fa-check"></i><b>3.1.1</b> Assignment</a></li>
<li class="chapter" data-level="3.1.2" data-path="r-syntax.html"><a href="r-syntax.html#comments-註解"><i class="fa fa-check"></i><b>3.1.2</b> comments 註解</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="basic-operations.html"><a href="basic-operations.html"><i class="fa fa-check"></i><b>3.2</b> Basic operations</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="basic-operations.html"><a href="basic-operations.html#creating"><i class="fa fa-check"></i><b>3.2.1</b> Creating</a></li>
<li class="chapter" data-level="3.2.2" data-path="basic-operations.html"><a href="basic-operations.html#viewing"><i class="fa fa-check"></i><b>3.2.2</b> Viewing</a></li>
<li class="chapter" data-level="3.2.3" data-path="basic-operations.html"><a href="basic-operations.html#subsetting-filtering"><i class="fa fa-check"></i><b>3.2.3</b> Subsetting, filtering</a></li>
<li class="chapter" data-level="3.2.4" data-path="basic-operations.html"><a href="basic-operations.html#deleting"><i class="fa fa-check"></i><b>3.2.4</b> Deleting</a></li>
<li class="chapter" data-level="3.2.5" data-path="basic-operations.html"><a href="basic-operations.html#concatinating"><i class="fa fa-check"></i><b>3.2.5</b> Concatinating</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="calculating-with-vectors.html"><a href="calculating-with-vectors.html"><i class="fa fa-check"></i><b>3.3</b> Calculating with vectors</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="calculating-with-vectors.html"><a href="calculating-with-vectors.html#arithmetic-operations"><i class="fa fa-check"></i><b>3.3.1</b> Arithmetic operations</a></li>
<li class="chapter" data-level="3.3.2" data-path="calculating-with-vectors.html"><a href="calculating-with-vectors.html#logic-comparisons"><i class="fa fa-check"></i><b>3.3.2</b> Logic comparisons</a></li>
<li class="chapter" data-level="3.3.3" data-path="calculating-with-vectors.html"><a href="calculating-with-vectors.html#subsetting-by-logic-comparisons"><i class="fa fa-check"></i><b>3.3.3</b> Subsetting by logic comparisons</a></li>
<li class="chapter" data-level="3.3.4" data-path="calculating-with-vectors.html"><a href="calculating-with-vectors.html#sorting-and-ordering"><i class="fa fa-check"></i><b>3.3.4</b> Sorting and ordering</a></li>
<li class="chapter" data-level="3.3.5" data-path="calculating-with-vectors.html"><a href="calculating-with-vectors.html#built-in-math-functions"><i class="fa fa-check"></i><b>3.3.5</b> Built-in math functions</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data-types.html"><a href="data-types.html"><i class="fa fa-check"></i><b>3.4</b> Data types</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="data-types.html"><a href="data-types.html#checking-data-type"><i class="fa fa-check"></i><b>3.4.1</b> Checking data type</a></li>
<li class="chapter" data-level="3.4.2" data-path="data-types.html"><a href="data-types.html#converting-data-type"><i class="fa fa-check"></i><b>3.4.2</b> Converting data type</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="character-operations.html"><a href="character-operations.html"><i class="fa fa-check"></i><b>3.5</b> Character operations</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dataframe.html"><a href="dataframe.html"><i class="fa fa-check"></i><b>4</b> Dataframe</a>
<ul>
<li class="chapter" data-level="4.1" data-path="基本操作.html"><a href="基本操作.html"><i class="fa fa-check"></i><b>4.1</b> 基本操作</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="基本操作.html"><a href="基本操作.html#產生新的dataframe"><i class="fa fa-check"></i><b>4.1.1</b> 產生新的Dataframe</a></li>
<li class="chapter" data-level="4.1.2" data-path="基本操作.html"><a href="基本操作.html#觀察dataframe"><i class="fa fa-check"></i><b>4.1.2</b> 觀察dataframe</a></li>
<li class="chapter" data-level="4.1.3" data-path="基本操作.html"><a href="基本操作.html#操作dataframe"><i class="fa fa-check"></i><b>4.1.3</b> 操作dataframe</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="簡易繪圖.html"><a href="簡易繪圖.html"><i class="fa fa-check"></i><b>4.2</b> 簡易繪圖</a></li>
<li class="chapter" data-level="4.3" data-path="基本操作使用dplyr.html"><a href="基本操作使用dplyr.html"><i class="fa fa-check"></i><b>4.3</b> 基本操作：使用dplyr</a></li>
<li class="chapter" data-level="4.4" data-path="tibble-data_frame-data.html"><a href="tibble-data_frame-data.html"><i class="fa fa-check"></i><b>4.4</b> tibble, data_frame, data.frame</a></li>
</ul></li>
<li class="part"><span><b>II DATA MANIPULATION</b></span></li>
<li class="chapter" data-level="5" data-path="使用基礎r套件.html"><a href="使用基礎r套件.html"><i class="fa fa-check"></i><b>5</b> 使用基礎R套件</a>
<ul>
<li class="chapter" data-level="5.1" data-path="案例產假支薪跨國跨時比較.html"><a href="案例產假支薪跨國跨時比較.html"><i class="fa fa-check"></i><b>5.1</b> 案例：產假支薪跨國跨時比較</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="案例產假支薪跨國跨時比較.html"><a href="案例產假支薪跨國跨時比較.html#reading-.xlsx-by-readxl-package"><i class="fa fa-check"></i><b>5.1.1</b> Reading .xlsx by readxl package</a></li>
<li class="chapter" data-level="5.1.2" data-path="案例產假支薪跨國跨時比較.html"><a href="案例產假支薪跨國跨時比較.html#previewing-data-by-view-class-dim-str-summary-and-names"><i class="fa fa-check"></i><b>5.1.2</b> Previewing data by <code>View()</code>, <code>class()</code>, <code>dim()</code>, <code>str()</code>, <code>summary()</code> and <code>names()</code></a></li>
<li class="chapter" data-level="5.1.3" data-path="案例產假支薪跨國跨時比較.html"><a href="案例產假支薪跨國跨時比較.html#select-variables"><i class="fa fa-check"></i><b>5.1.3</b> Select variables</a></li>
<li class="chapter" data-level="5.1.4" data-path="案例產假支薪跨國跨時比較.html"><a href="案例產假支薪跨國跨時比較.html#check-replace-nas"><i class="fa fa-check"></i><b>5.1.4</b> Check &amp; Replace NAs</a></li>
<li class="chapter" data-level="5.1.5" data-path="案例產假支薪跨國跨時比較.html"><a href="案例產假支薪跨國跨時比較.html#filtering-data"><i class="fa fa-check"></i><b>5.1.5</b> Filtering data</a></li>
<li class="chapter" data-level="5.1.6" data-path="案例產假支薪跨國跨時比較.html"><a href="案例產假支薪跨國跨時比較.html#plotting"><i class="fa fa-check"></i><b>5.1.6</b> Plotting</a></li>
<li class="chapter" data-level="5.1.7" data-path="案例產假支薪跨國跨時比較.html"><a href="案例產假支薪跨國跨時比較.html#practice02_1_1-plotting-more"><i class="fa fa-check"></i><b>5.1.7</b> Practice02_1_1 Plotting more</a></li>
<li class="chapter" data-level="5.1.8" data-path="案例產假支薪跨國跨時比較.html"><a href="案例產假支薪跨國跨時比較.html#practice02_2_2-selecting-and-filtering-by-dplyr-i"><i class="fa fa-check"></i><b>5.1.8</b> Practice02_2_2 selecting and filtering by dplyr I</a></li>
<li class="chapter" data-level="5.1.9" data-path="案例產假支薪跨國跨時比較.html"><a href="案例產假支薪跨國跨時比較.html#more-clean-version"><i class="fa fa-check"></i><b>5.1.9</b> (More) Clean version</a></li>
<li class="chapter" data-level="5.1.10" data-path="案例產假支薪跨國跨時比較.html"><a href="案例產假支薪跨國跨時比較.html#more-the-fittest-version-to-compute-staysame"><i class="fa fa-check"></i><b>5.1.10</b> (More) The fittest version to compute staySame</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="樞紐分析台北住宅竊盜點位.html"><a href="樞紐分析台北住宅竊盜點位.html"><i class="fa fa-check"></i><b>5.2</b> 樞紐分析：台北住宅竊盜點位</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="樞紐分析台北住宅竊盜點位.html"><a href="樞紐分析台北住宅竊盜點位.html#讀取檔案"><i class="fa fa-check"></i><b>5.2.1</b> 讀取檔案</a></li>
<li class="chapter" data-level="5.2.2" data-path="樞紐分析台北住宅竊盜點位.html"><a href="樞紐分析台北住宅竊盜點位.html#查看資料內容"><i class="fa fa-check"></i><b>5.2.2</b> 查看資料內容</a></li>
<li class="chapter" data-level="5.2.3" data-path="樞紐分析台北住宅竊盜點位.html"><a href="樞紐分析台北住宅竊盜點位.html#觀察資料維度-1"><i class="fa fa-check"></i><b>5.2.3</b> 觀察資料維度</a></li>
<li class="chapter" data-level="5.2.4" data-path="樞紐分析台北住宅竊盜點位.html"><a href="樞紐分析台北住宅竊盜點位.html#觀察變數名稱"><i class="fa fa-check"></i><b>5.2.4</b> 觀察變數名稱</a></li>
<li class="chapter" data-level="5.2.5" data-path="樞紐分析台北住宅竊盜點位.html"><a href="樞紐分析台北住宅竊盜點位.html#萃取所需新變項"><i class="fa fa-check"></i><b>5.2.5</b> 萃取所需新變項</a></li>
<li class="chapter" data-level="5.2.6" data-path="樞紐分析台北住宅竊盜點位.html"><a href="樞紐分析台北住宅竊盜點位.html#iv.-樞紐分析計數加總與彙整"><i class="fa fa-check"></i><b>5.2.6</b> IV. 樞紐分析：計數、加總與彙整。</a></li>
<li class="chapter" data-level="5.2.7" data-path="樞紐分析台北住宅竊盜點位.html"><a href="樞紐分析台北住宅竊盜點位.html#方法一counting-by-table"><i class="fa fa-check"></i><b>5.2.7</b> 方法一：Counting by <code>table()</code></a></li>
<li class="chapter" data-level="5.2.8" data-path="樞紐分析台北住宅竊盜點位.html"><a href="樞紐分析台北住宅竊盜點位.html#方法二counting-by-tapply"><i class="fa fa-check"></i><b>5.2.8</b> 方法二：Counting by <code>tapply()</code></a></li>
<li class="chapter" data-level="5.2.9" data-path="樞紐分析台北住宅竊盜點位.html"><a href="樞紐分析台北住宅竊盜點位.html#v.-依照變數值篩選資料"><i class="fa fa-check"></i><b>5.2.9</b> V. 依照變數值篩選資料</a></li>
<li class="chapter" data-level="5.2.10" data-path="樞紐分析台北住宅竊盜點位.html"><a href="樞紐分析台北住宅竊盜點位.html#vi.-雙變數樞紐分析"><i class="fa fa-check"></i><b>5.2.10</b> VI. 雙變數樞紐分析</a></li>
<li class="chapter" data-level="5.2.11" data-path="樞紐分析台北住宅竊盜點位.html"><a href="樞紐分析台北住宅竊盜點位.html#vii.-繪圖-plotting"><i class="fa fa-check"></i><b>5.2.11</b> VII. 繪圖 Plotting</a></li>
<li class="chapter" data-level="5.2.12" data-path="樞紐分析台北住宅竊盜點位.html"><a href="樞紐分析台北住宅竊盜點位.html#option-視覺化殘差分析"><i class="fa fa-check"></i><b>5.2.12</b> (Option) 視覺化殘差分析</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-manipulation-wity-tidyverse.html"><a href="data-manipulation-wity-tidyverse.html"><i class="fa fa-check"></i><b>6</b> Data Manipulation wity tidyverse</a>
<ul>
<li class="chapter" data-level="6.1" data-path="base-to-dplyr-tp-theft.html"><a href="base-to-dplyr-tp-theft.html"><i class="fa fa-check"></i><b>6.1</b> base to dplyr: TP Theft</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="base-to-dplyr-tp-theft.html"><a href="base-to-dplyr-tp-theft.html#reading-data"><i class="fa fa-check"></i><b>6.1.1</b> Reading data</a></li>
<li class="chapter" data-level="6.1.2" data-path="base-to-dplyr-tp-theft.html"><a href="base-to-dplyr-tp-theft.html#cleaning-data-i"><i class="fa fa-check"></i><b>6.1.2</b> Cleaning data I</a></li>
<li class="chapter" data-level="6.1.3" data-path="base-to-dplyr-tp-theft.html"><a href="base-to-dplyr-tp-theft.html#cleaning-data-ii"><i class="fa fa-check"></i><b>6.1.3</b> Cleaning data II</a></li>
<li class="chapter" data-level="6.1.4" data-path="base-to-dplyr-tp-theft.html"><a href="base-to-dplyr-tp-theft.html#long-to-wide-form"><i class="fa fa-check"></i><b>6.1.4</b> Long to wide form</a></li>
<li class="chapter" data-level="6.1.5" data-path="base-to-dplyr-tp-theft.html"><a href="base-to-dplyr-tp-theft.html#setting-time-as-row.name-for-mosaicplot"><i class="fa fa-check"></i><b>6.1.5</b> Setting time as row.name for mosaicplot</a></li>
<li class="chapter" data-level="6.1.6" data-path="base-to-dplyr-tp-theft.html"><a href="base-to-dplyr-tp-theft.html#clean-version"><i class="fa fa-check"></i><b>6.1.6</b> Clean version</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="時間軸的視覺化.html"><a href="時間軸的視覺化.html"><i class="fa fa-check"></i><b>6.2</b> 時間軸的視覺化</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="時間軸的視覺化.html"><a href="時間軸的視覺化.html#文字轉時間"><i class="fa fa-check"></i><b>6.2.1</b> 文字轉時間</a></li>
<li class="chapter" data-level="6.2.2" data-path="時間軸的視覺化.html"><a href="時間軸的視覺化.html#時間作為機率分佈x軸"><i class="fa fa-check"></i><b>6.2.2</b> 時間作為機率分佈X軸</a></li>
<li class="chapter" data-level="6.2.3" data-path="時間軸的視覺化.html"><a href="時間軸的視覺化.html#逐月統計資料"><i class="fa fa-check"></i><b>6.2.3</b> 逐月統計資料</a></li>
<li class="chapter" data-level="6.2.4" data-path="時間軸的視覺化.html"><a href="時間軸的視覺化.html#逐日統計資料佳"><i class="fa fa-check"></i><b>6.2.4</b> 逐日統計資料（佳）</a></li>
<li class="chapter" data-level="6.2.5" data-path="時間軸的視覺化.html"><a href="時間軸的視覺化.html#每日逐時資料"><i class="fa fa-check"></i><b>6.2.5</b> 每日逐時資料</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="eda.html"><a href="eda.html"><i class="fa fa-check"></i><b>7</b> Explore Data Analysis</a>
<ul>
<li class="chapter" data-level="7.1" data-path="tw-aqi-visual-studies.html"><a href="tw-aqi-visual-studies.html"><i class="fa fa-check"></i><b>7.1</b> TW AQI Visual Studies</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="tw-aqi-visual-studies.html"><a href="tw-aqi-visual-studies.html#trending-central-tendency"><i class="fa fa-check"></i><b>7.1.1</b> Trending: Central tendency</a></li>
<li class="chapter" data-level="7.1.2" data-path="tw-aqi-visual-studies.html"><a href="tw-aqi-visual-studies.html#trending-extreme-value"><i class="fa fa-check"></i><b>7.1.2</b> Trending: Extreme value</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="text-processing.html"><a href="text-processing.html"><i class="fa fa-check"></i><b>8</b> Text Processing</a>
<ul>
<li class="chapter" data-level="8.1" data-path="tweets-分析.html"><a href="tweets-分析.html"><i class="fa fa-check"></i><b>8.1</b> Tweets 分析</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="tweets-分析.html"><a href="tweets-分析.html#載入並清理資料"><i class="fa fa-check"></i><b>8.1.1</b> 載入並清理資料</a></li>
<li class="chapter" data-level="8.1.2" data-path="tweets-分析.html"><a href="tweets-分析.html#萃取資料"><i class="fa fa-check"></i><b>8.1.2</b> 萃取資料</a></li>
<li class="chapter" data-level="8.1.3" data-path="tweets-分析.html"><a href="tweets-分析.html#視覺化探索"><i class="fa fa-check"></i><b>8.1.3</b> 視覺化探索</a></li>
<li class="chapter" data-level="8.1.4" data-path="tweets-分析.html"><a href="tweets-分析.html#keyness"><i class="fa fa-check"></i><b>8.1.4</b> Keyness</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="crawler.html"><a href="crawler.html"><i class="fa fa-check"></i><b>9</b> Crawler</a>
<ul>
<li class="chapter" data-level="9.1" data-path="scraping-104.html"><a href="scraping-104.html"><i class="fa fa-check"></i><b>9.1</b> Scraping 104.com</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="scraping-104.html"><a href="scraping-104.html#complete-code"><i class="fa fa-check"></i><b>9.1.1</b> Complete Code</a></li>
<li class="chapter" data-level="9.1.2" data-path="scraping-104.html"><a href="scraping-104.html#step-by-step"><i class="fa fa-check"></i><b>9.1.2</b> Step-by-Step</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III VISUALIZATION</b></span></li>
<li class="chapter" data-level="10" data-path="visualization.html"><a href="visualization.html"><i class="fa fa-check"></i><b>10</b> Visualization</a>
<ul>
<li class="chapter" data-level="10.1" data-path="ggplot.html"><a href="ggplot.html"><i class="fa fa-check"></i><b>10.1</b> ggplot簡介</a></li>
<li class="chapter" data-level="10.2" data-path="繪圖基礎折線圖.html"><a href="繪圖基礎折線圖.html"><i class="fa fa-check"></i><b>10.2</b> 繪圖基礎：折線圖</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="繪圖基礎折線圖.html"><a href="繪圖基礎折線圖.html#繪圖三要素"><i class="fa fa-check"></i><b>10.2.1</b> 繪圖三要素</a></li>
<li class="chapter" data-level="10.2.2" data-path="繪圖基礎折線圖.html"><a href="繪圖基礎折線圖.html#範例-紐時世代貧富不均"><i class="fa fa-check"></i><b>10.2.2</b> 範例-紐時世代貧富不均</a></li>
<li class="chapter" data-level="10.2.3" data-path="繪圖基礎折線圖.html"><a href="繪圖基礎折線圖.html#加入自變項群組"><i class="fa fa-check"></i><b>10.2.3</b> 加入自變項群組</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="圖表調整.html"><a href="圖表調整.html"><i class="fa fa-check"></i><b>10.3</b> 圖表調整</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="圖表調整.html"><a href="圖表調整.html#點線型態"><i class="fa fa-check"></i><b>10.3.1</b> 點線型態</a></li>
<li class="chapter" data-level="10.3.2" data-path="圖表調整.html"><a href="圖表調整.html#標題標籤與圖說"><i class="fa fa-check"></i><b>10.3.2</b> 標題、標籤與圖說</a></li>
<li class="chapter" data-level="10.3.3" data-path="圖表調整.html"><a href="圖表調整.html#字體樣式"><i class="fa fa-check"></i><b>10.3.3</b> 字體樣式</a></li>
<li class="chapter" data-level="10.3.4" data-path="圖表調整.html"><a href="圖表調整.html#圖表主題色調"><i class="fa fa-check"></i><b>10.3.4</b> 圖表主題色調</a></li>
<li class="chapter" data-level="10.3.5" data-path="圖表調整.html"><a href="圖表調整.html#預設主題"><i class="fa fa-check"></i><b>10.3.5</b> 預設主題</a></li>
<li class="chapter" data-level="10.3.6" data-path="圖表調整.html"><a href="圖表調整.html#顯示中文字體"><i class="fa fa-check"></i><b>10.3.6</b> 顯示中文字體</a></li>
<li class="chapter" data-level="10.3.7" data-path="圖表調整.html"><a href="圖表調整.html#xy軸方向"><i class="fa fa-check"></i><b>10.3.7</b> X/Y軸方向</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="視覺化說故事的技巧.html"><a href="視覺化說故事的技巧.html"><i class="fa fa-check"></i><b>10.4</b> 視覺化說故事的技巧</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="視覺化說故事的技巧.html"><a href="視覺化說故事的技巧.html#依群組指定顏色"><i class="fa fa-check"></i><b>10.4.1</b> 依群組指定顏色</a></li>
<li class="chapter" data-level="10.4.2" data-path="視覺化說故事的技巧.html"><a href="視覺化說故事的技巧.html#使用gghighlight套件"><i class="fa fa-check"></i><b>10.4.2</b> 使用gghighlight套件</a></li>
<li class="chapter" data-level="10.4.3" data-path="視覺化說故事的技巧.html"><a href="視覺化說故事的技巧.html#為視覺化建立群組"><i class="fa fa-check"></i><b>10.4.3</b> 為視覺化建立群組</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="COORDINATE.html"><a href="COORDINATE.html"><i class="fa fa-check"></i><b>11</b> COORDINATE</a>
<ul>
<li class="chapter" data-level="11.1" data-path="排序以展示分佈.html"><a href="排序以展示分佈.html"><i class="fa fa-check"></i><b>11.1</b> 排序以展示分佈</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="排序以展示分佈.html"><a href="排序以展示分佈.html#section"><i class="fa fa-check"></i><b>11.1.1</b> </a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="用log-scale放大長尾頭部.html"><a href="用log-scale放大長尾頭部.html"><i class="fa fa-check"></i><b>11.2</b> 用Log-scale放大長尾頭部</a></li>
<li class="chapter" data-level="11.3" data-path="square-root-scale.html"><a href="square-root-scale.html"><i class="fa fa-check"></i><b>11.3</b> Square-root scale</a></li>
<li class="chapter" data-level="11.4" data-path="座標軸從數值到增加值.html"><a href="座標軸從數值到增加值.html"><i class="fa fa-check"></i><b>11.4</b> 座標軸從數值到增加值</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="座標軸從數值到增加值.html"><a href="座標軸從數值到增加值.html#net-worth-by-age-group-wgoitg-of-nytimes"><i class="fa fa-check"></i><b>11.4.1</b> Net Worth by Age Group (WGOITG of NYTIMES)</a></li>
<li class="chapter" data-level="11.4.2" data-path="座標軸從數值到增加值.html"><a href="座標軸從數值到增加值.html#read-and-sort-data"><i class="fa fa-check"></i><b>11.4.2</b> Read and sort data</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="等比例座標軸.html"><a href="等比例座標軸.html"><i class="fa fa-check"></i><b>11.5</b> 等比例座標軸</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="等比例座標軸.html"><a href="等比例座標軸.html#unicef-optimistic-wgoith"><i class="fa fa-check"></i><b>11.5.1</b> UNICEF-Optimistic (WGOITH)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="colors.html"><a href="colors.html"><i class="fa fa-check"></i><b>12</b> COLORS</a></li>
<li class="chapter" data-level="13" data-path="chart-types.html"><a href="chart-types.html"><i class="fa fa-check"></i><b>13</b> CHART TYPES</a></li>
<li class="chapter" data-level="14" data-path="amount.html"><a href="amount.html"><i class="fa fa-check"></i><b>14</b> AMOUNT</a>
<ul>
<li class="chapter" data-level="14.1" data-path="bar-chart.html"><a href="bar-chart.html"><i class="fa fa-check"></i><b>14.1</b> Bar chart</a></li>
<li class="chapter" data-level="14.2" data-path="heatmap-vaccination.html"><a href="heatmap-vaccination.html"><i class="fa fa-check"></i><b>14.2</b> Heatmap: Vaccination</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="distribution-histogram-density.html"><a href="distribution-histogram-density.html"><i class="fa fa-check"></i><b>15</b> DISTRIBUTION: Histogram &amp; Density</a>
<ul>
<li class="chapter" data-level="15.1" data-path="density-plot.html"><a href="density-plot.html"><i class="fa fa-check"></i><b>15.1</b> Density plot</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="density-plot.html"><a href="density-plot.html#density-with-different-bandwidth"><i class="fa fa-check"></i><b>15.1.1</b> Density with different bandwidth</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="histogram.html"><a href="histogram.html"><i class="fa fa-check"></i><b>15.2</b> Histogram</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="histogram.html"><a href="histogram.html#histogram-with-different-number-of-bins"><i class="fa fa-check"></i><b>15.2.1</b> Histogram with different number of bins</a></li>
<li class="chapter" data-level="15.2.2" data-path="histogram.html"><a href="histogram.html#density-vs-histogram"><i class="fa fa-check"></i><b>15.2.2</b> Density vs histogram</a></li>
<li class="chapter" data-level="15.2.3" data-path="histogram.html"><a href="histogram.html#positions-of-bar-chart"><i class="fa fa-check"></i><b>15.2.3</b> Positions of bar chart</a></li>
<li class="chapter" data-level="15.2.4" data-path="histogram.html"><a href="histogram.html#display-two-groups-histogram-by-facet_wrap"><i class="fa fa-check"></i><b>15.2.4</b> Display two groups histogram by facet_wrap()</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="pyramid-plot.html"><a href="pyramid-plot.html"><i class="fa fa-check"></i><b>15.3</b> Pyramid Plot</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="pyramid-plot.html"><a href="pyramid-plot.html#modify-geom_col-to-pyramid-plot"><i class="fa fa-check"></i><b>15.3.1</b> Modify geom_col() to pyramid plot</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="box-plot-muitiple-distrubution.html"><a href="box-plot-muitiple-distrubution.html"><i class="fa fa-check"></i><b>15.4</b> Box plot: Muitiple Distrubution</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="box-plot-muitiple-distrubution.html"><a href="box-plot-muitiple-distrubution.html#tw-salary-boxplot"><i class="fa fa-check"></i><b>15.4.1</b> TW-Salary (boxplot)</a></li>
<li class="chapter" data-level="15.4.2" data-path="box-plot-muitiple-distrubution.html"><a href="box-plot-muitiple-distrubution.html#tw-income-boxplot"><i class="fa fa-check"></i><b>15.4.2</b> TW-Income (boxplot)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="proportion.html"><a href="proportion.html"><i class="fa fa-check"></i><b>16</b> PROPORTION</a>
<ul>
<li class="chapter" data-level="16.1" data-path="pie-chart.html"><a href="pie-chart.html"><i class="fa fa-check"></i><b>16.1</b> Pie Chart</a></li>
<li class="chapter" data-level="16.2" data-path="dodged-bar-chart.html"><a href="dodged-bar-chart.html"><i class="fa fa-check"></i><b>16.2</b> Dodged Bar Chart</a></li>
<li class="chapter" data-level="16.3" data-path="treemap-nested-proportion.html"><a href="treemap-nested-proportion.html"><i class="fa fa-check"></i><b>16.3</b> Treemap: Nested Proportion</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="treemap-nested-proportion.html"><a href="treemap-nested-proportion.html#global-carbon-projects-wgoith-nytimes"><i class="fa fa-check"></i><b>16.3.1</b> Global Carbon Projects (WGOITH-NYTIMES)</a></li>
<li class="chapter" data-level="16.3.2" data-path="treemap-nested-proportion.html"><a href="treemap-nested-proportion.html#tw-budget"><i class="fa fa-check"></i><b>16.3.2</b> TW Budget</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="association.html"><a href="association.html"><i class="fa fa-check"></i><b>17</b> ASSOCIATION</a>
<ul>
<li class="chapter" data-level="17.1" data-path="等比例座標軸-1.html"><a href="等比例座標軸-1.html"><i class="fa fa-check"></i><b>17.1</b> 等比例座標軸</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="等比例座標軸-1.html"><a href="等比例座標軸-1.html#unicef-optimistic-wgoith-1"><i class="fa fa-check"></i><b>17.1.1</b> UNICEF-Optimistic (WGOITH)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="time-trends.html"><a href="time-trends.html"><i class="fa fa-check"></i><b>18</b> TIME &amp; TRENDS</a></li>
<li class="chapter" data-level="19" data-path="geospatial.html"><a href="geospatial.html"><i class="fa fa-check"></i><b>19</b> GEOSPATIAL</a></li>
<li class="chapter" data-level="20" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>20</b> Appendix</a>
<ul>
<li class="chapter" data-level="20.1" data-path="dataset.html"><a href="dataset.html"><i class="fa fa-check"></i><b>20.1</b> Dataset</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="wgoitg.html"><a href="wgoitg.html"><i class="fa fa-check"></i><b>21</b> WGOITG of NyTimes</a>
<ul>
<li class="chapter" data-level="21.1" data-path="inequality-net-worth-by-age-group.html"><a href="inequality-net-worth-by-age-group.html"><i class="fa fa-check"></i><b>21.1</b> Inequality: Net Worth by Age Group</a></li>
<li class="chapter" data-level="21.2" data-path="unicef-global-survey-optimism.html"><a href="unicef-global-survey-optimism.html"><i class="fa fa-check"></i><b>21.2</b> UNICEF-Global Survey Optimism</a></li>
<li class="chapter" data-level="21.3" data-path="global-carbon-projects.html"><a href="global-carbon-projects.html"><i class="fa fa-check"></i><b>21.3</b> Global Carbon Projects</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Data Journalism</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="時間軸的視覺化" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> 時間軸的視覺化<a href="時間軸的視覺化.html#時間軸的視覺化" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="時間軸的視覺化.html#cb398-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb398-2"><a href="時間軸的視覺化.html#cb398-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb398-3"><a href="時間軸的視覺化.html#cb398-3" aria-hidden="true" tabindex="-1"></a><span class="co"># options(stringsAsFactors = F) # default option in R &gt; 4.0</span></span></code></pre></div>
<div id="文字轉時間" class="section level3 hasAnchor" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> 文字轉時間<a href="時間軸的視覺化.html#文字轉時間" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Convert “character time” to R date.time object (POSIXct)</li>
</ul>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="時間軸的視覺化.html#cb399-1" aria-hidden="true" tabindex="-1"></a>ptturl <span class="ot">&lt;-</span> <span class="st">&quot;https://github.com/P4CSS/R4CSSData/raw/main/ptt_hang_posts.csv&quot;</span></span>
<span id="cb399-2"><a href="時間軸的視覺化.html#cb399-2" aria-hidden="true" tabindex="-1"></a>raw <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">url</span>(ptturl))</span>
<span id="cb399-3"><a href="時間軸的視覺化.html#cb399-3" aria-hidden="true" tabindex="-1"></a>clean <span class="ot">&lt;-</span> raw <span class="sc">%&gt;%</span></span>
<span id="cb399-4"><a href="時間軸的視覺化.html#cb399-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">ptime =</span> <span class="fu">as.POSIXct</span>(<span class="fu">strptime</span>(ptime, <span class="st">&quot;%Y-%m-%dT%H:%M:%SZ&quot;</span>, <span class="at">tz =</span> <span class="st">&quot;ASIA/Taipeiw&quot;</span>)))</span>
<span id="cb399-5"><a href="時間軸的視覺化.html#cb399-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb399-6"><a href="時間軸的視覺化.html#cb399-6" aria-hidden="true" tabindex="-1"></a>raw <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">url</span>(ptturl))</span>
<span id="cb399-7"><a href="時間軸的視覺化.html#cb399-7" aria-hidden="true" tabindex="-1"></a>?read_csv</span></code></pre></div>
<div class="r-help-page">
<div class="container">
<table width="100%" summary="page for read_delim">
<tr>
<td>
read_delim
</td>
<td style="text-align: right;">
R Documentation
</td>
</tr>
</table>
<h2>
Read a delimited file (including CSV and TSV) into a tibble
</h2>
<h3>
Description
</h3>
<p>
<code>read_csv()</code> and <code>read_tsv()</code> are special cases of the more general
<code>read_delim()</code>. They’re useful for reading the most common types of
flat file data, comma separated values and tab separated values,
respectively. <code>read_csv2()</code> uses <code style="white-space: pre;">;</code> for the field separator and <code style="white-space: pre;">,</code> for the
decimal point. This format is common in some European countries.
</p>
<h3>
Usage
</h3>
<pre class="r">
read_delim(
  file,
  delim = NULL,
  quote = "\"",
  escape_backslash = FALSE,
  escape_double = TRUE,
  col_names = TRUE,
  col_types = NULL,
  col_select = NULL,
  id = NULL,
  locale = default_locale(),
  na = c("", "NA"),
  quoted_na = TRUE,
  comment = "",
  trim_ws = FALSE,
  skip = 0,
  n_max = Inf,
  guess_max = min(1000, n_max),
  name_repair = "unique",
  num_threads = readr_threads(),
  progress = show_progress(),
  show_col_types = should_show_types(),
  skip_empty_rows = TRUE,
  lazy = should_read_lazy()
)

read_csv(
  file,
  col_names = TRUE,
  col_types = NULL,
  col_select = NULL,
  id = NULL,
  locale = default_locale(),
  na = c("", "NA"),
  quoted_na = TRUE,
  quote = "\"",
  comment = "",
  trim_ws = TRUE,
  skip = 0,
  n_max = Inf,
  guess_max = min(1000, n_max),
  name_repair = "unique",
  num_threads = readr_threads(),
  progress = show_progress(),
  show_col_types = should_show_types(),
  skip_empty_rows = TRUE,
  lazy = should_read_lazy()
)

read_csv2(
  file,
  col_names = TRUE,
  col_types = NULL,
  col_select = NULL,
  id = NULL,
  locale = default_locale(),
  na = c("", "NA"),
  quoted_na = TRUE,
  quote = "\"",
  comment = "",
  trim_ws = TRUE,
  skip = 0,
  n_max = Inf,
  guess_max = min(1000, n_max),
  progress = show_progress(),
  name_repair = "unique",
  num_threads = readr_threads(),
  show_col_types = should_show_types(),
  skip_empty_rows = TRUE,
  lazy = should_read_lazy()
)

read_tsv(
  file,
  col_names = TRUE,
  col_types = NULL,
  col_select = NULL,
  id = NULL,
  locale = default_locale(),
  na = c("", "NA"),
  quoted_na = TRUE,
  quote = "\"",
  comment = "",
  trim_ws = TRUE,
  skip = 0,
  n_max = Inf,
  guess_max = min(1000, n_max),
  progress = show_progress(),
  name_repair = "unique",
  num_threads = readr_threads(),
  show_col_types = should_show_types(),
  skip_empty_rows = TRUE,
  lazy = should_read_lazy()
)
</pre>
<h3>
Arguments
</h3>
<table summary="R argblock">
<tr valign="top">
<td>
<code>file</code>
</td>
<td>
<p>
Either a path to a file, a connection, or literal data
(either a single string or a raw vector).
</p>
<p>
Files ending in <code>.gz</code>, <code>.bz2</code>, <code>.xz</code>, or <code>.zip</code> will
be automatically uncompressed. Files starting with <code style="white-space: pre;"><a href="http://" class="uri">http://</a></code>,
<code style="white-space: pre;"><a href="https://" class="uri">https://</a></code>, <code style="white-space: pre;"><a href="ftp://" class="uri">ftp://</a></code>, or <code style="white-space: pre;">ftps://</code> will be automatically
downloaded. Remote gz files can also be automatically downloaded and
decompressed.
</p>
<p>
Literal data is most useful for examples and tests. To be recognised as
literal data, the input must be either wrapped with <code>I()</code>, be a string
containing at least one new line, or be a vector containing at least one
string with a new line.
</p>
<p>
Using a value of <code>clipboard()</code> will read from the system clipboard.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>delim</code>
</td>
<td>
<p>
Single character used to separate fields within a record.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>quote</code>
</td>
<td>
<p>
Single character used to quote strings.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>escape_backslash</code>
</td>
<td>
<p>
Does the file use backslashes to escape special
characters? This is more general than <code>escape_double</code> as backslashes
can be used to escape the delimiter character, the quote character, or
to add special characters like <code style="white-space: pre;">\n</code>.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>escape_double</code>
</td>
<td>
<p>
Does the file escape quotes by doubling them?
i.e. If this option is <code>TRUE</code>, the value <code style="white-space: pre;">““““</code> represents
a single quote, <code style="white-space: pre;">"</code>.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>col_names</code>
</td>
<td>
<p>
Either <code>TRUE</code>, <code>FALSE</code> or a character vector
of column names.
</p>
<p>
If <code>TRUE</code>, the first row of the input will be used as the column
names, and will not be included in the data frame. If <code>FALSE</code>, column
names will be generated automatically: X1, X2, X3 etc.
</p>
<p>
If <code>col_names</code> is a character vector, the values will be used as the
names of the columns, and the first row of the input will be read into
the first row of the output data frame.
</p>
<p>
Missing (<code>NA</code>) column names will generate a warning, and be filled
in with dummy names <code>…1</code>, <code>…2</code> etc. Duplicate column names
will generate a warning and be made unique, see <code>name_repair</code> to control
how this is done.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>col_types</code>
</td>
<td>
<p>
One of <code>NULL</code>, a <code>cols()</code> specification, or
a string. See <code>vignette(“readr”)</code> for more details.
</p>
<p>
If <code>NULL</code>, all column types will be imputed from <code>guess_max</code> rows
on the input interspersed throughout the file. This is convenient (and
fast), but not robust. If the imputation fails, you’ll need to increase
the <code>guess_max</code> or supply the correct types yourself.
</p>
<p>
Column specifications created by <code>list()</code> or <code>cols()</code> must contain
one column specification for each column. If you only want to read a
subset of the columns, use <code>cols_only()</code>.
</p>
<p>
Alternatively, you can use a compact string representation where each
character represents one column:
</p>
<ul>
<li>
<p>
c = character
</p>
</li>
<li>
<p>
i = integer
</p>
</li>
<li>
<p>
n = number
</p>
</li>
<li>
<p>
d = double
</p>
</li>
<li>
<p>
l = logical
</p>
</li>
<li>
<p>
f = factor
</p>
</li>
<li>
<p>
D = date
</p>
</li>
<li>
<p>
T = date time
</p>
</li>
<li>
<p>
t = time
</p>
</li>
<li>
<p>
? = guess
</p>
</li>
<li>
<p>
_ or - = skip
</p>
<p>
By default, reading a file without a column specification will print a
message showing what <code>readr</code> guessed they were. To remove this message,
set <code>show_col_types = FALSE</code> or set ’options(readr.show_col_types = FALSE).
</p>
</li>
</ul>
</td>
</tr>
<tr valign="top">
<td>
<code>col_select</code>
</td>
<td>
<p>
Columns to include in the results. You can use the same
mini-language as <code>dplyr::select()</code> to refer to the columns by name. Use
<code>c()</code> or <code>list()</code> to use more than one selection expression. Although this
usage is less common, <code>col_select</code> also accepts a numeric column index. See
<code>?tidyselect::language</code> for full details on the
selection language.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>id</code>
</td>
<td>
<p>
The name of a column in which to store the file path. This is
useful when reading multiple input files and there is data in the file
paths, such as the data collection date. If <code>NULL</code> (the default) no extra
column is created.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>locale</code>
</td>
<td>
<p>
The locale controls defaults that vary from place to place.
The default locale is US-centric (like R), but you can use
<code>locale()</code> to create your own locale that controls things like
the default time zone, encoding, decimal mark, big mark, and day/month
names.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>na</code>
</td>
<td>
<p>
Character vector of strings to interpret as missing values. Set this
option to <code>character()</code> to indicate no missing values.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>quoted_na</code>
</td>
<td>
<p>
<a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> Should missing values
inside quotes be treated as missing values (the default) or strings. This
parameter is soft deprecated as of readr 2.0.0.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>comment</code>
</td>
<td>
<p>
A string used to identify comments. Any text after the
comment characters will be silently ignored.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>trim_ws</code>
</td>
<td>
<p>
Should leading and trailing whitespace (ASCII spaces and tabs) be trimmed from
each field before parsing it?
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>skip</code>
</td>
<td>
<p>
Number of lines to skip before reading data. If <code>comment</code> is
supplied any commented lines are ignored <em>after</em> skipping.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>n_max</code>
</td>
<td>
<p>
Maximum number of lines to read.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>guess_max</code>
</td>
<td>
<p>
Maximum number of lines to use for guessing column types.
See <code>vignette(“column-types”, package = “readr”)</code> for more details.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>name_repair</code>
</td>
<td>
<p>
Handling of column names. The default behaviour is to
ensure column names are <code>“unique”</code>. Various repair strategies are
supported:
</p>
<ul>
<li>
<p>
<code>“minimal”</code>: No name repair or checks, beyond basic existence of names.
</p>
</li>
<li>
<p>
<code>“unique”</code> (default value): Make sure names are unique and not empty.
</p>
</li>
<li>
<p>
<code>“check_unique”</code>: no name repair, but check they are <code>unique</code>.
</p>
</li>
<li>
<p>
<code>“universal”</code>: Make the names <code>unique</code> and syntactic.
</p>
</li>
<li>
<p>
A function: apply custom name repair (e.g., <code>name_repair = make.names</code>
for names in the style of base R).
</p>
</li>
<li>
<p>
A purrr-style anonymous function, see <code>rlang::as_function()</code>.
</p>
</li>
</ul>
<p>
This argument is passed on as <code>repair</code> to <code>vctrs::vec_as_names()</code>.
See there for more details on these terms and the strategies used
to enforce them.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>num_threads</code>
</td>
<td>
<p>
The number of processing threads to use for initial
parsing and lazy reading of data. If your data contains newlines within
fields the parser should automatically detect this and fall back to using
one thread only. However if you know your file has newlines within quoted
fields it is safest to set <code>num_threads = 1</code> explicitly.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>progress</code>
</td>
<td>
<p>
Display a progress bar? By default it will only display
in an interactive session and not while knitting a document. The automatic
progress bar can be disabled by setting option <code>readr.show_progress</code> to
<code>FALSE</code>.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>show_col_types</code>
</td>
<td>
<p>
If <code>FALSE</code>, do not show the guessed column types. If
<code>TRUE</code> always show the column types, even if they are supplied. If <code>NULL</code>
(the default) only show the column types if they are not explicitly supplied
by the <code>col_types</code> argument.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>skip_empty_rows</code>
</td>
<td>
<p>
Should blank rows be ignored altogether? i.e. If this
option is <code>TRUE</code> then blank rows will not be represented at all. If it is
<code>FALSE</code> then they will be represented by <code>NA</code> values in all the columns.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>lazy</code>
</td>
<td>
<p>
Read values lazily? By default the file is initially only
indexed and the values are read lazily when accessed. Lazy reading is
useful interactively, particularly if you are only interested in a subset
of the full dataset. <em>Note</em>, if you later write to the same file you read
from you need to set <code>lazy = FALSE</code>. On Windows the file will be locked
and on other systems the memory map will become invalid.
</p>
</td>
</tr>
</table>
<h3>
Value
</h3>
<p>
A <code>tibble()</code>. If there are parsing problems, a warning will alert you.
You can retrieve the full details by calling <code>problems()</code> on your dataset.
</p>
<h3>
Examples
</h3>
<pre class="r">
# Input sources -------------------------------------------------------------
# Read from a path
read_csv(readr_example("mtcars.csv"))
read_csv(readr_example("mtcars.csv.zip"))
read_csv(readr_example("mtcars.csv.bz2"))
## Not run: 
# Including remote paths
read_csv("https://github.com/tidyverse/readr/raw/main/inst/extdata/mtcars.csv")

## End(Not run)

# Or directly from a string with `I()`
read_csv(I("x,y\n1,2\n3,4"))

# Column types --------------------------------------------------------------
# By default, readr guesses the columns types, looking at `guess_max` rows.
# You can override with a compact specification:
read_csv(I("x,y\n1,2\n3,4"), col_types = "dc")

# Or with a list of column types:
read_csv(I("x,y\n1,2\n3,4"), col_types = list(col_double(), col_character()))

# If there are parsing problems, you get a warning, and can extract
# more details with problems()
y &lt;- read_csv(I("x\n1\n2\nb"), col_types = list(col_double()))
y
problems(y)

# File types ----------------------------------------------------------------
read_csv(I("a,b\n1.0,2.0"))
read_csv2(I("a;b\n1,0;2,0"))
read_tsv(I("a\tb\n1.0\t2.0"))
read_delim(I("a|b\n1.0|2.0"), delim = "|")
</pre>
</div>
</div>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="時間軸的視覺化.html#cb400-1" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="st">&quot;2019-04-12T00:48:19Z&quot;</span></span>
<span id="cb400-2"><a href="時間軸的視覺化.html#cb400-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(t)</span></code></pre></div>
<pre class="output"><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="時間軸的視覺化.html#cb402-1" aria-hidden="true" tabindex="-1"></a>?strptime</span></code></pre></div>
<div class="r-help-page">
<div class="container">
<table width="100%" summary="page for strptime">
<tr>
<td>
strptime
</td>
<td style="text-align: right;">
R Documentation
</td>
</tr>
</table>
<h2>
Date-time Conversion Functions to and from Character
</h2>
<h3>
Description
</h3>
<p>
Functions to convert between character representations and objects of
classes <code>“POSIXlt”</code> and <code>“POSIXct”</code> representing calendar
dates and times.
</p>
<h3>
Usage
</h3>
<pre class="r">
## S3 method for class 'POSIXct'
format(x, format = "", tz = "", usetz = FALSE, ...)
## S3 method for class 'POSIXlt'
format(x, format = "", usetz = FALSE, ...)

## S3 method for class 'POSIXt'
as.character(x, ...)

strftime(x, format = "", tz = "", usetz = FALSE, ...)
strptime(x, format, tz = "")
</pre>
<h3>
Arguments
</h3>
<table summary="R argblock">
<tr valign="top">
<td>
<code>x</code>
</td>
<td>
<p>
An object to be converted: a character vector for
<code>strptime</code>, an object which can be converted to
<code>“POSIXlt”</code> for <code>strftime</code>.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>tz</code>
</td>
<td>
<p>
A character string specifying the time zone to be used for
the conversion. System-specific (see <code>as.POSIXlt</code>), but
<code>““</code> is the current time zone, and <code>”GMT”</code> is UTC.
Invalid values are most commonly treated as UTC, on some platforms with
a warning.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>format</code>
</td>
<td>
<p>
A character string. The default for the <code>format</code>
methods is
<code>“%Y-%m-%d %H:%M:%S”</code> if any element has a time
component which is not midnight, and <code>“%Y-%m-%d”</code>
otherwise. If <code>options(“digits.secs”)</code> is set, up to
the specified number of digits will be printed for seconds.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>…</code>
</td>
<td>
<p>
Further arguments to be passed from or to other methods.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>usetz</code>
</td>
<td>
<p>
logical. Should the time zone abbreviation be appended
to the output? This is used in printing times, and more reliable
than using <code>“%Z”</code>.
</p>
</td>
</tr>
</table>
<h3>
Details
</h3>
<p>
The <code>format</code> and <code>as.character</code> methods and <code>strftime</code>
convert objects from the classes <code>“POSIXlt”</code> and
<code>“POSIXct”</code> to character vectors.
</p>
<p>
<code>strptime</code> converts character vectors to class <code>“POSIXlt”</code>:
its input <code>x</code> is first converted by <code>as.character</code>.
Each input string is processed as far as necessary for the format
specified: any trailing characters are ignored.
</p>
<p>
<code>strftime</code> is a wrapper for <code>format.POSIXlt</code>, and it and
<code>format.POSIXct</code> first convert to class <code>“POSIXlt”</code> by
calling <code>as.POSIXlt</code> (so they also work for class
<code>“Date”</code>). Note that only that conversion depends on the
time zone.
</p>
<p>
The usual vector re-cycling rules are applied to <code>x</code> and
<code>format</code> so the answer will be of length of the longer of these
vectors.
</p>
<p>
Locale-specific conversions to and from character strings are used
where appropriate and available. This affects the names of the days
and months, the AM/PM indicator (if used) and the separators in output
formats such as <code>%x</code> and <code>%X</code>, <em>via</em> the setting of
the <code>LC_TIME</code> locale category. The ‘current
locale’ of the descriptions might mean the locale in use at the start
of the <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> session or when these functions are first used. (For input,
the locale-specific conversions can be changed by calling
<code>Sys.setlocale</code> with category <code>LC_TIME</code> (or
<code>LC_ALL</code>). For output, what happens depends on the OS but
usually works.)
</p>
<p>
The details of the formats are platform-specific, but the following are
likely to be widely available: most are defined by the POSIX standard.
A <em>conversion specification</em> is introduced by <code>%</code>, usually
followed by a single letter or <code>O</code> or <code>E</code> and then a single
letter. Any character in the format string not part of a conversion
specification is interpreted literally (and <code>%%</code> gives
<code>%</code>). Widely implemented conversion specifications include
</p>
<dl>
<dt>
<code>%a</code>
</dt>
<dd>
<p>
Abbreviated weekday name in the current
locale on this platform. (Also matches full name on input:
in some locales there are no abbreviations of names.)
</p>
</dd>
<dt>
<code>%A</code>
</dt>
<dd>
<p>
Full weekday name in the current locale. (Also
matches abbreviated name on input.)
</p>
</dd>
<dt>
<code>%b</code>
</dt>
<dd>
<p>
Abbreviated month name in the current locale on
this platform. (Also matches full name on input: in
some locales there are no abbreviations of names.)
</p>
</dd>
<dt>
<code>%B</code>
</dt>
<dd>
<p>
Full month name in the current locale. (Also
matches abbreviated name on input.)
</p>
</dd>
<dt>
<code>%c</code>
</dt>
<dd>
<p>
Date and time. Locale-specific on output,
<code>“%a %b %e %H:%M:%S %Y”</code> on input.
</p>
</dd>
<dt>
<code>%C</code>
</dt>
<dd>
<p>
Century (00–99): the integer part of the year
divided by 100.
</p>
</dd>
<dt>
<code>%d</code>
</dt>
<dd>
<p>
Day of the month as decimal number (01–31).
</p>
</dd>
<dt>
<code>%D</code>
</dt>
<dd>
<p>
Date format such as <code>%m/%d/%y</code>: the C99
standard says it should be that exact format (but not all OSes
comply).
</p>
</dd>
<dt>
<code>%e</code>
</dt>
<dd>
<p>
Day of the month as decimal number (1–31), with
a leading space for a single-digit number.
</p>
</dd>
<dt>
<code>%F</code>
</dt>
<dd>
<p>
Equivalent to %Y-%m-%d (the ISO 8601 date
format).
</p>
</dd>
<dt>
<code>%g</code>
</dt>
<dd>
<p>
The last two digits of the week-based year
(see <code>%V</code>). (Accepted but ignored on input.)
</p>
</dd>
<dt>
<code>%G</code>
</dt>
<dd>
<p>
The week-based year (see <code>%V</code>) as a decimal
number. (Accepted but ignored on input.)
</p>
</dd>
<dt>
<code>%h</code>
</dt>
<dd>
<p>
Equivalent to <code>%b</code>.
</p>
</dd>
<dt>
<code>%H</code>
</dt>
<dd>
<p>
Hours as decimal number (00–23). As a special
exception strings such as <span class="samp">24:00:00</span> are accepted for input,
since ISO 8601 allows these.
</p>
</dd>
<dt>
<code>%I</code>
</dt>
<dd>
<p>
Hours as decimal number (01–12).
</p>
</dd>
<dt>
<code>%j</code>
</dt>
<dd>
<p>
Day of year as decimal number (001–366): For
input, 366 is only valid in a leap year.
</p>
</dd>
<dt>
<code>%m</code>
</dt>
<dd>
<p>
Month as decimal number (01–12).
</p>
</dd>
<dt>
<code>%M</code>
</dt>
<dd>
<p>
Minute as decimal number (00–59).
</p>
</dd>
<dt>
<code>%n</code>
</dt>
<dd>
<p>
Newline on output, arbitrary whitespace on input.
</p>
</dd>
<dt>
<code>%p</code>
</dt>
<dd>
<p>
AM/PM indicator in the locale. Used in
conjunction with <code>%I</code> and <b>not</b> with <code>%H</code>. An
empty string in some locales (for example on some OSes,
non-English European locales including Russia). The behaviour is
undefined if used for input in such a locale.
</p>
<p>
Some platforms accept <code>%P</code> for output, which uses a lower-case
version (<code>%p</code> may also use lower case): others will output
<code>P</code>.
</p>
</dd>
<dt>
<code>%r</code>
</dt>
<dd>
<p>
For output, the 12-hour clock time (using the
locale’s AM or PM): only defined in some locales, and on some OSes
misleading in locales which do not define an AM/PM indicator.
For input, equivalent to <code>%I:%M:%S %p</code>.
</p>
</dd>
<dt>
<code>%R</code>
</dt>
<dd>
<p>
Equivalent to <code>%H:%M</code>.
</p>
</dd>
<dt>
<code>%S</code>
</dt>
<dd>
<p>
Second as integer (00–61), allowing for
up to two leap-seconds (but POSIX-compliant implementations
will ignore leap seconds).
</p>
</dd>
<dt>
<code>%t</code>
</dt>
<dd>
<p>
Tab on output, arbitrary whitespace on input.
</p>
</dd>
<dt>
<code>%T</code>
</dt>
<dd>
<p>
Equivalent to <code>%H:%M:%S</code>.
</p>
</dd>
<dt>
<code>%u</code>
</dt>
<dd>
<p>
Weekday as a decimal number (1–7, Monday is 1).
</p>
</dd>
</dl>
<dl>
<dt>
<code>%U</code>
</dt>
<dd>
<p>
Week of the year as decimal number (00–53) using
Sunday as the first day 1 of the week (and typically with the
first Sunday of the year as day 1 of week 1). The US convention.
</p>
</dd>
<dt>
<code>%V</code>
</dt>
<dd>
<p>
Week of the year as decimal number (01–53) as
defined in ISO 8601.
If the week (starting on Monday) containing 1 January has four or
more days in the new year, then it is considered week 1. Otherwise, it
is the last week of the previous year, and the next week is week
1. (Accepted but ignored on input.)
</p>
</dd>
<dt>
<code>%w</code>
</dt>
<dd>
<p>
Weekday as decimal number (0–6, Sunday is 0).
</p>
</dd>
<dt>
<code>%W</code>
</dt>
<dd>
<p>
Week of the year as decimal number (00–53) using
Monday as the first day of week (and typically with the
first Monday of the year as day 1 of week 1). The UK convention.
</p>
</dd>
<dt>
<code>%x</code>
</dt>
<dd>
<p>
Date. Locale-specific on output,
<code>“%y/%m/%d”</code> on input.
</p>
</dd>
<dt>
<code>%X</code>
</dt>
<dd>
<p>
Time. Locale-specific on output,
<code>“%H:%M:%S”</code> on input.
</p>
</dd>
<dt>
<code>%y</code>
</dt>
<dd>
<p>
Year without century (00–99). On input, values
00 to 68 are prefixed by 20 and 69 to 99 by 19 – that is the
behaviour specified by the 2018 POSIX standard, but it does
also say ‘it is expected that in a future version the
default century inferred from a 2-digit year will change’.
</p>
</dd>
<dt>
<code>%Y</code>
</dt>
<dd>
<p>
Year with century. Note that whereas there was no
zero in the original Gregorian calendar, ISO 8601:2004 defines it
to be valid (interpreted as 1BC): see
<a href="https://en.wikipedia.org/wiki/0_(year)">https://en.wikipedia.org/wiki/0_(year)</a>. However, the standards
also say that years before 1582 in its calendar should only be used
with agreement of the parties involved.
</p>
<p>
For input, only years <code>0:9999</code> are accepted.
</p>
</dd>
<dt>
<code>%z</code>
</dt>
<dd>
<p>
Signed offset in hours and minutes
from UTC, so <code>-0800</code> is 8 hours behind UTC. Values up to
<code>+1400</code> are accepted. (Standard only for output. For input
<span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> currently supports it on all platforms.)
</p>
</dd>
<dt>
<code>%Z</code>
</dt>
<dd>
<p>
(Output only.) Time zone abbreviation as a
character string (empty if not available). This may not be reliable
when a time zone has changed abbreviations over the years.
</p>
</dd>
</dl>
<p>
<p>Where leading zeros are shown they will be used on output but are
optional on input. Names are matched case-insensitively on input:
whether they are capitalized on output depends on the platform and the
locale. Note that abbreviated names are platform-specific (although
the standards specify that in the <span class="samp">C</span> locale they must be the
first three letters of the capitalized English name: this convention
is widely used in English-language locales but for example the French
month abbreviations are not the same on any two of Linux, macOS, Solaris
and Windows). Knowing what the abbreviations are is essential
if you wish to use <code>%a</code>, <code>%b</code> or <code>%h</code> as part of an
input format: see the examples for how to check.</p>
</p>
<p>
When <code>%z</code> or <code>%Z</code> is used for output with an
object with an assigned time zone an attempt is made to use the values
for that time zone — but it is not guaranteed to succeed.
</p>
<p>
Not in the standards and less widely implemented are
</p>
<dl>
<dt>
<code>%k</code>
</dt>
<dd>
<p>
The 24-hour clock time with single digits preceded
by a blank.
</p>
</dd>
<dt>
<code>%l</code>
</dt>
<dd>
<p>
The 12-hour clock time with single digits preceded
by a blank.
</p>
</dd>
<dt>
<code>%s</code>
</dt>
<dd>
<p>
(Output only.) The number of seconds since the
epoch.
</p>
</dd>
<dt>
<code>%+</code>
</dt>
<dd>
<p>
(Output only.) Similar to <code>%c</code>, often
<code>“%a %b %e %H:%M:%S %Z %Y”</code>. May depend on the locale.
</p>
</dd>
</dl>
<p>
For output there are also <code>%O[dHImMUVwWy]</code> which may emit
numbers in an alternative locale-dependent format (e.g., roman
numerals), and <code>%E[cCyYxX]</code> which can use an alternative
‘era’ (e.g., a different religious calendar). Which of these
are supported is OS-dependent. These are accepted for input, but with
the standard interpretation.
</p>
<p>
Specific to <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> is <code>%OSn</code>, which for output gives the seconds
truncated to <code>0 &lt;= n &lt;= 6</code> decimal places (and if <code>%OS</code> is
not followed by a digit, it uses the setting of
<code>getOption(“digits.secs”)</code>, or if that is unset, <code>n =
0</code>). Further, for <code>strptime</code> <code>%OS</code> will input seconds
including fractional seconds. Note that <code>%S</code> does not read
fractional parts on output.
</p>
<p>
The behaviour of other conversion specifications (and even if other
character sequences commencing with <code>%</code> <em>are</em> conversion
specifications) is system-specific. Some systems document that the
use of multi-byte characters in <code>format</code> is unsupported: UTF-8
locales are unlikely to cause a problem.
</p>
<h3>
Value
</h3>
<p>
The <code>format</code> methods and <code>strftime</code> return character vectors
representing the time. <code>NA</code> times are returned as
<code>NA_character_</code>. The elements are restricted to 256 bytes, plus
a time zone abbreviation if <code>usetz</code> is true. (On known platforms
longer strings are truncated at 255 or 256 bytes, but this is not
guaranteed by the C99 standard.)
</p>
<p>
<p><code>strptime</code> turns character representations into an object of
class <code>“POSIXlt”</code>. The time zone is used to set the
<code>isdst</code> component and to set the <code>“tzone”</code> attribute if
<code>tz != ““</code>. If the specified time is invalid (for example
<span class="samp">“2010-02-30 08:00”</span>) all the components of the result are
<code>NA</code>. (NB: this does means exactly what it says – if it is an
invalid time, not just a time that does not exist in some time zone.)</p>
</p>
<h3>
Printing years
</h3>
<p>
Everyone agrees that years from 1000 to 9999 should be printed with 4
digits, but the standards do not define what is to be done outside
that range. For years 0 to 999 most OSes pad with zeros or spaces to
4 characters, and Linux outputs just the number.
</p>
<p>
OS facilities will probably not print years before 1 CE (aka 1 AD)
‘correctly’ (they tend to assume the existence of a year 0: see
<a href="https://en.wikipedia.org/wiki/0_(year)">https://en.wikipedia.org/wiki/0_(year)</a>, and some OSes get them
completely wrong). Common formats are <code>-45</code> and <code>-045</code>.
</p>
<p>
Years after 9999 and before -999 are normally printed with five or
more characters.
</p>
<p>
Some platforms support modifiers from POSIX 2008 (and others). On
Linux the format <code>“%04Y”</code> assures a minimum of four characters
and zero-padding. The internal code (as used on Windows and by
default on macOS) uses zero-padding by default, and formats
<code>%_4Y</code> and <code>%_Y</code> can be used for space padding and no
padding.
</p>
<h3>
Time zone offsets
</h3>
<p>
Offsets from GMT (also known as UTC) are part of the conversion
between timezones and to/from class <code>“POSIXct”</code>, but cause
difficulties as they are often computed incorrectly.
</p>
<p>
They conventionally have the opposite sign from time-zone
specifications (see <code>Sys.timezone</code>): positive values are
East of the meridian. Although there have been time zones with
offsets like 00:09:21 (Paris in 1900), and 00:44:30 (Liberia until
1972), offsets are usually treated as whole numbers of minutes, and
are most often seen in RFC 5322 email headers in forms like
<code>-0800</code> (e.g., used on the Pacific coast of the USA in winter).
</p>
<p>
Format <code>%z</code> can be used for input or output: it is a character
string, conventionally plus or minus followed by two digits for
hours and two for minutes: the standards say that an empty string
should be output if the offset is unknown, but some systems use the
offsets for the time zone in use for the current year.
</p>
<h3>
Sources
</h3>
<p>
Input uses the POSIX function <code>strptime</code> and output the C99
function <code>strftime</code>.
</p>
<p>
However, not all OSes (notably Windows) provided <code>strptime</code> and
many issues were found for those which did, so since 2000 <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> has used
a fork of code from <span class="samp">glibc</span>. The forked code uses the
system’s <code>strftime</code> to find the locale-specific day and month
names and any AM/PM indicator.
</p>
<p>
On some platforms (including Windows and by default on macOS) the
system’s <code>strftime</code> is replaced (along with most of the rest of
the C-level datetime code) by code modified from IANA’s <span class="samp">tzcode</span>
distribution (<a href="https://www.iana.org/time-zones">https://www.iana.org/time-zones</a>).
</p>
<h3>
Note
</h3>
<p>
The default formats follow the rules of the ISO 8601 international
standard which expresses a day as <code>“2001-02-28”</code> and a time as
<code>“14:01:02”</code> using leading zeroes as here. (The ISO form uses no
space to separate dates and times: <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> does by default.)
</p>
<p>
For <code>strptime</code> the input string need not specify the date
completely: it is assumed that unspecified seconds, minutes or hours
are zero, and an unspecified year, month or day is the current one.
(However, if a month is specified, the day of that month has to be
specified by <code>%d</code> or <code>%e</code> since the current day of the
month need not be valid for the specified month.) Some components may
be returned as <code>NA</code> (but an unknown <code>tzone</code> component is
represented by an empty string).
</p>
<p>
If the time zone specified is invalid on your system, what happens is
system-specific but it will probably be ignored.
</p>
<p>
Remember that in most time zones some times do not occur and some
occur twice because of transitions to/from ‘daylight saving’
(also known as ‘summer’) time. <code>strptime</code> does not
validate such times (it does not assume a specific time zone), but
conversion by <code>as.POSIXct</code> will do so. Conversion by
<code>strftime</code> and formatting/printing uses OS facilities and may
return nonsensical results for non-existent times at DST transitions.
</p>
<p>
In a C locale <code>%c</code> is required to be
<code>“%a %b %e %H:%M:%S %Y”</code>. As Windows does not comply (and
uses a date format not understood outside N. America), that format is
used by <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> on Windows in all locales.
</p>
<h3>
References
</h3>
<p>
International Organization for Standardization (2004, 2000, …)
‘ISO 8601. Data elements and interchange formats –
Information interchange – Representation of dates and times.’,
slightly updated to International Organization for Standardization (2019)
‘ISO 8601-1:2019. Date and time – Representations for
information interchange – Part 1: Basic rules’.
For links to versions available on-line see (at the time of writing)
<a href="https://dotat.at/tmp/ISO_8601-2004_E.pdf">https://dotat.at/tmp/ISO_8601-2004_E.pdf</a> and
<a href="https://www.qsl.net/g1smd/isopdf.htm">https://www.qsl.net/g1smd/isopdf.htm</a>; for information on the
current official version, see <a href="https://www.iso.org/iso/iso8601">https://www.iso.org/iso/iso8601</a>.
</p>
<p>
The POSIX 1003.1 standard, which is in some respects stricter than ISO 8601.
</p>
<h3>
See Also
</h3>
<p>
DateTimeClasses for details of the date-time classes;
locales to query or set a locale.
</p>
<p>
Your system’s help page on <code>strftime</code> to see how to specify their
formats. (On some systems, including Windows, <code>strftime</code> is
replaced by more comprehensive internal code.)
</p>
<h3>
Examples
</h3>
<pre class="r">
## locale-specific version of date()
format(Sys.time(), "%a %b %d %X %Y %Z")

## time to sub-second accuracy (if supported by the OS)
format(Sys.time(), "%H:%M:%OS3")

## read in date info in format 'ddmmmyyyy'
## This will give NA(s) in some non-English locales; setting the C locale
## as in the commented lines will overcome this on most systems.
## lct &lt;- Sys.getlocale("LC_TIME"); Sys.setlocale("LC_TIME", "C")
x &lt;- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
z &lt;- strptime(x, "%d%b%Y")
## Sys.setlocale("LC_TIME", lct)
z

## read in date/time info in format 'm/d/y h:m:s'
dates &lt;- c("02/27/92", "02/27/92", "01/14/92", "02/28/92", "02/01/92")
times &lt;- c("23:03:20", "22:29:56", "01:03:30", "18:21:03", "16:56:26")
x &lt;- paste(dates, times)
strptime(x, "%m/%d/%y %H:%M:%S")

## time with fractional seconds
z &lt;- strptime("20/2/06 11:16:16.683", "%d/%m/%y %H:%M:%OS")
z # prints without fractional seconds
op &lt;- options(digits.secs = 3)
z
options(op)

## time zone names are not portable, but 'EST5EDT' comes pretty close.
(x &lt;- strptime(c("2006-01-08 10:07:52", "2006-08-07 19:33:02"),
               "%Y-%m-%d %H:%M:%S", tz = "EST5EDT"))
attr(x, "tzone")

## An RFC 5322 header (Eastern Canada, during DST)
## In a non-English locale the commented lines may be needed.
## prev &lt;- Sys.getlocale("LC_TIME"); Sys.setlocale("LC_TIME", "C")
strptime("Tue, 23 Mar 2010 14:36:38 -0400", "%a, %d %b %Y %H:%M:%S %z")
## Sys.setlocale("LC_TIME", prev)

## Make sure you know what the abbreviated names are for you if you wish
## to use them for input (they are matched case-insensitively):
format(seq.Date(as.Date('1978-01-01'), by = 'day', len = 7), "%a")
format(seq.Date(as.Date('2000-01-01'), by = 'month', len = 12), "%b")
</pre>
</div>
</div>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="時間軸的視覺化.html#cb403-1" aria-hidden="true" tabindex="-1"></a>t1 <span class="ot">&lt;-</span> <span class="fu">strptime</span>(t, <span class="st">&quot;%Y-%m-%dT%H:%M:%SZ&quot;</span>)</span>
<span id="cb403-2"><a href="時間軸的視覺化.html#cb403-2" aria-hidden="true" tabindex="-1"></a>raw <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code></pre></div>
<pre class="output"><code>## Rows: 8,317
## Columns: 7
## $ plink    &lt;chr&gt; &quot;https://www.ptt.cc/bbs/HatePolitics/M.1555035677.A.24B.html&quot;…
## $ board    &lt;chr&gt; &quot;HatePolitics&quot;, &quot;HatePolitics&quot;, &quot;HatePolitics&quot;, &quot;HatePolitics…
## $ pcontent &lt;chr&gt; &quot;\n\n韓國瑜赴哈佛大學前受訪表示，就是「keeping practice」，盡…
## $ poster   &lt;chr&gt; &quot;lovebxcx&quot;, &quot;ikr3699654&quot;, &quot;sunyeah&quot;, &quot;rock720429&quot;, &quot;btm978952…
## $ ptitle   &lt;chr&gt; &quot;Re: [新聞] 重申反對一國兩制　韓國瑜：看著我靈魂深&quot;, &quot;Re: [討…
## $ ptime    &lt;dttm&gt; 2019-04-12 02:21:14, 2019-04-12 02:13:45, 2019-04-12 02:10:1…
## $ ipaddr   &lt;chr&gt; &quot;83.221.204.163&quot;, &quot;114.43.176.110&quot;, &quot;118.163.130.181&quot;, &quot;118.1…</code></pre>
</div>
<div id="時間作為機率分佈x軸" class="section level3 hasAnchor" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> 時間作為機率分佈X軸<a href="時間軸的視覺化.html#時間作為機率分佈x軸" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="時間軸的視覺化.html#cb405-1" aria-hidden="true" tabindex="-1"></a>raw <span class="sc">%&gt;%</span></span>
<span id="cb405-2"><a href="時間軸的視覺化.html#cb405-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(ptime) <span class="sc">+</span> </span>
<span id="cb405-3"><a href="時間軸的視覺化.html#cb405-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>()</span></code></pre></div>
<p><img src="R-for-Data-Journalism_files/figure-html/unnamed-chunk-101-1.png" width="672" /></p>
</div>
<div id="逐月統計資料" class="section level3 hasAnchor" number="6.2.3">
<h3><span class="header-section-number">6.2.3</span> 逐月統計資料<a href="時間軸的視覺化.html#逐月統計資料" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="時間軸的視覺化.html#cb406-1" aria-hidden="true" tabindex="-1"></a>?lubridate</span></code></pre></div>
<div class="r-help-page">
<div class="container">
<table width="100%" summary="page for lubridate-package">
<tr>
<td>
lubridate-package
</td>
<td style="text-align: right;">
R Documentation
</td>
</tr>
</table>
<h2>
Dates and times made easy with lubridate
</h2>
<h3>
Description
</h3>
<p>
Lubridate provides tools that make it easier to parse and
manipulate dates. These tools are grouped below by common
purpose. More information about each function can be found in
its help documentation.
</p>
<h3>
Parsing dates
</h3>
<p>
Lubridate’s parsing functions read strings into R as POSIXct
date-time objects. Users should choose the function whose name
models the order in which the year (‘y’), month (‘m’) and day
(‘d’) elements appear the string to be parsed:
<code>dmy()</code>, <code>myd()</code>, <code>ymd()</code>,
<code>ydm()</code>, <code>dym()</code>, <code>mdy()</code>,
<code>ymd_hms()</code>). A very flexible and user friendly parser
is provided by <code>parse_date_time()</code>.
</p>
<p>
Lubridate can also parse partial dates from strings into
Period objects with the functions
<code>hm()</code>, <code>hms()</code> and <code>ms()</code>.
</p>
<p>
Lubridate has an inbuilt very fast POSIX parser. Most of the <code>strptime()</code>
formats and various extensions are supported for English locales. See
<code>parse_date_time()</code> for more details.
</p>
<h3>
Manipulating dates
</h3>
<p>
Lubridate distinguishes between moments in time (known as
<code>instants()</code>) and spans of time (known as time spans, see
Timespan). Time spans are further separated into
Duration, Period and
Interval objects.
</p>
<h3>
Instants
</h3>
<p>
Instants are specific moments of time. Date, POSIXct, and
POSIXlt are the three object classes Base R recognizes as
instants. <code>is.Date()</code> tests whether an object
inherits from the Date class. <code>is.POSIXt()</code> tests
whether an object inherits from the POSIXlt or POSIXct classes.
<code>is.instant()</code> tests whether an object inherits from
any of the three classes.
</p>
<p>
<code>now()</code> returns the current system time as a POSIXct
object. <code>today()</code> returns the current system date.
For convenience, 1970-01-01 00:00:00 is saved to
origin. This is the instant from which POSIXct
times are calculated. Try <code>unclass(now())</code> to see the numeric structure that
underlies POSIXct objects. Each POSIXct object is saved as the number of seconds
it occurred after 1970-01-01 00:00:00.
</p>
<p>
Conceptually, instants are a combination of measurements on different units
(i.e, years, months, days, etc.). The individual values for
these units can be extracted from an instant and set with the
accessor functions <code>second()</code>, <code>minute()</code>,
<code>hour()</code>, <code>day()</code>, <code>yday()</code>,
<code>mday()</code>, <code>wday()</code>, <code>week()</code>,
<code>month()</code>, <code>year()</code>, <code>tz()</code>,
and <code>dst()</code>.
Note: the accessor functions are named after the singular form
of an element. They shouldn’t be confused with the period
helper functions that have the plural form of the units as a
name (e.g, <code>seconds()</code>).
</p>
<h3>
Rounding dates
</h3>
<p>
Instants can be rounded to a convenient unit using the
functions <code>ceiling_date()</code>, <code>floor_date()</code>
and <code>round_date()</code>.
</p>
<h3>
Time zones
</h3>
<p>
Lubridate provides two helper functions for working with time
zones. <code>with_tz()</code> changes the time zone in which an
instant is displayed. The clock time displayed for the instant
changes, but the moment of time described remains the same.
<code>force_tz()</code> changes only the time zone element of an
instant. The clock time displayed remains the same, but the
resulting instant describes a new moment of time.
</p>
<h3>
Timespans
</h3>
<p>
A timespan is a length of time that may or may not be connected to
a particular instant. For example, three months is a timespan. So is an hour and
a half. Base R uses difftime class objects to record timespans.
However, people are not always consistent in how they expect time to behave.
Sometimes the passage of time is a monotone progression of instants that should
be as mathematically reliable as the number line. On other occasions time must
follow complex conventions and rules so that the clock times we see reflect what
we expect to observe in terms of daylight, season, and congruence with the
atomic clock. To better navigate the nuances of time, <span class="pkg">lubridate</span> creates three
additional timespan classes, each with its own specific and consistent behavior:
Interval, Period and
Duration.
</p>
<p>
<code>is.difftime()</code> tests whether an object
inherits from the difftime class. <code>is.timespan()</code>
tests whether an object inherits from any of the four timespan
classes.
</p>
<h3>
Durations
</h3>
<p>
Durations measure the exact amount of time that occurs between two
instants. This can create unexpected results in relation to clock times if a
leap second, leap year, or change in daylight savings time (DST) occurs in
the interval.
</p>
<p>
Functions for working with durations include <code>is.duration()</code>,
<code>as.duration()</code> and <code>duration()</code>. <code>dseconds()</code>,
<code>dminutes()</code>, <code>dhours()</code>, <code>ddays()</code>,
<code>dweeks()</code> and <code>dyears()</code> convenient lengths.
</p>
<h3>
Periods
</h3>
<p>
Periods measure the change in clock time that occurs between two
instants. Periods provide robust predictions of clock time in the presence of
leap seconds, leap years, and changes in DST.
</p>
<p>
Functions for working with periods include
<code>is.period()</code>, <code>as.period()</code> and
<code>period()</code>. <code>seconds()</code>,
<code>minutes()</code>, <code>hours()</code>, <code>days()</code>,
<code>weeks()</code>, <code>months()</code> and
<code>years()</code> quickly create periods of convenient
lengths.
</p>
<h3>
Intervals
</h3>
<p>
Intervals are timespans that begin at a specific instant and
end at a specific instant. Intervals retain complete information about a
timespan. They provide the only reliable way to convert between
periods and durations.
</p>
<p>
Functions for working with intervals include
<code>is.interval()</code>, <code>as.interval()</code>,
<code>interval()</code>, <code>int_shift()</code>,
<code>int_flip()</code>, <code>int_aligns()</code>,
<code>int_overlaps()</code>, and
<code>%within%</code>. Intervals can also be manipulated with
intersect, union, and setdiff().
</p>
<h3>
Miscellaneous
</h3>
<p>
<code>decimal_date()</code> converts an instant to a decimal of
its year.
<code>leap_year()</code> tests whether an instant occurs during
a leap year.
<code>pretty_dates()</code> provides a method of making pretty
breaks for date-times.
lakers is a data set that contains information
about the Los Angeles Lakers 2008-2009 basketball season.
</p>
<h3>
Author(s)
</h3>
<p>
<strong>Maintainer</strong>: Vitalie Spinu <a href="mailto:spinuvit@gmail.com">spinuvit@gmail.com</a>
</p>
<p>
Authors:
</p>
<ul>
<li>
<p>
Garrett Grolemund
</p>
</li>
<li>
<p>
Hadley Wickham
</p>
</li>
</ul>
<p>
Other contributors:
</p>
<ul>
<li>
<p>
Davis Vaughan [contributor]
</p>
</li>
<li>
<p>
Ian Lyttle [contributor]
</p>
</li>
<li>
<p>
Imanuel Costigan [contributor]
</p>
</li>
<li>
<p>
Jason Law [contributor]
</p>
</li>
<li>
<p>
Doug Mitarotonda [contributor]
</p>
</li>
<li>
<p>
Joseph Larmarange [contributor]
</p>
</li>
<li>
<p>
Jonathan Boiser [contributor]
</p>
</li>
<li>
<p>
Chel Hee Lee [contributor]
</p>
</li>
<li>
<p>
Google Inc. [contributor, copyright holder]
</p>
</li>
</ul>
<h3>
References
</h3>
<p>
Garrett Grolemund, Hadley Wickham (2011). Dates and Times Made
Easy with lubridate. Journal of Statistical Software, 40(3), 1-25.
<a href="https://www.jstatsoft.org/v40/i03/">https://www.jstatsoft.org/v40/i03/</a>.
</p>
<h3>
See Also
</h3>
<p>
Useful links:
</p>
<ul>
<li>
<p>
<a href="https://lubridate.tidyverse.org">https://lubridate.tidyverse.org</a>
</p>
</li>
<li>
<p>
<a href="https://github.com/tidyverse/lubridate">https://github.com/tidyverse/lubridate</a>
</p>
</li>
<li>
<p>
Report bugs at <a href="https://github.com/tidyverse/lubridate/issues">https://github.com/tidyverse/lubridate/issues</a>
</p>
</li>
</ul>
</div>
</div>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="時間軸的視覺化.html#cb407-1" aria-hidden="true" tabindex="-1"></a>raw <span class="sc">%&gt;%</span></span>
<span id="cb407-2"><a href="時間軸的視覺化.html#cb407-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">m =</span> <span class="fu">month</span>(ptime)) <span class="sc">%&gt;%</span> </span>
<span id="cb407-3"><a href="時間軸的視覺化.html#cb407-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(m) <span class="sc">%&gt;%</span></span>
<span id="cb407-4"><a href="時間軸的視覺化.html#cb407-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(m, n) <span class="sc">+</span> </span>
<span id="cb407-5"><a href="時間軸的視覺化.html#cb407-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>()</span></code></pre></div>
<p><img src="R-for-Data-Journalism_files/figure-html/unnamed-chunk-102-1.png" width="672" /></p>
</div>
<div id="逐日統計資料佳" class="section level3 hasAnchor" number="6.2.4">
<h3><span class="header-section-number">6.2.4</span> 逐日統計資料（佳）<a href="時間軸的視覺化.html#逐日統計資料佳" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="時間軸的視覺化.html#cb408-1" aria-hidden="true" tabindex="-1"></a>raw <span class="sc">%&gt;%</span></span>
<span id="cb408-2"><a href="時間軸的視覺化.html#cb408-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(ptime <span class="sc">&gt;=</span> <span class="fu">as_date</span>(<span class="st">&quot;2019-03-18&quot;</span>) <span class="sc">&amp;</span> ptime <span class="sc">&lt;</span> <span class="fu">as_date</span>(<span class="st">&quot;2019-04-01&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb408-3"><a href="時間軸的視覺化.html#cb408-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">m =</span> <span class="fu">floor_date</span>(ptime, <span class="at">unit =</span> <span class="st">&quot;day&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb408-4"><a href="時間軸的視覺化.html#cb408-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(m) <span class="sc">%&gt;%</span></span>
<span id="cb408-5"><a href="時間軸的視覺化.html#cb408-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(m, n) <span class="sc">+</span> </span>
<span id="cb408-6"><a href="時間軸的視覺化.html#cb408-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>()</span></code></pre></div>
<p><img src="R-for-Data-Journalism_files/figure-html/unnamed-chunk-103-1.png" width="672" /></p>
</div>
<div id="每日逐時資料" class="section level3 hasAnchor" number="6.2.5">
<h3><span class="header-section-number">6.2.5</span> 每日逐時資料<a href="時間軸的視覺化.html#每日逐時資料" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb409-1"><a href="時間軸的視覺化.html#cb409-1" aria-hidden="true" tabindex="-1"></a>clean <span class="sc">%&gt;%</span></span>
<span id="cb409-2"><a href="時間軸的視覺化.html#cb409-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(ptime <span class="sc">&gt;=</span> <span class="fu">as_datetime</span>(<span class="st">&quot;2019-03-25&quot;</span>) <span class="sc">&amp;</span> ptime <span class="sc">&lt;</span> <span class="fu">as_datetime</span>(<span class="st">&quot;2019-04-01&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb409-3"><a href="時間軸的視覺化.html#cb409-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">d =</span> <span class="fu">floor_date</span>(ptime, <span class="at">unit =</span> <span class="st">&quot;day&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb409-4"><a href="時間軸的視覺化.html#cb409-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">h =</span> <span class="fu">hour</span>(ptime)) <span class="sc">%&gt;%</span></span>
<span id="cb409-5"><a href="時間軸的視覺化.html#cb409-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(d, h) <span class="sc">%&gt;%</span></span>
<span id="cb409-6"><a href="時間軸的視覺化.html#cb409-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">wd =</span> <span class="fu">wday</span>(d, <span class="at">label =</span> F, <span class="at">locale =</span> <span class="fu">Sys.getlocale</span>(<span class="st">&quot;LC_TIME&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb409-7"><a href="時間軸的視覺化.html#cb409-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">isweekend =</span> <span class="fu">ifelse</span>(wd <span class="sc">&gt;=</span> <span class="dv">6</span>, <span class="st">&quot;weekend&quot;</span>, <span class="st">&quot;weekday&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb409-8"><a href="時間軸的視覺化.html#cb409-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(h, n, <span class="at">color =</span> <span class="fu">as.character</span>(d)) <span class="sc">+</span> </span>
<span id="cb409-9"><a href="時間軸的視覺化.html#cb409-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb409-10"><a href="時間軸的視覺化.html#cb409-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>isweekend)</span></code></pre></div>
<p><img src="R-for-Data-Journalism_files/figure-html/unnamed-chunk-104-1.png" width="672" /></p>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="時間軸的視覺化.html#cb410-1" aria-hidden="true" tabindex="-1"></a>?ifelse</span></code></pre></div>
<div class="r-help-page">
<div class="container">
<table width="100%" summary="page for ifelse">
<tr>
<td>
ifelse
</td>
<td style="text-align: right;">
R Documentation
</td>
</tr>
</table>
<h2>
Conditional Element Selection
</h2>
<h3>
Description
</h3>
<p>
<code>ifelse</code> returns a value with the same shape as
<code>test</code> which is filled with elements selected
from either <code>yes</code> or <code>no</code>
depending on whether the element of <code>test</code>
is <code>TRUE</code> or <code>FALSE</code>.
</p>
<h3>
Usage
</h3>
<pre class="r">
ifelse(test, yes, no)
</pre>
<h3>
Arguments
</h3>
<table summary="R argblock">
<tr valign="top">
<td>
<code>test</code>
</td>
<td>
<p>
an object which can be coerced to logical mode.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>yes</code>
</td>
<td>
<p>
return values for true elements of <code>test</code>.
</p>
</td>
</tr>
<tr valign="top">
<td>
<code>no</code>
</td>
<td>
<p>
return values for false elements of <code>test</code>.
</p>
</td>
</tr>
</table>
<h3>
Details
</h3>
<p>
If <code>yes</code> or <code>no</code> are too short, their elements are recycled.
<code>yes</code> will be evaluated if and only if any element of <code>test</code>
is true, and analogously for <code>no</code>.
</p>
<p>
Missing values in <code>test</code> give missing values in the result.
</p>
<h3>
Value
</h3>
<p>
A vector of the same length and attributes (including dimensions and
<code>“class”</code>) as <code>test</code> and data values from the values of
<code>yes</code> or <code>no</code>. The mode of the answer will be coerced from
logical to accommodate first any values taken from <code>yes</code> and then
any values taken from <code>no</code>.
</p>
<h3>
Warning
</h3>
<p>
The mode of the result may depend on the value of <code>test</code> (see the
examples), and the class attribute (see <code>oldClass</code>) of the
result is taken from <code>test</code> and may be inappropriate for the
values selected from <code>yes</code> and <code>no</code>.
</p>
<p>
Sometimes it is better to use a construction such as
</p>
<pre class="r">  (tmp &lt;- yes; tmp[!test] &lt;- no[!test]; tmp)
</pre>
<p>
, possibly extended to handle missing values in <code>test</code>.
</p>
<p>
Further note that <code>if(test) yes else no</code> is much more efficient
and often much preferable to <code>ifelse(test, yes, no)</code> whenever
<code>test</code> is a simple true/false result, i.e., when
<code>length(test) == 1</code>.
</p>
<p>
The <code>srcref</code> attribute of functions is handled specially: if
<code>test</code> is a simple true result and <code>yes</code> evaluates to a function
with <code>srcref</code> attribute, <code>ifelse</code> returns <code>yes</code> including
its attribute (the same applies to a false <code>test</code> and <code>no</code>
argument). This functionality is only for backwards compatibility, the
form <code>if(test) yes else no</code> should be used whenever <code>yes</code> and
<code>no</code> are functions.
</p>
<h3>
References
</h3>
<p>
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
<em>The New S Language</em>.
Wadsworth &amp; Brooks/Cole.
</p>
<h3>
See Also
</h3>
<p>
<code>if</code>.
</p>
<h3>
Examples
</h3>
<pre class="r">
x &lt;- c(6:-4)
sqrt(x)  #- gives warning
sqrt(ifelse(x &gt;= 0, x, NA))  # no warning

## Note: the following also gives the warning !
ifelse(x &gt;= 0, sqrt(x), NA)


## ifelse() strips attributes
## This is important when working with Dates and factors
x &lt;- seq(as.Date("2000-02-29"), as.Date("2004-10-04"), by = "1 month")
## has many "yyyy-mm-29", but a few "yyyy-03-01" in the non-leap years
y &lt;- ifelse(as.POSIXlt(x)$mday == 29, x, NA)
head(y) # not what you expected ... ==&gt; need restore the class attribute:
class(y) &lt;- class(x)
y
## This is a (not atypical) case where it is better *not* to use ifelse(),
## but rather the more efficient and still clear:
y2 &lt;- x
y2[as.POSIXlt(x)$mday != 29] &lt;- NA
## which gives the same as ifelse()+class() hack:
stopifnot(identical(y2, y))


## example of different return modes (and 'test' alone determining length):
yes &lt;- 1:3
no  &lt;- pi^(1:4)
utils::str( ifelse(NA,    yes, no) ) # logical, length 1
utils::str( ifelse(TRUE,  yes, no) ) # integer, length 1
utils::str( ifelse(FALSE, yes, no) ) # double,  length 1
</pre>
</div>
</div>

</div>
</div>
<!-- </div> -->
            </section>

          </div>
        </div>
      </div>
<a href="base-to-dplyr-tp-theft.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="eda.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/R42_tidy_temoral_features.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R for Data Journalism.pdf", "R for Data Journalism.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
